Title: APIRouter Reference in FastAPI
URL: https://fastapi.tiangolo.com/reference/apirouter/
Summary: This section discusses features of the APIRouter in FastAPI, including context management for lifespans, marking path operations as deprecated, and options for including path operations in the generated OpenAPI documentation.
---

This replaces `startup` and
      `shutdown` functions with a single context manager.
      Read more in the
      [FastAPI docs for `lifespan`](https://fastapi.tiangolo.com/advanced/events/).
      """
    ),
  ] = None,
  deprecated: Annotated[
    Optional[bool],
    Doc(
"""
      Mark all *path operations* in this router as deprecated.
      It will be added to the generated OpenAPI (e.g. visible at `/docs`).
      Read more about it in the
      [FastAPI docs for Path Operation Configuration](https://fastapi.tiangolo.com/tutorial/path-operation-configuration/).
      """
    ),
  ] = None,
  include_in_schema: Annotated[
    bool,
    Doc(
"""
      To include (or not) all the *path operations* in this router in the
      generated OpenAPI.
      This affects the generated OpenAPI (e.g. visible at `/docs`).
      Read more about it in the
      [FastAPI docs for Query Parameters and String Validations](https://fastapi.tiangolo.com/tutorial/query-params-str-validations/#exclude-from-openapi).
      """
    ),
  ] = True,
  generate_unique_id_function: Annotated[
    Callable[[APIRoute], str],
    Doc(
"""
      Customize the function used to generate unique IDs for the *path
      operations* shown in the generated OpenAPI.
      This is particularly useful when automatically generating clients or
      SDKs for your API.
      Read more about it in the
      [FastAPI docs about how to Generate Clients](https://fastapi.tiangolo.com/advanced/generate-clients/#custom-generate-unique-id-function).
      """
    ),
  ] = Default(generate_unique_id),
) -> None:
  super().__init__(
    routes=routes,
    redirect_slashes=redirect_slashes,
    default=default,
    on_startup=on_startup,
    on_shutdown=on_shutdown,
    lifespan=lifespan,
  )
  if prefix:
    assert prefix.startswith("/"), "A path prefix must start with '/'"
    assert not prefix.endswith("/"), (
      "A path prefix must not end with '/', as the routes will start with '/'"
    )
  self.prefix = prefix
  self.tags: List[Union[str, Enum]] = tags or []
  self.dependencies = list(dependencies or [])
  self.deprecated = deprecated
  self.include_in_schema = include_in_schema
  self.responses = responses or {}
  self.callbacks = callbacks or []
  self.dependency_overrides_provider = dependency_overrides_provider
  self.route_class = route_class
  self.default_response_class = default_response_class
  self.generate_unique_id_function = generate_unique_id_function

```
  
---|---  
###  websocket [¶](https://fastapi.tiangolo.com/reference/apirouter/#fastapi.APIRouter.websocket "Permanent link")
```
websocket(path, name=None, *, dependencies=None)

```

Decorate a WebSocket function.
Read more about it in the [FastAPI docs for WebSockets](https://fastapi.tiangolo.com/advanced/websockets/).
**Example**
##### Example[¶](https://fastapi.tiangolo.com/reference/apirouter/#fastapi.APIRouter.websocket--example "Permanent link")
```
fromfastapiimport APIRouter, FastAPI, WebSocket
app = FastAPI()
router = APIRouter()
@router.websocket("/ws")
async defwebsocket_endpoint(websocket: WebSocket):
  await websocket.accept()
  while True:
    data = await websocket.receive_text()
    await websocket.send_text(f"Message text was: {data}")
app.include_router(router)

```

PARAMETER | DESCRIPTION  
---|---  
`path` |  WebSocket path. **TYPE:** `str`  
`name` |  A name for the WebSocket. Only used internally. **TYPE:** `Optional[str]` **DEFAULT:** `None`  
`dependencies` |  A list of dependencies (using `Depends()`) to be used for this WebSocket. Read more about it in the [FastAPI docs for WebSockets](https://fastapi.tiangolo.com/advanced/websockets/). **TYPE:** `Optional[Sequence[Depends]]` **DEFAULT:** `None`  
Source code in `fastapi/routing.py`
```
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
```
| ```
defwebsocket(
  self,
  path: Annotated[
    str,
    Doc(
"""
      WebSocket path.
      """
    ),
  ],
  name: Annotated[
    Optional[str],
    Doc(
"""
      A name for the WebSocket. Only used internally.
      """
    ),
  ] = None,
  *,
  dependencies: Annotated[
    Optional[Sequence[params.Depends]],
    Doc(
"""
      A list of dependencies (using `Depends()`) to be used for this
      WebSocket.
      Read more about it in the
      [FastAPI docs for WebSockets](https://fastapi.tiangolo.com/advanced/websockets/).
      """
    ),
  ] = None,
) -> Callable[[DecoratedCallable], DecoratedCallable]:
"""
  Decorate a WebSocket function.
  Read more about it in the
  [FastAPI docs for WebSockets](https://fastapi.tiangolo.com/advanced/websockets/).
  **Example**
  ## Example