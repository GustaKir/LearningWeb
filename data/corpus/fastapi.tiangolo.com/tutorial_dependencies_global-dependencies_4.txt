Title: Global Dependencies in FastAPI
URL: https://fastapi.tiangolo.com/tutorial/dependencies/global-dependencies/
Summary: This document explains how to implement global dependencies in FastAPI using async functions and header parameters. It provides examples of verifying tokens and keys through headers for endpoints, ensuring security for '/items/' and '/users/' routes.
---

```
fromfastapiimport Depends, FastAPI, Header, HTTPException
fromtyping_extensionsimport Annotated
async defverify_token(x_token: Annotated[str, Header()]):
  if x_token != "fake-super-secret-token":
    raise HTTPException(status_code=400, detail="X-Token header invalid")
async defverify_key(x_key: Annotated[str, Header()]):
  if x_key != "fake-super-secret-key":
    raise HTTPException(status_code=400, detail="X-Key header invalid")
  return x_key
app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])
@app.get("/items/")
async defread_items():
  return [{"item": "Portal Gun"}, {"item": "Plumbus"}]
@app.get("/users/")
async defread_users():
  return [{"username": "Rick"}, {"username": "Morty"}]

```

ðŸ¤“ Other versions and variants
[Python 3.8+](https://fastapi.tiangolo.com/tutorial/dependencies/global-dependencies/#__tabbed_2_1)[Python 3.8+ - non-Annotated](https://fastapi.tiangolo.com/tutorial/dependencies/global-dependencies/#__tabbed_2_2)
```
fromfastapiimport Depends, FastAPI, Header, HTTPException
fromtyping_extensionsimport Annotated
async defverify_token(x_token: Annotated[str, Header()]):
  if x_token != "fake-super-secret-token":
    raise HTTPException(status_code=400, detail="X-Token header invalid")
async defverify_key(x_key: Annotated[str, Header()]):
  if x_key != "fake-super-secret-key":
    raise HTTPException(status_code=400, detail="X-Key header invalid")
  return x_key
app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])
@app.get("/items/")
async defread_items():
  return [{"item": "Portal Gun"}, {"item": "Plumbus"}]
@app.get("/users/")
async defread_users():
  return [{"username": "Rick"}, {"username": "Morty"}]

```

Tip
Prefer to use the `Annotated` version if possible.
```
fromfastapiimport Depends, FastAPI, Header, HTTPException
async defverify_token(x_token: str = Header()):
  if x_token != "fake-super-secret-token":
    raise HTTPException(status_code=400, detail="X-Token header invalid")
async defverify_key(x_key: str = Header()):
  if x_key != "fake-super-secret-key":
    raise HTTPException(status_code=400, detail="X-Key header invalid")
  return x_key
app = FastAPI(dependencies=[Depends(verify_token), Depends(verify_key)])
@app.get("/items/")
async defread_items():
  return [{"item": "Portal Gun"}, {"item": "Plumbus"}]
@app.get("/users/")
async defread_users():
  return [{"username": "Rick"}, {"username": "Morty"}]

```

And all the ideas in the section about [adding `dependencies` to the _path operation decorators_](https://fastapi.tiangolo.com/tutorial/dependencies/dependencies-in-path-operation-decorators/) still apply, but in this case, to all of the _path operations_ in the app.
## Dependencies for groups of _path operations_[Â¶](https://fastapi.tiangolo.com/tutorial/dependencies/global-dependencies/#dependencies-for-groups-of-path-operations "Permanent link")
Later, when reading about how to structure bigger applications ([Bigger Applications - Multiple Files](https://fastapi.tiangolo.com/tutorial/bigger-applications/)), possibly with multiple files, you will learn how to declare a single `dependencies` parameter for a group of _path operations_.
Was this page helpful? 
Thanks for your feedback! 
Thanks for your feedback! 
Back to top  [ Previous  Dependencies in path operation decorators  ](https://fastapi.tiangolo.com/tutorial/dependencies/dependencies-in-path-operation-decorators/) [ Next  Dependencies with yield  ](https://fastapi.tiangolo.com/tutorial/dependencies/dependencies-with-yield/)
The FastAPI trademark is owned by [@tiangolo](https://tiangolo.com) and is registered in the US and across other regions 
Made with [ Material for MkDocs ](https://squidfunk.github.io/mkdocs-material/)
[ ](https://github.com/fastapi/fastapi "github.com") [ ](https://discord.gg/VQjSZaeJmf "discord.gg") [ ](https://twitter.com/fastapi "twitter.com") [ ](https://www.linkedin.com/in/tiangolo "www.linkedin.com") [ ](https://dev.to/tiangolo "dev.to") [ ](https://medium.com/@tiangolo "medium.com") [ ](https://tiangolo.com "tiangolo.com")