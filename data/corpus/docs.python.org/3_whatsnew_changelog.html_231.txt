Title: Python 3.11 Changelog Highlights
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This chunk summarizes several key changes in Python 3.11, including the update of the default child watcher to `PidfdChildWatcher` on Linux, the reversal of the deprecation of `asyncio.Task.cancel(
---

-98023](https://github.com/python/cpython/issues/98023): Change default child watcher to [`PidfdChildWatcher`](https://docs.python.org/3/library/asyncio-policy.html#asyncio.PidfdChildWatcher "asyncio.PidfdChildWatcher") on Linux systems which supports it. Patch by Kumar Aditya.
  * [gh-90985](https://github.com/python/cpython/issues/90985): Earlier in 3.11 we deprecated `asyncio.Task.cancel("message")`. We realized we were too harsh, and have undeprecated it.
  * [gh-65961](https://github.com/python/cpython/issues/65961): Do not rely solely on `__cached__` on modules; code will also support `__spec__.cached`.
  * [gh-97646](https://github.com/python/cpython/issues/97646): Replace deprecated `application/javascript` with `text/javascript` in [`mimetypes`](https://docs.python.org/3/library/mimetypes.html#module-mimetypes "mimetypes: Mapping of filename extensions to MIME types."). See [**RFC 9239**](https://datatracker.ietf.org/doc/html/rfc9239.html). Patch by Noam Cohen.
  * [gh-97930](https://github.com/python/cpython/issues/97930): Apply changes from importlib_resources 5.8 and 5.9: `Traversable.joinpath` provides a concrete implementation. `as_file` now supports directories of resources.
  * [gh-97850](https://github.com/python/cpython/issues/97850): Remove deprecated `importlib.util.set_loader()` and `importlib.util.module_for_loader()` from [`importlib.util`](https://docs.python.org/3/library/importlib.html#module-importlib.util "importlib.util: Utility code for importers").
  * [gh-97837](https://github.com/python/cpython/issues/97837): Change deprecate warning message in [`unittest`](https://docs.python.org/3/library/unittest.html#module-unittest "unittest: Unit testing framework for Python.") from
`It is deprecated to return a value!=None`
to
`It is deprecated to return a value that is not None from a test case`
  * [gh-97825](https://github.com/python/cpython/issues/97825): Fixes [`AttributeError`](https://docs.python.org/3/library/exceptions.html#AttributeError "AttributeError") when [`subprocess.check_output()`](https://docs.python.org/3/library/subprocess.html#subprocess.check_output "subprocess.check_output") is used with argument `input=None` and either of the arguments _encoding_ or _errors_ are used.
  * [gh-97008](https://github.com/python/cpython/issues/97008): [`NameError`](https://docs.python.org/3/library/exceptions.html#NameError "NameError") and [`AttributeError`](https://docs.python.org/3/library/exceptions.html#AttributeError "AttributeError") spelling suggestions provided since [gh-82711](https://github.com/python/cpython/issues/82711) are now also emitted by the pure Python [`traceback`](https://docs.python.org/3/library/traceback.html#module-traceback "traceback: Print or retrieve a stack traceback.") module. Tests for those suggestions now exercise both implementations to ensure they are equivalent. Patch by Carl Friedrich Bolz-Tereick and Łukasz Langa.
  * [gh-97799](https://github.com/python/cpython/issues/97799): `dataclass` now uses [`inspect.get_annotations()`](https://docs.python.org/3/library/inspect.html#inspect.get_annotations "inspect.get_annotations") to examine the annotations on class objects.
  * [gh-97781](https://github.com/python/cpython/issues/97781): Removed deprecated interfaces in `importlib.metadata` (entry points accessed as dictionary, implicit dictionary construction of sequence of `EntryPoint` objects, mutablility of `EntryPoints` result, access of entry point by index). `entry_points` now has a simpler, more straightforward API (returning `EntryPoints`).
  * [gh-96827](https://github.com/python/cpython/issues/96827): Avoid spurious tracebacks from [`asyncio`](https://docs.python.org/3/library/asyncio.html#module-asyncio "asyncio: Asynchronous I/O.") when default executor cleanup is delayed until after the event loop is closed (e.g. as the result of a keyboard interrupt).
  * [gh-95534](https://github.com/python/cpython/issues/95534): `gzip.GzipFile.read()` reads 10% faster.
  * [gh-97592](https://github.com/python/cpython/issues/97592): Avoid a crash in the C version of [`asyncio.Future.remove_done_callback()`](https://docs.python.org/3/library/asyncio-future.html#asyncio.Future.remove_done_callback "asyncio.Future.remove_done_callback") when an evil argument is passed.
  * [gh-97639](https://github.com/python/cpython/issues/97639): Remove `tokenize.NL` check from [`tabnanny`](https://docs.python.org/3/library/tabnanny.html#module-tabnanny "tabnanny: Tool for detecting white space related problems in Python source files in a directory tree.").
  * [gh-97545](https://github.com/python/cpython/issues/97545): Make Semaphore run faster.
  * [gh-73588](https://github.com/python/cpython/issues/73588): Fix generation of the default name of `tkinter.Checkbutton`. Previously, checkbuttons in different parent widgets could have the same short name and share the same state if arguments “name” and “variable” are not specified.