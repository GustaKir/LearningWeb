Title: Python 3 Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This update includes several patches: `asyncio.StreamReader.readuntil()` now accepts an iterable of separators; `mimetypes.guess_type()` improves URL parsing; and `unittest.TestLoader.discover()` preserves the original top-level directory value.
---

Patch by Kernc.
  * [bpo-37141](https://bugs.python.org/issue?@action=redirect&bpo=37141): Accept an iterable of separators in [`asyncio.StreamReader.readuntil()`](https://docs.python.org/3/library/asyncio-stream.html#asyncio.StreamReader.readuntil "asyncio.StreamReader.readuntil"), stopping when one of them is encountered.
  * [gh-66543](https://github.com/python/cpython/issues/66543): Make [`mimetypes.guess_type()`](https://docs.python.org/3/library/mimetypes.html#mimetypes.guess_type "mimetypes.guess_type") properly parsing of URLs with only a host name, URLs containing fragment or query, and filenames with only a UNC sharepoint on Windows. Based on patch by Dong-hee Na.
  * [bpo-15010](https://bugs.python.org/issue?@action=redirect&bpo=15010): [`unittest.TestLoader.discover()`](https://docs.python.org/3/library/unittest.html#unittest.TestLoader.discover "unittest.TestLoader.discover") now saves the original value of `unittest.TestLoader._top_level_dir` and restores it at the end of the call.


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id84 "Link to this heading")
  * [gh-115977](https://github.com/python/cpython/issues/115977): Remove compatibility references to Emscripten.
  * [gh-114099](https://github.com/python/cpython/issues/114099): Add an iOS platform guide, and flag modules not available on iOS.
  * [gh-91565](https://github.com/python/cpython/issues/91565): Changes to documentation files and config outputs to reflect the new location for reporting bugs - i.e. GitHub rather than bugs.python.org.


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id85 "Link to this heading")
  * [gh-83434](https://github.com/python/cpython/issues/83434): Disable JUnit XML output (`--junit-xml=FILE` command line option) in regrtest when hunting for reference leaks (`-R` option). Patch by Victor Stinner.
  * [gh-117187](https://github.com/python/cpython/issues/117187): Fix XML tests for vanilla Expat <2.6.0.
  * [gh-116333](https://github.com/python/cpython/issues/116333): Tests of TLS related things (error codes, etc) were updated to be more lenient about specific error message strings and behaviors as seen in the BoringSSL and AWS-LC forks of OpenSSL.
  * [gh-117089](https://github.com/python/cpython/issues/117089): Consolidated tests for importlib.metadata in their own `metadata` package.
  * [gh-115979](https://github.com/python/cpython/issues/115979): Update test_importlib so that it passes under WASI SDK 21.
  * [gh-112536](https://github.com/python/cpython/issues/112536): Add –tsan to test.regrtest for running TSAN tests in reasonable execution times. Patch by Donghee Na.
  * [gh-116307](https://github.com/python/cpython/issues/116307): Added import helper `isolated_modules` as `CleanImport` does not remove modules imported during the context. Use it in importlib.resources tests to avoid leaving `mod` around to impede importlib.metadata tests.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id86 "Link to this heading")
  * [gh-114736](https://github.com/python/cpython/issues/114736): Have WASI builds use WASI SDK 21.
  * [gh-115983](https://github.com/python/cpython/issues/115983): Skip building test modules that must be built as shared under WASI.
  * [gh-71052](https://github.com/python/cpython/issues/71052): Add Android build script and instructions.