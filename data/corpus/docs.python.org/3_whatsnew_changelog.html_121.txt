Title: Python 3 Library Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This chunk details several library updates in Python 3, including fixes to the TextIOWrapper constructor, the addition of the NI_IDN constant in the socket module for use with getnameinfo, and a change to issue a warning rather than a RuntimeError when the event loop is already closed at StreamWriter's destructor.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id122 "Link to this heading")
  * [gh-111942](https://github.com/python/cpython/issues/111942): Fix SystemError in the TextIOWrapper constructor with non-encodable “errors” argument in non-debug mode.
  * [gh-111995](https://github.com/python/cpython/issues/111995): Added the `NI_IDN` constant to the [`socket`](https://docs.python.org/3/library/socket.html#module-socket "socket: Low-level networking interface.") module when present in C at build time for use with [`socket.getnameinfo()`](https://docs.python.org/3/library/socket.html#socket.getnameinfo "socket.getnameinfo").
  * [gh-109538](https://github.com/python/cpython/issues/109538): Issue warning message instead of having [`RuntimeError`](https://docs.python.org/3/library/exceptions.html#RuntimeError "RuntimeError") be displayed when event loop has already been closed at `StreamWriter.__del__()`.
  * [gh-111942](https://github.com/python/cpython/issues/111942): Fix crashes in [`io.TextIOWrapper.reconfigure()`](https://docs.python.org/3/library/io.html#io.TextIOWrapper.reconfigure "io.TextIOWrapper.reconfigure") when pass invalid arguments, e.g. non-string encoding.
  * [gh-111460](https://github.com/python/cpython/issues/111460): [`curses`](https://docs.python.org/3/library/curses.html#module-curses "curses: An interface to the curses library, providing portable terminal handling. \(Unix\)"): restore wide character support (including [`curses.unget_wch()`](https://docs.python.org/3/library/curses.html#curses.unget_wch "curses.unget_wch") and [`get_wch()`](https://docs.python.org/3/library/curses.html#curses.window.get_wch "curses.window.get_wch")) on macOS, which was unavailable due to a regression in Python 3.12.
  * [gh-103791](https://github.com/python/cpython/issues/103791): [`contextlib.suppress`](https://docs.python.org/3/library/contextlib.html#contextlib.suppress "contextlib.suppress") now supports suppressing exceptions raised as part of a [`BaseExceptionGroup`](https://docs.python.org/3/library/exceptions.html#BaseExceptionGroup "BaseExceptionGroup"), in addition to the recent support for [`ExceptionGroup`](https://docs.python.org/3/library/exceptions.html#ExceptionGroup "ExceptionGroup").
  * [gh-111835](https://github.com/python/cpython/issues/111835): The [`mmap.mmap`](https://docs.python.org/3/library/mmap.html#mmap.mmap "mmap.mmap") class now has an [`seekable()`](https://docs.python.org/3/library/mmap.html#mmap.mmap.seekable "mmap.mmap.seekable") method that can be used when a seekable file-like object is required. The [`seek()`](https://docs.python.org/3/library/mmap.html#mmap.mmap.seek "mmap.mmap.seek") method now returns the new absolute position. Patch by Donghee Na.
  * [gh-111804](https://github.com/python/cpython/issues/111804): Remove posix.fallocate() under WASI as the underlying posix_fallocate() is not available in WASI preview2.
  * [gh-111841](https://github.com/python/cpython/issues/111841): Fix truncating arguments on an embedded null character in [`os.putenv()`](https://docs.python.org/3/library/os.html#os.putenv "os.putenv") and [`os.unsetenv()`](https://docs.python.org/3/library/os.html#os.unsetenv "os.unsetenv") on Windows.
  * [gh-111768](https://github.com/python/cpython/issues/111768): [`wsgiref.util.is_hop_by_hop()`](https://docs.python.org/3/library/wsgiref.html#wsgiref.util.is_hop_by_hop "wsgiref.util.is_hop_by_hop") is now exposed correctly in `__all__`.
  * [gh-80731](https://github.com/python/cpython/issues/80731): Avoid executing the default function in [`cmd.Cmd`](https://docs.python.org/3/library/cmd.html#cmd.Cmd "cmd.Cmd") in an except block
  * [gh-111541](https://github.com/python/cpython/issues/111541): Fix [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") for [`SyntaxError`](https://docs.python.org/3/library/exceptions.html#SyntaxError "SyntaxError") not-builtin subclasses.
  * [gh-111719](https://github.com/python/cpython/issues/111719): Add extra argument validation for `alias` command in [`pdb`](https://docs.python.org/3/library/pdb.html#module-pdb "pdb: The Python debugger for interactive interpreters.")
  * [gh-111482](https://github.com/python/cpython/issues/111482): [`time`](https://docs.python.org/3/library/time.html#module-time "time: Time access and conversions."): Make [`time.clock_gettime()`](https://docs.python.org/3/library/time.html#time.clock_gettime "time.clock_gettime") and [`time.clock_gettime_ns()`](https://docs.python.org/3/library/time.html#time.clock_gettime_ns "time.clock_gettime_ns") functions up to 2x faster by faster calling convention. Patch by Victor Stinner.
  * [gh-110894](https://github.com/python/cpython/issues/110894): Call loop exception handler for exceptions in `client_connected_cb` of [`asyncio.start_server()`](https://docs.python.org/3/library/asyncio-stream.html#asyncio.start_server "asyncio.start_server") so that applica