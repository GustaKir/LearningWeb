Title: Python C API: Marshal Functions
URL: https://docs.python.org/3/c-api/marshal.html
Summary: This document chunk describes two functions from the Python C API for reading data from a file stream. `PyMarshal_ReadShortFromFile` reads a 16-bit short, returning `-1` on error and raising an `EOFError`. `PyMarshal_ReadObjectFromFile` reads a Python object, also raising `EOFError` or `ValueError` on errors and returning a new reference.
---

intPyMarshal_ReadShortFromFile(FILE*file)[¶](https://docs.python.org/3/c-api/marshal.html#c.PyMarshal_ReadShortFromFile "Link to this definition")
    
Return a C short from the data stream in a FILE* opened for reading. Only a 16-bit value can be read in using this function, regardless of the native size of short.
On error, sets the appropriate exception ([`EOFError`](https://docs.python.org/3/library/exceptions.html#EOFError "EOFError")) and returns `-1`. 

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyMarshal_ReadObjectFromFile(FILE*file)[¶](https://docs.python.org/3/c-api/marshal.html#c.PyMarshal_ReadObjectFromFile "Link to this definition")
    _Return value: New reference._
Return a Python object from the data stream in a FILE* opened for reading.
On error, sets the appropriate exception ([`EOFError`](https://docs.python.org/3/library/exceptions.html#EOFError "EOFError"), [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") or [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError")) and returns `NULL`. 

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyMarshal_ReadLastObjectFromFile(FILE*file)[¶](https://docs.python.org/3/c-api/marshal.html#c.PyMarshal_ReadLastObjectFromFile "Link to this definition")
    _Return value: New reference._
Return a Python object from the data stream in a FILE* opened for reading. Unlike [`PyMarshal_ReadObjectFromFile()`](https://docs.python.org/3/c-api/marshal.html#c.PyMarshal_ReadObjectFromFile "PyMarshal_ReadObjectFromFile"), this function assumes that no further objects will be read from the file, allowing it to aggressively load file data into memory so that the de-serialization can operate from data in memory rather than reading a byte at a time from the file. Only use these variant if you are certain that you won’t be reading anything else from the file.
On error, sets the appropriate exception ([`EOFError`](https://docs.python.org/3/library/exceptions.html#EOFError "EOFError"), [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") or [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError")) and returns `NULL`. 

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyMarshal_ReadObjectFromString(constchar*data, [Py_ssize_t](https://docs.python.org/3/c-api/intro.html#c.Py_ssize_t "Py_ssize_t")len)[¶](https://docs.python.org/3/c-api/marshal.html#c.PyMarshal_ReadObjectFromString "Link to this definition")
    _Return value: New reference._
Return a Python object from the data stream in a byte buffer containing _len_ bytes pointed to by _data_.
On error, sets the appropriate exception ([`EOFError`](https://docs.python.org/3/library/exceptions.html#EOFError "EOFError"), [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") or [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError")) and returns `NULL`.
#### Previous topic
[Importing Modules](https://docs.python.org/3/c-api/import.html "previous chapter")
#### Next topic
[Parsing arguments and building values](https://docs.python.org/3/c-api/arg.html "next chapter")
### This Page
  * [Report a Bug](https://docs.python.org/3/bugs.html)
  * [Show Source ](https://github.com/python/cpython/blob/main/Doc/c-api/marshal.rst)


«
### Navigation
  * [index](https://docs.python.org/3/genindex.html "General Index")
  * [modules](https://docs.python.org/3/py-modindex.html "Python Module Index") |
  * [next](https://docs.python.org/3/c-api/arg.html "Parsing arguments and building values") |
  * [previous](https://docs.python.org/3/c-api/import.html "Importing Modules") |
  * ![Python logo](https://docs.python.org/3/_static/py.svg)
  * [Python](https://www.python.org/) »
  * EnglishSpanish | españolFrench | françaisItalian | italianoJapanese | 日本語Korean | 한국어Polish | polskiBrazilian Portuguese | Português brasileiroTurkish | TürkçeSimplified Chinese | 简体中文Traditional Chinese | 繁體中文
dev (3.14)3.13.33.123.113.103.93.83.73.63.53.43.33.23.13.02.72.6
  * [3.13.3 Documentation](https://docs.python.org/3/index.html) » 
  * [Python/C API Reference Manual](https://docs.python.org/3/c-api/index.html) »
  * [Utilities](https://docs.python.org/3/c-api/utilities.html) »
  * [Data marshalling support](https://docs.python.org/3/c-api/marshal.html)
  * | 
  * Theme  Auto Light Dark |