Title: Python 3 Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: Recent updates to Python include a fix for infinite loops caused by subdirectories which previously led to RecursionError, an enhancement to the `is_cgi()` function in `http.server` for better directory processing, and improved handling of functions decorated with `functools.wraps()` in `typing.get_type_hints()`. These modifications address specific bugs and improve functionality.
---

another subdirectory resulted in an endless loop and a RecursionError. A fix was added to consume an iterator and create the list of the entries to be copied, avoiding the recursion for newly created directories. Patch by Bruno P. Kinoshita.
  * [bpo-38863](https://bugs.python.org/issue?@action=redirect&bpo=38863): Improve `is_cgi()` function in [`http.server`](https://docs.python.org/3/library/http.server.html#module-http.server "http.server: HTTP server and request handlers."), which enables processing the case that cgi directory is a child of another directory other than root.
  * [bpo-37838](https://bugs.python.org/issue?@action=redirect&bpo=37838): [`typing.get_type_hints()`](https://docs.python.org/3/library/typing.html#typing.get_type_hints "typing.get_type_hints") properly handles functions decorated with [`functools.wraps()`](https://docs.python.org/3/library/functools.html#functools.wraps "functools.wraps").
  * [bpo-38870](https://bugs.python.org/issue?@action=redirect&bpo=38870): Expose [`ast.unparse()`](https://docs.python.org/3/library/ast.html#ast.unparse "ast.unparse") as a function of the [`ast`](https://docs.python.org/3/library/ast.html#module-ast "ast: Abstract Syntax Tree classes and manipulation.") module that can be used to unparse an [`ast.AST`](https://docs.python.org/3/library/ast.html#ast.AST "ast.AST") object and produce a string with code that would produce an equivalent [`ast.AST`](https://docs.python.org/3/library/ast.html#ast.AST "ast.AST") object when parsed. Patch by Pablo Galindo and Batuhan Taskaya.
  * [bpo-38859](https://bugs.python.org/issue?@action=redirect&bpo=38859): AsyncMock now returns StopAsyncIteration on the exhaustion of a side_effects iterable. Since PEP-479 its Impossible to raise a StopIteration exception from a coroutine.
  * [bpo-38857](https://bugs.python.org/issue?@action=redirect&bpo=38857): AsyncMock fix for return values that are awaitable types. This also covers side_effect iterable values that happened to be awaitable, and wraps callables that return an awaitable type. Before these awaitables were being awaited instead of being returned as is.
  * [bpo-38834](https://bugs.python.org/issue?@action=redirect&bpo=38834): [`typing.TypedDict`](https://docs.python.org/3/library/typing.html#typing.TypedDict "typing.TypedDict") subclasses now track which keys are optional using the `__required_keys__` and `__optional_keys__` attributes, to enable runtime validation by downstream projects. Patch by Zac Hatfield-Dodds.
  * [bpo-38821](https://bugs.python.org/issue?@action=redirect&bpo=38821): Fix unhandled exceptions in [`argparse`](https://docs.python.org/3/library/argparse.html#module-argparse "argparse: Command-line option and argument parsing library.") when internationalizing error messages for arguments with `nargs` set to special (non-integer) values. Patch by Federico Bond.
  * [bpo-38820](https://bugs.python.org/issue?@action=redirect&bpo=38820): Make Python compatible with OpenSSL 3.0.0. [`ssl.SSLSocket.getpeercert()`](https://docs.python.org/3/library/ssl.html#ssl.SSLSocket.getpeercert "ssl.SSLSocket.getpeercert") no longer returns IPv6 addresses with a trailing new line.
  * [bpo-38811](https://bugs.python.org/issue?@action=redirect&bpo=38811): Fix an unhandled exception in [`pathlib`](https://docs.python.org/3/library/pathlib.html#module-pathlib "pathlib: Object-oriented filesystem paths") when [`os.link()`](https://docs.python.org/3/library/os.html#os.link "os.link") is missing. Patch by Toke Høiland-Jørgensen.
  * [bpo-38686](https://bugs.python.org/issue?@action=redirect&bpo=38686): Added support for multiple `qop` values in [`urllib.request.AbstractDigestAuthHandler`](https://docs.python.org/3/library/urllib.request.html#urllib.request.AbstractDigestAuthHandler "urllib.request.AbstractDigestAuthHandler").
  * [bpo-38712](https://bugs.python.org/issue?@action=redirect&bpo=38712): Add the Linux-specific [`signal.pidfd_send_signal()`](https://docs.python.org/3/library/signal.html#signal.pidfd_send_signal "signal.pidfd_send_signal") function, which allows sending a signal to a process identified by a file descriptor rather than a pid.
  * [bpo-38348](https://bugs.python.org/issue?@action=redirect&bpo=38348): Add `-i` and `--indent` (indentation level), and `--no-type-comments` (type comments) command line options to ast parsing tool.
  * [bpo-37523](https://bugs.python.org/issue?@action=redirect&bpo=37523): Change `zipfile.ZipExtFile` to raise `ValueError` when trying to access the underlying file object after it has been closed. This new behavior is consistent with how accessing closed files is handled in other parts of Python.
  * [bpo-38045](https://bugs.python.org/issue?@action=redirect&bpo=38045): Improve the performance of `enum._decompose()` in [`enum`](https://docs.python.org/3/library/enum.html#module-enum "enum: Implementation of an enumeration class.").