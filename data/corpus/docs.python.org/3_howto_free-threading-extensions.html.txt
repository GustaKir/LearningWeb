Title: Free Threading Extensions in Python
URL: https://docs.python.org/3/howto/free-threading-extensions.html
Summary: This document provides guidance on C API extension support for free threading in Python, detailing how to identify free-threaded builds, as well as module initialization processes including multi-phase and single-phase initialization.
---

[ ![Python logo](https://docs.python.org/3/_static/py.svg) ](https://www.python.org/) dev (3.14)3.13.33.123.113.103.93.83.73.63.53.43.33.23.13.02.72.6
EnglishSpanish | españolFrench | françaisItalian | italianoJapanese | 日本語Korean | 한국어Polish | polskiBrazilian Portuguese | Português brasileiroTurkish | TürkçeSimplified Chinese | 简体中文Traditional Chinese | 繁體中文
Theme  Auto Light Dark
### [Table of Contents](https://docs.python.org/3/contents.html)
  * [C API Extension Support for Free Threading](https://docs.python.org/3/howto/free-threading-extensions.html)
    * [Identifying the Free-Threaded Build in C](https://docs.python.org/3/howto/free-threading-extensions.html#identifying-the-free-threaded-build-in-c)
    * [Module Initialization](https://docs.python.org/3/howto/free-threading-extensions.html#module-initialization)
      * [Multi-Phase Initialization](https://docs.python.org/3/howto/free-threading-extensions.html#multi-phase-initialization)
      * [Single-Phase Initialization](https://docs.python.org/3/howto/free-threading-extensions.html#single-phase-initialization)
    * [General API Guidelines](https://docs.python.org/3/howto/free-threading-extensions.html#general-api-guidelines)
      * [Container Thread Safety](https://docs.python.org/3/howto/free-threading-extensions.html#container-thread-safety)
        * [`PyDict_Next`](https://docs.python.org/3/howto/free-threading-extensions.html#pydict-next)
    * [Borrowed References](https://docs.python.org/3/howto/free-threading-extensions.html#borrowed-references)
    * [Memory Allocation APIs](https://docs.python.org/3/howto/free-threading-extensions.html#memory-allocation-apis)
    * [Thread State and GIL APIs](https://docs.python.org/3/howto/free-threading-extensions.html#thread-state-and-gil-apis)
    * [Protecting Internal Extension State](https://docs.python.org/3/howto/free-threading-extensions.html#protecting-internal-extension-state)
    * [Building Extensions for the Free-Threaded Build](https://docs.python.org/3/howto/free-threading-extensions.html#building-extensions-for-the-free-threaded-build)
      * [Limited C API and Stable ABI](https://docs.python.org/3/howto/free-threading-extensions.html#limited-c-api-and-stable-abi)
      * [Windows](https://docs.python.org/3/howto/free-threading-extensions.html#windows)


#### Previous topic
[Python experimental support for free threading](https://docs.python.org/3/howto/free-threading-python.html "previous chapter")
#### Next topic
[Python Frequently Asked Questions](https://docs.python.org/3/faq/index.html "next chapter")
### This Page
  * [Report a Bug](https://docs.python.org/3/bugs.html)
  * [Show Source ](https://github.com/python/cpython/blob/main/Doc/howto/free-threading-extensions.rst)


### Navigation
  * [index](https://docs.python.org/3/genindex.html "General Index")
  * [modules](https://docs.python.org/3/py-modindex.html "Python Module Index") |
  * [next](https://docs.python.org/3/faq/index.html "Python Frequently Asked Questions") |
  * [previous](https://docs.python.org/3/howto/free-threading-python.html "Python experimental support for free threading") |
  * ![Python logo](https://docs.python.org/3/_static/py.svg)
  * [Python](https://www.python.org/) »
  * EnglishSpanish | españolFrench | françaisItalian | italianoJapanese | 日本語Korean | 한국어Polish | polskiBrazilian Portuguese | Português brasileiroTurkish | TürkçeSimplified Chinese | 简体中文Traditional Chinese | 繁體中文
dev (3.14)3.13.33.123.113.103.93.83.73.63.53.43.33.23.13.02.72.6
  * [3.13.3 Documentation](https://docs.python.org/3/index.html) » 
  * [Python HOWTOs](https://docs.python.org/3/howto/index.html) »
  * [C API Extension Support for Free Threading](https://docs.python.org/3/howto/free-threading-extensions.html)
  * | 
  * Theme  Auto Light Dark |


# C API Extension Support for Free Threading[¶](https://docs.python.org/3/howto/free-threading-extensions.html#c-api-extension-support-for-free-threading "Link to this heading")
Starting with the 3.13 release, CPython has experimental support for running with the [global interpreter lock](https://docs.python.org/3/glossary.html#term-global-interpreter-lock) (GIL) disabled in a configuration called [free threading](https://docs.python.org/3/glossary.html#term-free-threading). This document describes how to adapt C API extensions to support free threading.
## Identifying the Free-Threaded Build in C[¶](https://docs.python.org/3/howto/free-threading-extensions.html#identifying-the-free-threaded-build-in-c "Link to this heading")
The CPython C API exposes the `Py_GIL_DISABLED` macro: in the free-threaded build it’s defined to `1`, and in the regular build it’s not defined. You can use it to enable code that only runs under the free-threaded build:
```
#ifdef Py_GIL_DISABLED
/* code that only runs in the free-threaded build */
#endif