Title: Handling Failure in Doctests
URL: https://docs.python.org/3/library/doctest.html
Summary: The `doctest.failureException` is raised when doctests fail after being converted to unit tests using `DocFileSuite()` or `DocTestSuite()`. This exception indicates the file name and an approximate line number of the failing test. `DocTestSuite()` generates a `unittest.TestSuite` from `doctest.DocTestCase` instances, which are subclasses of `unittest.TestCase`.
---

_exception_ doctest.failureException[¶](https://docs.python.org/3/library/doctest.html#doctest.failureException "Link to this definition")
    
When doctests which have been converted to unit tests by [`DocFileSuite()`](https://docs.python.org/3/library/doctest.html#doctest.DocFileSuite "doctest.DocFileSuite") or [`DocTestSuite()`](https://docs.python.org/3/library/doctest.html#doctest.DocTestSuite "doctest.DocTestSuite") fail, this exception is raised showing the name of the file containing the test and a (sometimes approximate) line number.
Under the covers, [`DocTestSuite()`](https://docs.python.org/3/library/doctest.html#doctest.DocTestSuite "doctest.DocTestSuite") creates a [`unittest.TestSuite`](https://docs.python.org/3/library/unittest.html#unittest.TestSuite "unittest.TestSuite") out of `doctest.DocTestCase` instances, and `DocTestCase` is a subclass of [`unittest.TestCase`](https://docs.python.org/3/library/unittest.html#unittest.TestCase "unittest.TestCase"). `DocTestCase` isn’t documented here (it’s an internal detail), but studying its code can answer questions about the exact details of [`unittest`](https://docs.python.org/3/library/unittest.html#module-unittest "unittest: Unit testing framework for Python.") integration.
Similarly, [`DocFileSuite()`](https://docs.python.org/3/library/doctest.html#doctest.DocFileSuite "doctest.DocFileSuite") creates a [`unittest.TestSuite`](https://docs.python.org/3/library/unittest.html#unittest.TestSuite "unittest.TestSuite") out of `doctest.DocFileCase` instances, and `DocFileCase` is a subclass of `DocTestCase`.
So both ways of creating a [`unittest.TestSuite`](https://docs.python.org/3/library/unittest.html#unittest.TestSuite "unittest.TestSuite") run instances of `DocTestCase`. This is important for a subtle reason: when you run [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") functions yourself, you can control the [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") options in use directly, by passing option flags to [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") functions. However, if you’re writing a [`unittest`](https://docs.python.org/3/library/unittest.html#module-unittest "unittest: Unit testing framework for Python.") framework, [`unittest`](https://docs.python.org/3/library/unittest.html#module-unittest "unittest: Unit testing framework for Python.") ultimately controls when and how tests get run. The framework author typically wants to control [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") reporting options (perhaps, e.g., specified by command line options), but there’s no way to pass options through [`unittest`](https://docs.python.org/3/library/unittest.html#module-unittest "unittest: Unit testing framework for Python.") to [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") test runners.
For this reason, [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") also supports a notion of [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") reporting flags specific to [`unittest`](https://docs.python.org/3/library/unittest.html#module-unittest "unittest: Unit testing framework for Python.") support, via this function: