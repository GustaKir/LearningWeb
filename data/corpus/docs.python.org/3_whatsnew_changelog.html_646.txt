Title: Core and Builtins Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document section details various updates to the core Python language and built-in functions, including the removal of strict assertions in f-strings, improvements to thread handling of co_extra_freefuncs, fixes for backslash parsing in f-strings, resolution of segmentation faults with dictionaries during mutations, and corrections in the behavior of type.__setattr__() and type.__delattr__() for non-interned attribute names.
---

### Core and Builtins[¶](https://docs.python.org/3/whatsnew/changelog.html#id616 "Link to this heading")
  * [bpo-30682](https://bugs.python.org/issue?@action=redirect&bpo=30682): Removed a too-strict assertion that failed for certain f-strings, such as eval(“f’\n’”) and eval(“f’\r’”).
  * [bpo-30604](https://bugs.python.org/issue?@action=redirect&bpo=30604): Move co_extra_freefuncs to not be per-thread to avoid crashes
  * [bpo-29104](https://bugs.python.org/issue?@action=redirect&bpo=29104): Fixed parsing backslashes in f-strings.
  * [bpo-27945](https://bugs.python.org/issue?@action=redirect&bpo=27945): Fixed various segfaults with dict when input collections are mutated during searching, inserting or comparing. Based on patches by Duane Griffin and Tim Mitchell.
  * [bpo-25794](https://bugs.python.org/issue?@action=redirect&bpo=25794): Fixed type.__setattr__() and type.__delattr__() for non-interned attribute names. Based on patch by Eryk Sun.
  * [bpo-30039](https://bugs.python.org/issue?@action=redirect&bpo=30039): If a KeyboardInterrupt happens when the interpreter is in the middle of resuming a chain of nested ‘yield from’ or ‘await’ calls, it’s now correctly delivered to the innermost frame.
  * [bpo-12414](https://bugs.python.org/issue?@action=redirect&bpo=12414): sys.getsizeof() on a code object now returns the sizes which includes the code struct and sizes of objects which it references. Patch by Donghee Na.
  * [bpo-29949](https://bugs.python.org/issue?@action=redirect&bpo=29949): Fix memory usage regression of set and frozenset object.
  * [bpo-29935](https://bugs.python.org/issue?@action=redirect&bpo=29935): Fixed error messages in the index() method of tuple, list and deque when pass indices of wrong type.
  * [bpo-29859](https://bugs.python.org/issue?@action=redirect&bpo=29859): Show correct error messages when any of the pthread_* calls in thread_pthread.h fails.
  * [bpo-28876](https://bugs.python.org/issue?@action=redirect&bpo=28876): `bool(range)` works even if `len(range)` raises [`OverflowError`](https://docs.python.org/3/library/exceptions.html#OverflowError "OverflowError").
  * [bpo-29600](https://bugs.python.org/issue?@action=redirect&bpo=29600): Fix wrapping coroutine return values in StopIteration.
  * [bpo-28856](https://bugs.python.org/issue?@action=redirect&bpo=28856): Fix an oversight that %b format for bytes should support objects follow the buffer protocol.
  * [bpo-29714](https://bugs.python.org/issue?@action=redirect&bpo=29714): Fix a regression that bytes format may fail when containing zero bytes inside.
  * [bpo-29478](https://bugs.python.org/issue?@action=redirect&bpo=29478): If max_line_length=None is specified while using the Compat32 policy, it is no longer ignored. Patch by Mircea Cosbuc.