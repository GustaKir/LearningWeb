Title: Python 3.12 Changelog: Recent Fixes and Features
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document highlights recent changes in Python 3.12, including the addition of the `--inline-caches` flag to the `dis` command line, a fix for a regression in the `random` module's import time, and support for struct sequence objects in the `copy.replace()` method.
---

on/issues/110249): Add `--inline-caches` flag to `dis` command line.
  * [gh-109653](https://github.com/python/cpython/issues/109653): Fix a Python 3.12 regression in the import time of [`random`](https://docs.python.org/3/library/random.html#module-random "random: Generate pseudo-random numbers with various common distributions."). Patch by Alex Waygood.
  * [gh-110222](https://github.com/python/cpython/issues/110222): Add support of struct sequence objects in [`copy.replace()`](https://docs.python.org/3/library/copy.html#copy.replace "copy.replace"). Patched by Xuehai Pan.
  * [gh-109649](https://github.com/python/cpython/issues/109649): [`multiprocessing`](https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing "multiprocessing: Process-based parallelism."), [`concurrent.futures`](https://docs.python.org/3/library/concurrent.futures.html#module-concurrent.futures "concurrent.futures: Execute computations concurrently using threads or processes."), [`compileall`](https://docs.python.org/3/library/compileall.html#module-compileall "compileall: Tools for byte-compiling all Python source files in a directory tree."): Replace [`os.cpu_count()`](https://docs.python.org/3/library/os.html#os.cpu_count "os.cpu_count") with [`os.process_cpu_count()`](https://docs.python.org/3/library/os.html#os.process_cpu_count "os.process_cpu_count") to select the default number of worker threads and processes. Get the CPU affinity if supported. Patch by Victor Stinner.
  * [gh-110150](https://github.com/python/cpython/issues/110150): Fix base case handling in statistics.quantiles. Now allows a single data point.
  * [gh-110036](https://github.com/python/cpython/issues/110036): On Windows, multiprocessing `Popen.terminate()` now catches [`PermissionError`](https://docs.python.org/3/library/exceptions.html#PermissionError "PermissionError") and get the process exit code. If the process is still running, raise again the [`PermissionError`](https://docs.python.org/3/library/exceptions.html#PermissionError "PermissionError"). Otherwise, the process terminated as expected: store its exit code. Patch by Victor Stinner.
  * [gh-110038](https://github.com/python/cpython/issues/110038): Fixed an issue that caused `KqueueSelector.select()` to not return all the ready events in some cases when a file descriptor is registered for both read and write.
  * [gh-110045](https://github.com/python/cpython/issues/110045): Update the [`symtable`](https://docs.python.org/3/library/symtable.html#module-symtable "symtable: Interface to the compiler's internal symbol tables.") module to support the new scopes introduced by [**PEP 695**](https://peps.python.org/pep-0695/).
  * [gh-88402](https://github.com/python/cpython/issues/88402): Add new variables to [`sysconfig.get_config_vars()`](https://docs.python.org/3/library/sysconfig.html#sysconfig.get_config_vars "sysconfig.get_config_vars") on Windows: `LIBRARY`, `LDLIBRARY`, `LIBDIR`, `SOABI`, and `Py_NOGIL`.
  * [gh-109631](https://github.com/python/cpython/issues/109631): [`re`](https://docs.python.org/3/library/re.html#module-re "re: Regular expression operations.") functions such as [`re.findall()`](https://docs.python.org/3/library/re.html#re.findall "re.findall"), [`re.split()`](https://docs.python.org/3/library/re.html#re.split "re.split"), [`re.search()`](https://docs.python.org/3/library/re.html#re.search "re.search") and [`re.sub()`](https://docs.python.org/3/library/re.html#re.sub "re.sub") which perform short repeated matches can now be interrupted by user.
  * [gh-109653](https://github.com/python/cpython/issues/109653): Reduce the import time of [`email.utils`](https://docs.python.org/3/library/email.utils.html#module-email.utils "email.utils: Miscellaneous email package utilities.") by around 43%. This results in the import time of [`email.message`](https://docs.python.org/3/library/email.message.html#module-email.message "email.message: The base class representing email messages.") falling by around 18%, which in turn reduces the import time of [`importlib.metadata`](https://docs.python.org/3/library/importlib.metadata.html#module-importlib.metadata "importlib.metadata: Accessing package metadata") by around 6%. Patch by Alex Waygood.
  * [gh-109818](https://github.com/python/cpython/issues/109818): Fix [`reprlib.recursive_repr()`](https://docs.python.org/3/library/reprlib.html#reprlib.recursive_repr "reprlib.recursive_repr") not copying `__type_params__` from decorated function.
  * [gh-109047](https://github.com/python/cpython/issues/109047): [`concurrent.futures`](https://docs.python.org/3/library/concurrent.futures.html#module-concurrent.futures "concurrent.futures: Execute computations concurrently using threads or processes."): The _executor manager thread_ now catches exceptions when adding an item to the _call queue_.