Title: Python 3.6.0 Beta 4 Release Notes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details the changes in Python 3.6.0 Beta 4, including enhancements to the core and built-in features, such as improved error messaging for the with-statement, updates to the sys.version output, and fixes for platform-specific file descriptor methods.
---

## Python 3.6.0 beta 4[¶](https://docs.python.org/3/whatsnew/changelog.html#python-3-6-0-beta-4 "Link to this heading")
_Release date: 2016-11-21_
### Core and Builtins[¶](https://docs.python.org/3/whatsnew/changelog.html#id644 "Link to this heading")
  * [bpo-28532](https://bugs.python.org/issue?@action=redirect&bpo=28532): Show sys.version when -V option is supplied twice.
  * [bpo-27100](https://bugs.python.org/issue?@action=redirect&bpo=27100): The with-statement now checks for __enter__ before it checks for __exit__. This gives less confusing error messages when both methods are missing. Patch by Jonathan Ellington.
  * [bpo-28746](https://bugs.python.org/issue?@action=redirect&bpo=28746): Fix the set_inheritable() file descriptor method on platforms that do not have the ioctl FIOCLEX and FIONCLEX commands.
  * [bpo-26920](https://bugs.python.org/issue?@action=redirect&bpo=26920): Fix not getting the locale’s charset upon initializing the interpreter, on platforms that do not have langinfo.
  * [bpo-28648](https://bugs.python.org/issue?@action=redirect&bpo=28648): Fixed crash in Py_DecodeLocale() in debug build on Mac OS X when decode astral characters. Patch by Xiang Zhang.
  * [bpo-19398](https://bugs.python.org/issue?@action=redirect&bpo=19398): Extra slash no longer added to sys.path components in case of empty compile-time PYTHONPATH components.
  * [bpo-28665](https://bugs.python.org/issue?@action=redirect&bpo=28665): Improve speed of the STORE_DEREF opcode by 40%.
  * [bpo-28583](https://bugs.python.org/issue?@action=redirect&bpo=28583): PyDict_SetDefault didn’t combine split table when needed. Patch by Xiang Zhang.
  * [bpo-27243](https://bugs.python.org/issue?@action=redirect&bpo=27243): Change PendingDeprecationWarning -> DeprecationWarning. As it was agreed in the issue, __aiter__ returning an awaitable should result in PendingDeprecationWarning in 3.5 and in DeprecationWarning in 3.6.
  * [bpo-26182](https://bugs.python.org/issue?@action=redirect&bpo=26182): Fix a refleak in code that raises DeprecationWarning.
  * [bpo-28721](https://bugs.python.org/issue?@action=redirect&bpo=28721): Fix asynchronous generators aclose() and athrow() to handle StopAsyncIteration propagation properly.