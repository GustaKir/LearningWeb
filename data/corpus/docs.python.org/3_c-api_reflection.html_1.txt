Title: PyEval_GetLocals Function
URL: https://docs.python.org/3/c-api/reflection.html
Summary: The `PyEval_GetLocals()` function, which returns a borrowed reference to the current local variables, has been deprecated since Python version 3.13. Users are advised to use `PyEval_GetFrameLocals()` instead for similar functionality as `locals()` in Python, or to access `f_locals` through `PyFrame_GetLocals()` from the result of `PyEval_GetFrame()`.
---

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyEval_GetLocals(void)[¶](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetLocals "Link to this definition")
    _Return value: Borrowed reference.__Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable)._
Deprecated since version 3.13: Use either [`PyEval_GetFrameLocals()`](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrameLocals "PyEval_GetFrameLocals") to obtain the same behaviour as calling [`locals()`](https://docs.python.org/3/library/functions.html#locals "locals") in Python code, or else call [`PyFrame_GetLocals()`](https://docs.python.org/3/c-api/frame.html#c.PyFrame_GetLocals "PyFrame_GetLocals") on the result of [`PyEval_GetFrame()`](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrame "PyEval_GetFrame") to access the [`f_locals`](https://docs.python.org/3/reference/datamodel.html#frame.f_locals "frame.f_locals") attribute of the currently executing frame.
Return a mapping providing access to the local variables in the current execution frame, or `NULL` if no frame is currently executing.
Refer to [`locals()`](https://docs.python.org/3/library/functions.html#locals "locals") for details of the mapping returned at different scopes.
As this function returns a [borrowed reference](https://docs.python.org/3/glossary.html#term-borrowed-reference), the dictionary returned for [optimized scopes](https://docs.python.org/3/glossary.html#term-optimized-scope) is cached on the frame object and will remain alive as long as the frame object does. Unlike [`PyEval_GetFrameLocals()`](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrameLocals "PyEval_GetFrameLocals") and [`locals()`](https://docs.python.org/3/library/functions.html#locals "locals"), subsequent calls to this function in the same frame will update the contents of the cached dictionary to reflect changes in the state of the local variables rather than returning a new snapshot.
Changed in version 3.13: As part of [**PEP 667**](https://peps.python.org/pep-0667/), [`PyFrame_GetLocals()`](https://docs.python.org/3/c-api/frame.html#c.PyFrame_GetLocals "PyFrame_GetLocals"), [`locals()`](https://docs.python.org/3/library/functions.html#locals "locals"), and [`FrameType.f_locals`](https://docs.python.org/3/reference/datamodel.html#frame.f_locals "frame.f_locals") no longer make use of the shared cache dictionary. Refer to the [What’s New entry](https://docs.python.org/3/whatsnew/3.13.html#whatsnew313-locals-semantics) for additional details. 

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyEval_GetGlobals(void)[¶](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetGlobals "Link to this definition")
    _Return value: Borrowed reference.__Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable)._
Deprecated since version 3.13: Use [`PyEval_GetFrameGlobals()`](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrameGlobals "PyEval_GetFrameGlobals") instead.
Return a dictionary of the global variables in the current execution frame, or `NULL` if no frame is currently executing. 

[PyFrameObject](https://docs.python.org/3/c-api/frame.html#c.PyFrameObject "PyFrameObject")*PyEval_GetFrame(void)[¶](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrame "Link to this definition")
    _Return value: Borrowed reference.__Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable)._
Return the current thread state’s frame, which is `NULL` if no frame is currently executing.
See also [`PyThreadState_GetFrame()`](https://docs.python.org/3/c-api/init.html#c.PyThreadState_GetFrame "PyThreadState_GetFrame"). 

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyEval_GetFrameBuiltins(void)[¶](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrameBuiltins "Link to this definition")
    _Return value: New reference.__Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable) since version 3.13._
Return a dictionary of the builtins in the current execution frame, or the interpreter of the thread state if no frame is currently executing.
Added in version 3.13.