Title: Python 3 Changelog Highlights
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines notable changes and enhancements in Python 3, including modifications to the `_ast` module, the conversion of `_operator` to use `PyType_FromSpec()`, and transitions of various modules like `_sha3` and `_blake2` to multi-phase initialization, addressing global state issues and improving module management.
---

ssion and decompression routines compatible with gzip.") extension module to multi-phase initialization ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-41631](https://bugs.python.org/issue?@action=redirect&bpo=41631): The `_ast` module uses again a global state. Using a module state per module instance is causing subtle practical problems. For example, the Mercurial project replaces the `__import__()` function to implement lazy import, whereas Python expected that `import _ast` always return a fully initialized `_ast` module.
  * [bpo-40077](https://bugs.python.org/issue?@action=redirect&bpo=40077): Convert `_operator` to use [`PyType_FromSpec()`](https://docs.python.org/3/c-api/type.html#c.PyType_FromSpec "PyType_FromSpec").
  * [bpo-1653741](https://bugs.python.org/issue?@action=redirect&bpo=1653741): Port `_sha3` to multi-phase init. Convert static types to heap types.
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port the `_blake2` extension module to the multi-phase initialization API ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-41533](https://bugs.python.org/issue?@action=redirect&bpo=41533): Free the stack allocated in `va_build_stack` if `do_mkstack` fails and the stack is not a `small_stack`.
  * [bpo-41531](https://bugs.python.org/issue?@action=redirect&bpo=41531): Fix a bug that was dropping keys when compiling dict literals with more than 0xFFFF elements. Patch by Pablo Galindo.
  * [bpo-41525](https://bugs.python.org/issue?@action=redirect&bpo=41525): The output of `python --help` contains now only ASCII characters.
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port the `_sha1`, `_sha512`, and `_md5` extension modules to multi-phase initialization API ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-41431](https://bugs.python.org/issue?@action=redirect&bpo=41431): Optimize `dict_merge()` for copying dict (e.g. `dict(d)` and `{}.update(d)`).
  * [bpo-41428](https://bugs.python.org/issue?@action=redirect&bpo=41428): Implement PEP 604. This supports (int | str) etc. in place of Union[str, int].
  * [bpo-41340](https://bugs.python.org/issue?@action=redirect&bpo=41340): Removed fallback implementation for `strdup`.
  * [bpo-38156](https://bugs.python.org/issue?@action=redirect&bpo=38156): Handle interrupts that come after EOF correctly in `PyOS_StdioReadline`.
  * [bpo-41342](https://bugs.python.org/issue?@action=redirect&bpo=41342): [`round()`](https://docs.python.org/3/library/functions.html#round "round") with integer argument is now faster (9–60%).
  * [bpo-41334](https://bugs.python.org/issue?@action=redirect&bpo=41334): Constructors [`str()`](https://docs.python.org/3/library/stdtypes.html#str "str"), [`bytes()`](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") and [`bytearray()`](https://docs.python.org/3/library/stdtypes.html#bytearray "bytearray") are now faster (around 30–40% for small objects).
  * [bpo-41295](https://bugs.python.org/issue?@action=redirect&bpo=41295): Resolve a regression in CPython 3.8.4 where defining “__setattr__” in a multi-inheritance setup and calling up the hierarchy chain could fail if builtins/extension types were involved in the base types.
  * [bpo-41323](https://bugs.python.org/issue?@action=redirect&bpo=41323): Bytecode optimizations are performed directly on the control flow graph. This will result in slightly more compact code objects in some circumstances.
  * [bpo-41247](https://bugs.python.org/issue?@action=redirect&bpo=41247): Always cache the running loop holder when running `asyncio.set_running_loop`.
  * [bpo-41252](https://bugs.python.org/issue?@action=redirect&bpo=41252): Fix incorrect refcounting in _ssl.c’s `_servername_callback()`.
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port [`multiprocessing`](https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing "multiprocessing: Process-based parallelism.") to multi-phase initialization
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port `winapi` to multiphase initialization
  * [bpo-41215](https://bugs.python.org/issue?@action=redirect&bpo=41215): Use non-NULL default values in the PEG parser keyword list to overcome a bug that was preventing Python from being properly compiled when using the XLC compiler. Patch by Pablo Galindo.
  * [bpo-41218](https://bugs.python.org/issue?@action=redirect&bpo=41218): Python 3.8.3 had a regression where compiling with ast.PyCF_ALLOW_TOP_LEVEL_AWAIT would aggressively mark list comprehension with CO_COROUTINE.