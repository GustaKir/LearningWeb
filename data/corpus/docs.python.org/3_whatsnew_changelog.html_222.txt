Title: Python 3.10 Changelog
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent changes in Python, including fixes to path configuration in `sys.path`, improved error handling for surrogate characters, a new `SyntaxError` for null bytes in source code, and a resolution for a crash related to `PyEval_GetFrame()`. Contributions from Victor Stinner and Pablo Galindo are noted.
---

n opcodes. Patch by Victor Stinner.
  * [gh-94526](https://github.com/python/cpython/issues/94526): Fix the Python path configuration used to initialized [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "sys.path") at Python startup. Paths are no longer encoded to UTF-8/strict to avoid encoding errors if it contains surrogate characters (bytes paths are decoded with the surrogateescape error handler). Patch by Victor Stinner.
  * [gh-96670](https://github.com/python/cpython/issues/96670): The parser now raises [`SyntaxError`](https://docs.python.org/3/library/exceptions.html#SyntaxError "SyntaxError") when parsing source code containing null bytes. Patch by Pablo Galindo
  * [gh-96975](https://github.com/python/cpython/issues/96975): Fix a crash occurring when [`PyEval_GetFrame()`](https://docs.python.org/3/c-api/reflection.html#c.PyEval_GetFrame "PyEval_GetFrame") is called while the topmost Python frame is in a partially-initialized state.
  * [gh-96848](https://github.com/python/cpython/issues/96848): Fix command line parsing: reject [`-X int_max_str_digits`](https://docs.python.org/3/using/cmdline.html#cmdoption-X) option with no value (invalid) when the [`PYTHONINTMAXSTRDIGITS`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONINTMAXSTRDIGITS) environment variable is set to a valid limit. Patch by Victor Stinner.
  * [gh-95921](https://github.com/python/cpython/issues/95921): Fix overly-broad source position information for chained comparisons used as branching conditions.
  * [gh-96821](https://github.com/python/cpython/issues/96821): Fix undefined behaviour in `audioop.c`.
  * [gh-96821](https://github.com/python/cpython/issues/96821): Fix undefined behaviour in `_testcapimodule.c`.
  * [gh-95778](https://github.com/python/cpython/issues/95778): When [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") is raised if an integer is larger than the limit, mention the [`sys.set_int_max_str_digits()`](https://docs.python.org/3/library/sys.html#sys.set_int_max_str_digits "sys.set_int_max_str_digits") function in the error message. Patch by Victor Stinner.
  * [gh-96387](https://github.com/python/cpython/issues/96387): At Python exit, sometimes a thread holding the GIL can wait forever for a thread (usually a daemon thread) which requested to drop the GIL, whereas the thread already exited. To fix the race condition, the thread which requested the GIL drop now resets its request before exiting. Issue discovered and analyzed by Mingliang ZHAO. Patch by Victor Stinner.
  * [gh-96864](https://github.com/python/cpython/issues/96864): Fix a possible assertion failure, fatal error, or [`SystemError`](https://docs.python.org/3/library/exceptions.html#SystemError "SystemError") if a line tracing event raises an exception while opcode tracing is enabled.
  * [gh-95778](https://github.com/python/cpython/issues/95778): The `PyLong_FromString` function was refactored to make it more maintainable and extensible.
  * [gh-96678](https://github.com/python/cpython/issues/96678): Fix undefined behaviour in C code of null pointer arithmetic.
  * [gh-96754](https://github.com/python/cpython/issues/96754): Make sure that all frame objects created are created from valid interpreter frames. Prevents the possibility of invalid frames in backtraces and signal handlers.
  * [gh-90997](https://github.com/python/cpython/issues/90997): Improve the performance of reading and writing inline bytecode caches on some platforms.
  * [gh-96751](https://github.com/python/cpython/issues/96751): Remove dead code from `CALL_FUNCTION_EX` opcode.
  * [gh-90751](https://github.com/python/cpython/issues/90751): [`memoryview`](https://docs.python.org/3/library/stdtypes.html#memoryview "memoryview") now supports half-floats. Patch by Donghee Na and Antoine Pitrou.
  * [gh-96678](https://github.com/python/cpython/issues/96678): Fix case of undefined behavior in ceval.c
  * [gh-64373](https://github.com/python/cpython/issues/64373): Convert `_functools` to argument clinic.
  * [gh-96641](https://github.com/python/cpython/issues/96641): Do not expose `KeyWrapper` in `_functools`.
  * [gh-96636](https://github.com/python/cpython/issues/96636): Ensure that tracing, `sys.setrace()`, is turned on immediately. In pre-release versions of 3.11, some tracing events might have been lost when turning on tracing in a `__del__` method or interrupt.
  * [gh-96572](https://github.com/python/cpython/issues/96572): Fix use after free in trace refs build mode.