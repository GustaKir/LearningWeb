Title: Python 3 Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document covers updates and bug fixes in Python 3, including enhancements to test methods, improvements in tarfile handling, performance enhancements in subprocess management on Solaris, and fixes related to IsolatedAsyncioTestCase.
---

Previously it was not called for test methods and classes decorated with a skipping decorator.
  * [bpo-39039](https://bugs.python.org/issue?@action=redirect&bpo=39039): tarfile.open raises [`ReadError`](https://docs.python.org/3/library/tarfile.html#tarfile.ReadError "tarfile.ReadError") when a zlib error occurs during file extraction.
  * [bpo-44935](https://bugs.python.org/issue?@action=redirect&bpo=44935): [`subprocess`](https://docs.python.org/3/library/subprocess.html#module-subprocess "subprocess: Subprocess management.") on Solaris now also uses [`os.posix_spawn()`](https://docs.python.org/3/library/os.html#os.posix_spawn "os.posix_spawn") for better performance.
  * [bpo-44911](https://bugs.python.org/issue?@action=redirect&bpo=44911): [`IsolatedAsyncioTestCase`](https://docs.python.org/3/library/unittest.html#unittest.IsolatedAsyncioTestCase "unittest.IsolatedAsyncioTestCase") will no longer throw an exception while cancelling leaked tasks. Patch by Bar Harel.
  * [bpo-41322](https://bugs.python.org/issue?@action=redirect&bpo=41322): Added `DeprecationWarning` for tests and async tests that return a value!=None (as this may indicate an improperly written test, for example a test written as a generator function).
  * [bpo-44524](https://bugs.python.org/issue?@action=redirect&bpo=44524): Make exception message more useful when subclass from typing special form alias. Patch provided by Yurii Karabas.
  * [bpo-38956](https://bugs.python.org/issue?@action=redirect&bpo=38956): [`argparse.BooleanOptionalAction`](https://docs.python.org/3/library/argparse.html#argparse.BooleanOptionalAction "argparse.BooleanOptionalAction")â€™s default value is no longer printed twice when used with [`argparse.ArgumentDefaultsHelpFormatter`](https://docs.python.org/3/library/argparse.html#argparse.ArgumentDefaultsHelpFormatter "argparse.ArgumentDefaultsHelpFormatter").
  * [bpo-44860](https://bugs.python.org/issue?@action=redirect&bpo=44860): Fix the `posix_user` scheme in [`sysconfig`](https://docs.python.org/3/library/sysconfig.html#module-sysconfig "sysconfig: Python's configuration information") to not depend on [`sys.platlibdir`](https://docs.python.org/3/library/sys.html#sys.platlibdir "sys.platlibdir").
  * [bpo-44859](https://bugs.python.org/issue?@action=redirect&bpo=44859): Improve error handling in [`sqlite3`](https://docs.python.org/3/library/sqlite3.html#module-sqlite3 "sqlite3: A DB-API 2.0 implementation using SQLite 3.x.") and raise more accurate exceptions.
    * [`MemoryError`](https://docs.python.org/3/library/exceptions.html#MemoryError "MemoryError") is now raised instead of [`sqlite3.Warning`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Warning "sqlite3.Warning") when memory is not enough for encoding a statement to UTF-8 in `Connection.__call__()` and `Cursor.execute()`.
    * `UnicodEncodeError` is now raised instead of [`sqlite3.Warning`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Warning "sqlite3.Warning") when the statement contains surrogate characters in `Connection.__call__()` and `Cursor.execute()`.
    * [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError") is now raised instead of [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") for non-string script argument in `Cursor.executescript()`.
    * [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") is now raised for script containing the null character instead of truncating it in `Cursor.executescript()`.
    * Correctly handle exceptions raised when getting boolean value of the result of the progress handler.
    * Add many tests covering different corner cases.
  * [bpo-44581](https://bugs.python.org/issue?@action=redirect&bpo=44581): Upgrade bundled pip to 21.2.3 and setuptools to 57.4.0
  * [bpo-44849](https://bugs.python.org/issue?@action=redirect&bpo=44849): Fix the [`os.set_inheritable()`](https://docs.python.org/3/library/os.html#os.set_inheritable "os.set_inheritable") function on FreeBSD 14 for file descriptor opened with the [`O_PATH`](https://docs.python.org/3/library/os.html#os.O_PATH "os.O_PATH") flag: ignore the [`EBADF`](https://docs.python.org/3/library/errno.html#errno.EBADF "errno.EBADF") error on `ioctl()`, fallback on the `fcntl()` implementation.