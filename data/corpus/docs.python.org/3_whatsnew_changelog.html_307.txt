Title: Build Improvements in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: The build process has been enhanced with several updates, including CI verification for autoconf files, the introduction of a _bootstrap_python interpreter to streamline builds, new options for the configure script to facilitate cross compiling, and default use of the .wasm suffix for the Emscripten platform.
---

### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id265 "Link to this heading")
  * [bpo-44035](https://bugs.python.org/issue?@action=redirect&bpo=44035): CI now verifies that autoconf files have been regenerated with a current and unpatched autoconf package.
  * [bpo-45950](https://bugs.python.org/issue?@action=redirect&bpo=45950): The build system now uses a **_bootstrap_python** interpreter for freezing and deepfreezing again. To speed up build process the build tools **_bootstrap_python** and **_freeze_module** are no longer build with LTO.
  * [bpo-45881](https://bugs.python.org/issue?@action=redirect&bpo=45881): The **configure** script now accepts `--with-build-python` and `--with-freeze-module` options to make cross compiling easier.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): Emscripten platform now uses `.wasm` suffix by default.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): Disable unusable core extension modules on WASM/Emscripten targets.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): `configure` now checks for socket `shutdown` function. The check makes it possible to disable `SYS_shutdown` with `ac_cv_func_shutdown=no` in CONFIG_SITE.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): `configure` now checks for functions `fork1, getegid, geteuid, getgid, getppid, getuid, opendir, pipe, system, wait, ttyname`.
  * [bpo-33393](https://bugs.python.org/issue?@action=redirect&bpo=33393): Update `config.guess` to 2021-06-03 and `config.sub` to 2021-08-14. `Makefile` now has an `update-config` target to make updating more convenient.
  * [bpo-45866](https://bugs.python.org/issue?@action=redirect&bpo=45866): `make regen-all` now produces the same output when run from a directory other than the source tree: when building Python out of the source tree. pegen now strips directory of the “generated by pygen from <FILENAME>” header Patch by Victor Stinner.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): `configure` now accepts machine `wasm32` or `wasm64` and OS `wasi` or `emscripten` for cross building, e.g. `wasm32-unknown-emscripten`, `wasm32-wasi`, or `wasm32-unknown-wasi`.
  * [bpo-41498](https://bugs.python.org/issue?@action=redirect&bpo=41498): Python now compiles on platforms without `sigset_t`. Several functions in [`signal`](https://docs.python.org/3/library/signal.html#module-signal "signal: Set handlers for asynchronous events.") are not available when `sigset_t` is missing.
Based on patch by Roman Yurchak for pyodide.
  * [bpo-45881](https://bugs.python.org/issue?@action=redirect&bpo=45881): `setup.py` now uses `CC` from environment first to discover multiarch and cross compile paths.
  * [bpo-45886](https://bugs.python.org/issue?@action=redirect&bpo=45886): The `_freeze_module` program path can now be overridden on the command line, e.g. `make FREEZE_MODULE=../x86_64/Program/_freeze_module`.
  * [bpo-45873](https://bugs.python.org/issue?@action=redirect&bpo=45873): Get rid of the `_bootstrap_python` build step. The deepfreeze.py script is now run using `$(PYTHON_FOR_REGEN)` which can be Python 3.7 or newer (on Windows, 3.8 or newer).
  * [bpo-45847](https://bugs.python.org/issue?@action=redirect&bpo=45847): Port builtin hashlib extensions to `PY_STDLIB_MOD` macro and `addext()`.
  * [bpo-45723](https://bugs.python.org/issue?@action=redirect&bpo=45723): Add `autoconf` helpers for saving and restoring environment variables:
    * `SAVE_ENV`: Save `$CFLAGS`, `$LDFLAGS`, `$LIBS`, and `$CPPFLAGS`.
    * `RESTORE_ENV`: Restore `$CFLAGS`, `$LDFLAGS`, `$LIBS`, and `$CPPFLAGS`.
    * `WITH_SAVE_ENV([SCRIPT])`: Run `SCRIPT` wrapped with `SAVE_ENV` and `RESTORE_ENV`.
Patch by Erlend E. Aasland.
  * [bpo-45573](https://bugs.python.org/issue?@action=redirect&bpo=45573): Mandatory core modules, that are required to bootstrap Python, are now in `Modules/Setup.bootstrap`.
  * [bpo-45573](https://bugs.python.org/issue?@action=redirect&bpo=45573): `configure` now creates `Modules/Setup.stdlib` with conditionally enabled/disabled extension module lines. The file is not used, yet.
  * [bpo-45573](https://bugs.python.org/issue?@action=redirect&bpo=45573): `configure` now uses a unified format to set state, compiler flags, and linker flags in Makefile. The new macro `PY_STDLIB_MOD` sets three variables that are consumed by `Modules/Setup` and `setup.py`.
  * [bpo-45816](https://bugs.python.org/issue?@action=redirect&bpo=45816): Python now supports building with Visual Studio 2022 (MSVC v143, VS Version 17.0). Patch by Jeremiah Vivian.
  * [bpo-45800](https://bugs.python.org/issue?@action=redirect&bpo=45800): Settings for `pyexpat` C extension are now detected by `configure`. The bundled `expat` library is built in `Makefile`.
  * [bpo-45798](https://bugs.python.org/issue?@action=redirect&bpo=45798): Settings for [`decimal`](https://docs.python.org/3/library/deci