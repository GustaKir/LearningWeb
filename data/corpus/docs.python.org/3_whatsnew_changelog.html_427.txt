Title: Python 3 Changelog - Key Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines important updates including the immutability of `Path` objects, the addition of `|` and `|=` operators to `collections.ChainMap`, removal of normalization for line endings in ElementTree attributes, and improved handling of `sys.audit()` failures in `sys.set_asyncgen_hooks()`.
---

The context manager magic methods remain, but they are now a no-op, making `Path` objects immutable.
  * [bpo-36144](https://bugs.python.org/issue?@action=redirect&bpo=36144): Added [**PEP 584**](https://peps.python.org/pep-0584/) operators (`|` and `|=`) to [`collections.ChainMap`](https://docs.python.org/3/library/collections.html#collections.ChainMap "collections.ChainMap").
  * [bpo-39011](https://bugs.python.org/issue?@action=redirect&bpo=39011): Normalization of line endings in ElementTree attributes was removed, as line endings which were replaced by entity numbers should be preserved in original form.
  * [bpo-38410](https://bugs.python.org/issue?@action=redirect&bpo=38410): Properly handle [`sys.audit()`](https://docs.python.org/3/library/sys.html#sys.audit "sys.audit") failures in [`sys.set_asyncgen_hooks()`](https://docs.python.org/3/library/sys.html#sys.set_asyncgen_hooks "sys.set_asyncgen_hooks").
  * [bpo-36541](https://bugs.python.org/issue?@action=redirect&bpo=36541): lib2to3 now recognizes named assignment expressions (the walrus operator, `:=`)
  * [bpo-35967](https://bugs.python.org/issue?@action=redirect&bpo=35967): In platform, delay the invocation of ‘uname -p’ until the processor attribute is requested.
  * [bpo-35113](https://bugs.python.org/issue?@action=redirect&bpo=35113): [`inspect.getsource()`](https://docs.python.org/3/library/inspect.html#inspect.getsource "inspect.getsource") now returns correct source code for inner class with same name as module level class. Decorators are also returned as part of source of the class. Patch by Karthikeyan Singaravelan.
  * [bpo-33262](https://bugs.python.org/issue?@action=redirect&bpo=33262): Deprecate passing None as an argument for [`shlex.split()`](https://docs.python.org/3/library/shlex.html#shlex.split "shlex.split")’s `s` parameter. Patch by Zackery Spytz.
  * [bpo-31758](https://bugs.python.org/issue?@action=redirect&bpo=31758): Prevent crashes when using an uninitialized `_elementtree.XMLParser` object. Patch by Oren Milman.


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id380 "Link to this heading")
  * [bpo-27635](https://bugs.python.org/issue?@action=redirect&bpo=27635): The pickle documentation incorrectly claimed that `__new__` isn’t called by default when unpickling.
  * [bpo-39879](https://bugs.python.org/issue?@action=redirect&bpo=39879): Updated [Data model](https://docs.python.org/3/reference/datamodel.html#datamodel) docs to include [`dict()`](https://docs.python.org/3/library/stdtypes.html#dict "dict") insertion order preservation. Patch by Furkan Onder and Samy Lahfa.
  * [bpo-38387](https://bugs.python.org/issue?@action=redirect&bpo=38387): Document [`PyDoc_STRVAR`](https://docs.python.org/3/c-api/intro.html#c.PyDoc_STRVAR "PyDoc_STRVAR") macro in the C-API reference.
  * [bpo-13743](https://bugs.python.org/issue?@action=redirect&bpo=13743): Some methods within xml.dom.minidom.Element class are now better documented.


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id381 "Link to this heading")
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): Set expected default encoding in test_c_locale_coercion.py for VxWorks RTOS.
  * [bpo-40162](https://bugs.python.org/issue?@action=redirect&bpo=40162): Update Travis CI configuration to OpenSSL 1.1.1f.
  * [bpo-40146](https://bugs.python.org/issue?@action=redirect&bpo=40146): Update OpenSSL to 1.1.1f in Azure Pipelines.
  * [bpo-40094](https://bugs.python.org/issue?@action=redirect&bpo=40094): Add [`test.support.wait_process()`](https://docs.python.org/3/library/test.html#test.support.wait_process "test.support.wait_process") function.
  * [bpo-40003](https://bugs.python.org/issue?@action=redirect&bpo=40003): `test.bisect_cmd` now copies Python command line options like `-O` or `-W`. Moreover, emit a warning if `test.bisect_cmd` is used with `-w`/`--verbose2` option.
  * [bpo-39380](https://bugs.python.org/issue?@action=redirect&bpo=39380): Add the encoding in [`ftplib.FTP`](https://docs.python.org/3/library/ftplib.html#ftplib.FTP "ftplib.FTP") and [`ftplib.FTP_TLS`](https://docs.python.org/3/library/ftplib.html#ftplib.FTP_TLS "ftplib.FTP_TLS") to the constructor as keyword-only and change the default from `latin-1` to `utf-8` to follow [**RFC 2640**](https://datatracker.ietf.org/doc/html/rfc2640.html).
  * [bpo-39793](https://bugs.python.org/issue?@action=redirect&bpo=39793): Use the same domain when testing `make_msgid`. Patch by Batuhan Taskaya.
  * [bpo-1812](https://bugs.python.org/issue?@action=redirect&bpo=1812): Fix newline handling in doctest.testfile when loading from a package whose loader has a get_data method. Patch by Peter Donis.