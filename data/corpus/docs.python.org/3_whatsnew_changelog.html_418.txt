Title: Library Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent updates to the Python library, including bug fixes and enhancements like improved functionality for `ast.get_source_segment()`, the use of Argument Clinic in the `bisect` module, and the addition of the `available_timezones()` function in the `zoneinfo` module.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id369 "Link to this heading")
  * [bpo-40662](https://bugs.python.org/issue?@action=redirect&bpo=40662): Fixed [`ast.get_source_segment()`](https://docs.python.org/3/library/ast.html#ast.get_source_segment "ast.get_source_segment") for ast nodes that have incomplete location information. Patch by Irit Katriel.
  * [bpo-40665](https://bugs.python.org/issue?@action=redirect&bpo=40665): Convert [`bisect`](https://docs.python.org/3/library/bisect.html#module-bisect "bisect: Array bisection algorithms for binary searching.") to use Argument Clinic.
  * [bpo-40536](https://bugs.python.org/issue?@action=redirect&bpo=40536): Added the [`available_timezones()`](https://docs.python.org/3/library/zoneinfo.html#zoneinfo.available_timezones "zoneinfo.available_timezones") function to the [`zoneinfo`](https://docs.python.org/3/library/zoneinfo.html#module-zoneinfo "zoneinfo: IANA time zone support") module. Patch by Paul Ganssle.
  * [bpo-40645](https://bugs.python.org/issue?@action=redirect&bpo=40645): The `hmac.HMAC` exposes internal implementation details. The attributes `digest_cons`, `inner`, and `outer` are deprecated and will be removed in the future.
  * [bpo-40645](https://bugs.python.org/issue?@action=redirect&bpo=40645): The internal module `_hashlib` wraps and exposes OpenSSL’s HMAC API. The new code will be used in Python 3.10 after the internal implementation details of the pure Python HMAC module are no longer part of the public API.
  * [bpo-40637](https://bugs.python.org/issue?@action=redirect&bpo=40637): Builtin hash modules can now be disabled or selectively enabled with `configure --with-builtin-hashlib-hashes=sha3,blake1` or `--without-builtin-hashlib-hashes`.
  * [bpo-37630](https://bugs.python.org/issue?@action=redirect&bpo=37630): The [`hashlib`](https://docs.python.org/3/library/hashlib.html#module-hashlib "hashlib: Secure hash and message digest algorithms.") module can now use SHA3 hashes and SHAKE XOF from OpenSSL when available.
  * [bpo-40479](https://bugs.python.org/issue?@action=redirect&bpo=40479): The [`hashlib`](https://docs.python.org/3/library/hashlib.html#module-hashlib "hashlib: Secure hash and message digest algorithms.") now compiles with OpenSSL 3.0.0-alpha2.
  * [bpo-40257](https://bugs.python.org/issue?@action=redirect&bpo=40257): Revert changes to [`inspect.getdoc()`](https://docs.python.org/3/library/inspect.html#inspect.getdoc "inspect.getdoc").
  * [bpo-40607](https://bugs.python.org/issue?@action=redirect&bpo=40607): When cancelling a task due to timeout, [`asyncio.wait_for()`](https://docs.python.org/3/library/asyncio-task.html#asyncio.wait_for "asyncio.wait_for") will now propagate the exception if an error happens during cancellation. Patch by Roman Skurikhin.
  * [bpo-40612](https://bugs.python.org/issue?@action=redirect&bpo=40612): Fix edge cases in SyntaxError formatting. If the offset is <= 0, no caret is printed. If the offset is > line length, the caret is printed pointing just after the last character.
  * [bpo-40597](https://bugs.python.org/issue?@action=redirect&bpo=40597): If text content lines are longer than policy.max_line_length, always use a content-encoding to make sure they are wrapped.
  * [bpo-40571](https://bugs.python.org/issue?@action=redirect&bpo=40571): Added functools.cache() as a simpler, more discoverable way to access the unbounded cache variant of lru_cache(maxsize=None).
  * [bpo-40503](https://bugs.python.org/issue?@action=redirect&bpo=40503): [**PEP 615**](https://peps.python.org/pep-0615/), the [`zoneinfo`](https://docs.python.org/3/library/zoneinfo.html#module-zoneinfo "zoneinfo: IANA time zone support") module. Adds support for the IANA time zone database.
  * [bpo-40397](https://bugs.python.org/issue?@action=redirect&bpo=40397): Removed attributes `__args__` and `__parameters__` from special generic aliases like `typing.List` (not subscripted).
  * [bpo-40549](https://bugs.python.org/issue?@action=redirect&bpo=40549): Convert posixmodule.c (“posix” or “nt” module) to the multiphase initialization (PEP 489).
  * [bpo-31033](https://bugs.python.org/issue?@action=redirect&bpo=31033): Add a `msg` argument to `Future.cancel()` and `Task.cancel()`.
  * [bpo-40541](https://bugs.python.org/issue?@action=redirect&bpo=40541): Added an optional _counts_ parameter to random.sample().
  * [bpo-40515](https://bugs.python.org/issue?@action=redirect&bpo=40515): The [`ssl`](https://docs.python.org/3/library/ssl.html#module-ssl "ssl: TLS/SSL wrapper for socket objects") and [`hashlib`](https://docs.python.org/3/library/hashlib.html#module-hashlib "hashlib: Secure hash and message digest algorithms.") modules now actively check that OpenSSL is build with thread support. Python 3.7.0 made thread support mandatory and no longer works safely with a no-thread builds.
  * [bpo-31033](https://bugs.python.org/issue?@action=redirect&bpo=31033): When a [`asyncio.Task`](https://docs.python.org/3/l