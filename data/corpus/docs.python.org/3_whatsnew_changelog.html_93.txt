Title: Test Suite Enhancements
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details several improvements to the Python test suite, including support for Android, enhancements to leak tests, and adding options to aid in identifying failing tests.
---

### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id93 "Link to this heading")
  * [gh-71052](https://github.com/python/cpython/issues/71052): Add test exclusions to support running the test suite on Android.
  * [gh-71052](https://github.com/python/cpython/issues/71052): Enable `test_concurrent_futures` on platforms that support threading but not multiprocessing.
  * [gh-115796](https://github.com/python/cpython/issues/115796): Make ‘_testinternalcapi.assemble_code_object’ construct the exception table for the code object.
  * [gh-115720](https://github.com/python/cpython/issues/115720): Leak tests (`-R`, `--huntrleaks`) now show a summary of the number of leaks found in each iteration.
  * [gh-115122](https://github.com/python/cpython/issues/115122): Add `--bisect` option to regrtest test runner: run failed tests with `test.bisect_cmd` to identify failing tests. Patch by Victor Stinner.
  * [gh-115596](https://github.com/python/cpython/issues/115596): Fix `ProgramPriorityTests` in `test_os` permanently changing the process priority.
  * [gh-115556](https://github.com/python/cpython/issues/115556): On Windows, commas passed in arguments to `Tools\buildbot\test.bat` and `PCbuild\\rt.bat` are now properly handled.
  * [gh-115420](https://github.com/python/cpython/issues/115420): Fix translation of exception handler targets by `_testinternalcapi.optimize_cfg`.
  * [gh-115376](https://github.com/python/cpython/issues/115376): Fix segfault in `_testinternalcapi.compiler_codegen` on bad input.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id94 "Link to this heading")
  * [gh-116313](https://github.com/python/cpython/issues/116313): Get WASI builds to work under wasmtime 18 w/ WASI 0.2/preview2 primitives.
  * [gh-71052](https://github.com/python/cpython/issues/71052): Change Android’s [`sys.platform`](https://docs.python.org/3/library/sys.html#sys.platform "sys.platform") from `"linux"` to `"android"`.
  * [gh-116117](https://github.com/python/cpython/issues/116117): Backport `libb2`’s PR #42 to fix compiling CPython on 32-bit Windows with `clang-cl`.
  * [gh-71052](https://github.com/python/cpython/issues/71052): Fix several Android build issues
  * [gh-114099](https://github.com/python/cpython/issues/114099): A testbed project was added to run the test suite on iOS.
  * [gh-115350](https://github.com/python/cpython/issues/115350): Fix building ctypes module with -DWIN32_LEAN_AND_MEAN defined
  * [gh-111225](https://github.com/python/cpython/issues/111225): Link extension modules against libpython on Android.
  * [gh-115737](https://github.com/python/cpython/issues/115737): The install name for libPython is now correctly set for non-framework macOS builds.
  * [gh-114099](https://github.com/python/cpython/issues/114099): Makefile targets were added to support compiling an iOS-compatible framework build.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id95 "Link to this heading")
  * [gh-116012](https://github.com/python/cpython/issues/116012): Ensure the value of `GetLastError()` is preserved across GIL operations.
  * [gh-115582](https://github.com/python/cpython/issues/115582): Building extensions intended for free-threaded builds of CPython now require compiling with `/DPy_GIL_DISABLED` manually when using a regular install. This is expected to change in future releases.
  * [gh-115554](https://github.com/python/cpython/issues/115554): The installer now has more strict rules about updating the [Python Launcher for Windows](https://docs.python.org/3/using/windows.html#launcher). In general, most users only have a single launcher installed and will see no difference. When multiple launchers have been installed, the option to install the launcher is disabled until all but one have been removed. Downgrading the launcher (which was never allowed) is now more obviously blocked.
  * [gh-115543](https://github.com/python/cpython/issues/115543): [Python Launcher for Windows](https://docs.python.org/3/using/windows.html#launcher) can now detect Python 3.13 when installed from the Microsoft Store, and will install Python 3.12 by default when `PYLAUNCHER_ALLOW_INSTALL` is set.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id96 "Link to this heading")
  * [gh-116145](https://github.com/python/cpython/issues/116145): Update macOS installer to Tcl/Tk 8.6.14.


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id97 "Link to this heading")
  * [gh-88516](https://github.com/python/cpython/issues/88516): On macOS show a proxy icon in the title bar of editor windows to match platform behaviour.


### Tools/Demos[¶](https://docs.python.org/3/whatsnew/changelog.html#id98 "Link to this heading")
  * [gh-100176](https://github.com/python/cpython/issues/100176): Remove outdated Tools/{io,cc,string}bench
  * [bpo-45101](https://bugs.python.org/issue?@action=redirect&bpo=45101): Add consistency in usage message IO between 2 versions of python-config.