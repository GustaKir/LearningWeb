Title: PyCodeObject and PyCode Creation
URL: https://docs.python.org/3/c-api/code.html
Summary: This section describes the PyCodeObject structure and the function PyUnstable_Code_New, which is used to create new code objects in the Python C API. It outlines the parameters required for initializing a code object, including argument counts, local variables, and various code-related attributes.
---

[PyCodeObject](https://docs.python.org/3/c-api/code.html#c.PyCodeObject "PyCodeObject")*PyUnstable_Code_New(intargcount, intkwonlyargcount, intnlocals, intstacksize, intflags, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*code, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*consts, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*names, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*varnames, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*freevars, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*cellvars, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*filename, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*name, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*qualname, intfirstlineno, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*linetable, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*exceptiontable)[¶](https://docs.python.org/3/c-api/code.html#c.PyUnstable_Code_New "Link to this definition")
    
_This is[ Unstable API](https://docs.python.org/3/c-api/stable.html#unstable-c-api). It may change without warning in minor releases._
Return a new code object. If you need a dummy code object to create a frame, use [`PyCode_NewEmpty()`](https://docs.python.org/3/c-api/code.html#c.PyCode_NewEmpty "PyCode_NewEmpty") instead.
Since the definition of the bytecode changes often, calling [`PyUnstable_Code_New()`](https://docs.python.org/3/c-api/code.html#c.PyUnstable_Code_New "PyUnstable_Code_New") directly can bind you to a precise Python version.
The many arguments of this function are inter-dependent in complex ways, meaning that subtle changes to values are likely to result in incorrect execution or VM crashes. Use this function only with extreme care.
Changed in version 3.11: Added `qualname` and `exceptiontable` parameters.
Changed in version 3.12: Renamed from `PyCode_New` as part of [Unstable C API](https://docs.python.org/3/c-api/stable.html#unstable-c-api). The old name is deprecated, but will remain available until the signature changes again. 

[PyCodeObject](https://docs.python.org/3/c-api/code.html#c.PyCodeObject "PyCodeObject")*PyUnstable_Code_NewWithPosOnlyArgs(intargcount, intposonlyargcount, intkwonlyargcount, intnlocals, intstacksize, intflags, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*code, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*consts, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*names, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*varnames, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*freevars, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*cellvars, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*filename, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*name, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*qualname, intfirstlineno, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*linetable, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*exceptiontable)[¶](https://docs.python.org/3/c-api/code.html#c.PyUnstable_Code_NewWithPosOnlyArgs "Link to this definition")
    
_This is[ Unstable API](https://docs.python.org/3/c-api/stable.html#unstable-c-api). It may change without warning in minor releases._
Similar to [`PyUnstable_Code_New()`](https://docs.python.org/3/c-api/code.html#c.PyUnstable_Code_New "PyUnstable_Code_New"), but with an extra “posonlyargcount” for positional-only arguments. The same caveats that apply to `PyUnstable_Code_New` also apply to this function.
Added in version 3.8: as `PyCode_NewWithPosOnlyArgs`
Changed in version 3.11: Added `qualname` and `exceptiontable` parameters.
Changed in version 3.12: Renamed to `PyUnstable_Code_NewWithPosOnlyArgs`. The old name is deprecated, but will remain available until the signature changes again. 

[PyCodeObject](https://docs.python.org/3/c-api/code.html#c.PyCodeObject "PyCodeObject")*PyCode_NewEmpty(constchar*filename, constchar*funcname, intfirstlineno)[¶](https://docs.python.org/3/c-api/code.html#c.PyCode_NewEmpty "Link to this definition")
    _Return value: New reference._
Return a new empty code object with the specified filename, function name, and first line number. The resulting code object will raise an `Exception` if executed.