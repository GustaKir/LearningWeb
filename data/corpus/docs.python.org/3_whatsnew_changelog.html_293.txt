Title: Python 3 Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document outlines patch updates including a fix for 'ParamSpec' substitution in 'Concatenate', ensuring that different parameter expressions yield the correct type formats, as well as improvements to the 'escape4chm.py' script used for CHM documentation generation. Additionally, notable updates on testing, including limitations on using mocks as specs, are mentioned.
---

Patch by Felix Fontein.
  * [bpo-44791](https://bugs.python.org/issue?@action=redirect&bpo=44791): Fix substitution of [`ParamSpec`](https://docs.python.org/3/library/typing.html#typing.ParamSpec "typing.ParamSpec") in [`Concatenate`](https://docs.python.org/3/library/typing.html#typing.Concatenate "typing.Concatenate") with different parameter expressions. Substitution with a list of types returns now a tuple of types. Substitution with `Concatenate` returns now a `Concatenate` with concatenated lists of arguments.


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id246 "Link to this heading")
  * [bpo-46463](https://bugs.python.org/issue?@action=redirect&bpo=46463): Fixes `escape4chm.py` script used when building the CHM documentation file


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id247 "Link to this heading")
  * [bpo-43478](https://bugs.python.org/issue?@action=redirect&bpo=43478): Mocks can no longer be provided as the specs for other Mocks. As a result, an already-mocked object cannot be passed to `mock.Mock()`. This can uncover bugs in tests since these Mock-derived Mocks will always pass certain tests (e.g. isinstance) and builtin assert functions (e.g. assert_called_once_with) will unconditionally pass.
  * [bpo-46616](https://bugs.python.org/issue?@action=redirect&bpo=46616): Ensures `test_importlib.test_windows` cleans up registry keys after completion.
  * [bpo-44359](https://bugs.python.org/issue?@action=redirect&bpo=44359): test_ftplib now silently ignores socket errors to prevent logging unhandled threading exceptions. Patch by Victor Stinner.
  * [bpo-46600](https://bugs.python.org/issue?@action=redirect&bpo=46600): Fix test_gdb.test_pycfunction() for Python built with `clang -Og`. Tolerate inlined functions in the gdb traceback. Patch by Victor Stinner.
  * [bpo-46542](https://bugs.python.org/issue?@action=redirect&bpo=46542): Fix a Python crash in test_lib2to3 when using Python built in debug mode: limit the recursion limit. Patch by Victor Stinner.
  * [bpo-46576](https://bugs.python.org/issue?@action=redirect&bpo=46576): test_peg_generator now disables compiler optimization when testing compilation of its own C extensions to significantly speed up the testing on non-debug builds of CPython.
  * [bpo-46542](https://bugs.python.org/issue?@action=redirect&bpo=46542): Fix `test_json` tests checking for [`RecursionError`](https://docs.python.org/3/library/exceptions.html#RecursionError "RecursionError"): modify these tests to use `support.infinite_recursion()`. Patch by Victor Stinner.
  * [bpo-13886](https://bugs.python.org/issue?@action=redirect&bpo=13886): Skip test_builtin PTY tests on non-ASCII characters if the readline module is loaded. The readline module changes input() behavior, but test_builtin is not intended to test the readline module. Patch by Victor Stinner.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): Add `test.support.requires_fork()` decorators to mark tests that require a working [`os.fork()`](https://docs.python.org/3/library/os.html#os.fork "os.fork").
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): Add `test.support.requires_subprocess()` decorator to mark tests which require working [`subprocess`](https://docs.python.org/3/library/subprocess.html#module-subprocess "subprocess: Subprocess management.") module or `os.spawn*`. The wasm32-emscripten platform has no support for processes.
  * [bpo-46126](https://bugs.python.org/issue?@action=redirect&bpo=46126): Disable ‘descriptions’ when running tests internally.