Title: Python 3 Changes and Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document outlines various updates in Python 3, including fixes to `asyncio.StreamWriter.drain()` behavior on Windows, the addition of a mutex to `unittest.mock.NonCallableMock`, subscripting support for the `array.array` class, and improvements to `TypeError` messages.
---

[conditional expression](https://docs.python.org/3/library/re.html#re-conditional-expression) without the “else” branch.
  * [gh-98703](https://github.com/python/cpython/issues/98703): Fix [`asyncio.StreamWriter.drain()`](https://docs.python.org/3/library/asyncio-stream.html#asyncio.StreamWriter.drain "asyncio.StreamWriter.drain") to call `protocol.connection_lost` callback only once on Windows.
  * [gh-98624](https://github.com/python/cpython/issues/98624): Add a mutex to unittest.mock.NonCallableMock to protect concurrent access to mock attributes.
  * [gh-98658](https://github.com/python/cpython/issues/98658): The [`array.array`](https://docs.python.org/3/library/array.html#array.array "array.array") class now supports subscripting, making it a [generic type](https://docs.python.org/3/glossary.html#term-generic-type).
  * [gh-98284](https://github.com/python/cpython/issues/98284): Improved [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError") message for undefined abstract methods of a [`abc.ABC`](https://docs.python.org/3/library/abc.html#abc.ABC "abc.ABC") instance. The names of the missing methods are surrounded by single-quotes to highlight them.
  * [gh-96151](https://github.com/python/cpython/issues/96151): Allow `BUILTINS` to be a valid field name for frozen dataclasses.
  * [gh-98086](https://github.com/python/cpython/issues/98086): Make sure `patch.dict()` can be applied on async functions.
  * [gh-72719](https://github.com/python/cpython/issues/72719): Remove modules `asyncore` and `asynchat`, which were deprecated by [**PEP 594**](https://peps.python.org/pep-0594/).
  * [gh-96192](https://github.com/python/cpython/issues/96192): Fix handling of `bytes` [path-like objects](https://docs.python.org/3/glossary.html#term-path-like-object) in `os.ismount()`.
  * [gh-94172](https://github.com/python/cpython/issues/94172): [`ftplib`](https://docs.python.org/3/library/ftplib.html#module-ftplib "ftplib: FTP protocol client \(requires sockets\)."): Remove the `FTP_TLS.ssl_version` class attribute: use the _context_ parameter instead. Patch by Victor Stinner
  * [gh-94172](https://github.com/python/cpython/issues/94172): Remove the _keyfile_ and _certfile_ parameters from the [`ftplib`](https://docs.python.org/3/library/ftplib.html#module-ftplib "ftplib: FTP protocol client \(requires sockets\)."), [`imaplib`](https://docs.python.org/3/library/imaplib.html#module-imaplib "imaplib: IMAP4 protocol client \(requires sockets\)."), [`poplib`](https://docs.python.org/3/library/poplib.html#module-poplib "poplib: POP3 protocol client \(requires sockets\).") and [`smtplib`](https://docs.python.org/3/library/smtplib.html#module-smtplib "smtplib: SMTP protocol client \(requires sockets\).") modules, and the _key_file_ , _cert_file_ and _check_hostname_ parameters from the [`http.client`](https://docs.python.org/3/library/http.client.html#module-http.client "http.client: HTTP and HTTPS protocol client \(requires sockets\).") module, all deprecated since Python 3.6. Use the _context_ parameter (_ssl_context_ in [`imaplib`](https://docs.python.org/3/library/imaplib.html#module-imaplib "imaplib: IMAP4 protocol client \(requires sockets\).")) instead. Patch by Victor Stinner.
  * [gh-83638](https://github.com/python/cpython/issues/83638): Add the [`autocommit`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.autocommit "sqlite3.Connection.autocommit") attribute to [`sqlite3.Connection`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection "sqlite3.Connection") and the _autocommit_ parameter to [`sqlite3.connect()`](https://docs.python.org/3/library/sqlite3.html#sqlite3.connect "sqlite3.connect") to control [**PEP 249**](https://peps.python.org/pep-0249/)-compliant [transaction handling](https://docs.python.org/3/library/sqlite3.html#sqlite3-transaction-control-autocommit). Patch by Erlend E.