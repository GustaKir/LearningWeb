Title: Python 3.8 API Changes
URL: https://docs.python.org/3/whatsnew/3.8.html
Summary: Python 3.8 introduces changes to the API including the `os.getcwdb()` function using UTF-8 encoding on Windows instead of ANSI, and improvements to `subprocess.Popen` which can utilize `os.posix_spawn()` for enhanced performance in certain environments.
---

### Changes in the Python API[¶](https://docs.python.org/3/whatsnew/3.8.html#changes-in-the-python-api "Link to this heading")
  * The [`os.getcwdb()`](https://docs.python.org/3/library/os.html#os.getcwdb "os.getcwdb") function now uses the UTF-8 encoding on Windows, rather than the ANSI code page: see [**PEP 529**](https://peps.python.org/pep-0529/) for the rationale. The function is no longer deprecated on Windows. (Contributed by Victor Stinner in [bpo-37412](https://bugs.python.org/issue?@action=redirect&bpo=37412).)
  * [`subprocess.Popen`](https://docs.python.org/3/library/subprocess.html#subprocess.Popen "subprocess.Popen") can now use [`os.posix_spawn()`](https://docs.python.org/3/library/os.html#os.posix_spawn "os.posix_spawn") in some cases for better performance. On Windows Subsystem for Linux and QEMU User Emulation, the `Popen` constructor using [`os.posix_spawn()`](https://docs.python.org/3/library/os.html#os.posix_spawn "os.posix_spawn") no longer raises an exception on errors like “missing program”. Instead the child process fails with a non-zero `returncode`. (Contributed by Joannah Nanjekye and Victor Stinner in [bpo-35537](https://bugs.python.org/issue?@action=redirect&bpo=35537).)
  * The _preexec_fn_ argument of * [`subprocess.Popen`](https://docs.python.org/3/library/subprocess.html#subprocess.Popen "subprocess.Popen") is no longer compatible with subinterpreters. The use of the parameter in a subinterpreter now raises [`RuntimeError`](https://docs.python.org/3/library/exceptions.html#RuntimeError "RuntimeError"). (Contributed by Eric Snow in [bpo-34651](https://bugs.python.org/issue?@action=redirect&bpo=34651), modified by Christian Heimes in [bpo-37951](https://bugs.python.org/issue?@action=redirect&bpo=37951).)
  * The `imap.IMAP4.logout()` method no longer silently ignores arbitrary exceptions. (Contributed by Victor Stinner in [bpo-36348](https://bugs.python.org/issue?@action=redirect&bpo=36348).)
  * The function `platform.popen()` has been removed, after having been deprecated since Python 3.3: use [`os.popen()`](https://docs.python.org/3/library/os.html#os.popen "os.popen") instead. (Contributed by Victor Stinner in [bpo-35345](https://bugs.python.org/issue?@action=redirect&bpo=35345).)
  * The [`statistics.mode()`](https://docs.python.org/3/library/statistics.html#statistics.mode "statistics.mode") function no longer raises an exception when given multimodal data. Instead, it returns the first mode encountered in the input data. (Contributed by Raymond Hettinger in [bpo-35892](https://bugs.python.org/issue?@action=redirect&bpo=35892).)
  * The [`selection()`](https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Treeview.selection "tkinter.ttk.Treeview.selection") method of the [`tkinter.ttk.Treeview`](https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Treeview "tkinter.ttk.Treeview") class no longer takes arguments. Using it with arguments for changing the selection was deprecated in Python 3.6. Use specialized methods like [`selection_set()`](https://docs.python.org/3/library/tkinter.ttk.html#tkinter.ttk.Treeview.selection_set "tkinter.ttk.Treeview.selection_set") for changing the selection. (Contributed by Serhiy Storchaka in [bpo-31508](https://bugs.python.org/issue?@action=redirect&bpo=31508).)
  * The `writexml()`, `toxml()` and `toprettyxml()` methods of [`xml.dom.minidom`](https://docs.python.org/3/library/xml.dom.minidom.html#module-xml.dom.minidom "xml.dom.minidom: Minimal Document Object Model \(DOM\) implementation."), and the `write()` method of `xml.etree`, now preserve the attribute order specified by the user. (Contributed by Diego Rojas and Raymond Hettinger in [bpo-34160](https://bugs.python.org/issue?@action=redirect&bpo=34160).)
  * A [`dbm.dumb`](https://docs.python.org/3/library/dbm.html#module-dbm.dumb "dbm.dumb: Portable implementation of the simple DBM interface.") database opened with flags `'r'` is now read-only. [`dbm.dumb.open()`](https://docs.python.org/3/library/dbm.html#dbm.dumb.open "dbm.dumb.open") with flags `'r'` and `'w'` no longer creates a database if it does not exist. (Contributed by Serhiy Storchaka in [bpo-32749](https://bugs.python.org/issue?@action=redirect&bpo=32749).)
  * The `doctype()` method defined in a subclass of [`XMLParser`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser "xml.etree.ElementTree.XMLParser") will no longer be called and will emit a [`RuntimeWarning`](https://docs.python.org/3/library/exceptions.html#RuntimeWarning "RuntimeWarning") instead of a [`DeprecationWarning`](https://docs.python.org/3/library/exceptions.html#DeprecationWarning "DeprecationWarning"). Define the [`doctype()`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.TreeBuilder.doctype "xml.etree.ElementTree.TreeBuilder.doctype") method on a target for handling an XML doctype declaration. (Contributed by Serhiy Storchaka in [bpo-29209](https://