Title: Python 3 Changelog - Bug Fixes and Improvements
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details several key bug fixes and improvements in Python 3, including race condition fixes in asyncio, corrections for invalid file descriptor operations, deprecations, and performance enhancements, with specific contributions noted from various developers.
---

Patch by INADA Naoki.
  * [bpo-28176](https://bugs.python.org/issue?@action=redirect&bpo=28176): Fix callbacks race in asyncio.SelectorLoop.sock_connect.
  * [bpo-27759](https://bugs.python.org/issue?@action=redirect&bpo=27759): Fix selectors incorrectly retain invalid file descriptors. Patch by Mark Williams.
  * [bpo-28368](https://bugs.python.org/issue?@action=redirect&bpo=28368): Refuse monitoring processes if the child watcher has no loop attached. Patch by Vincent Michel.
  * [bpo-28369](https://bugs.python.org/issue?@action=redirect&bpo=28369): Raise RuntimeError when transport’s FD is used with add_reader, add_writer, etc.
  * [bpo-28370](https://bugs.python.org/issue?@action=redirect&bpo=28370): Speedup asyncio.StreamReader.readexactly. Patch by Коренберг Марк.
  * [bpo-28371](https://bugs.python.org/issue?@action=redirect&bpo=28371): Deprecate passing asyncio.Handles to run_in_executor.
  * [bpo-28372](https://bugs.python.org/issue?@action=redirect&bpo=28372): Fix asyncio to support formatting of non-python coroutines.
  * [bpo-28399](https://bugs.python.org/issue?@action=redirect&bpo=28399): Remove UNIX socket from FS before binding. Patch by Коренберг Марк.
  * [bpo-27972](https://bugs.python.org/issue?@action=redirect&bpo=27972): Prohibit Tasks to await on themselves.
  * [bpo-26923](https://bugs.python.org/issue?@action=redirect&bpo=26923): Fix asyncio.Gather to refuse being cancelled once all children are done. Patch by Johannes Ebke.
  * [bpo-26796](https://bugs.python.org/issue?@action=redirect&bpo=26796): Don’t configure the number of workers for default threadpool executor. Initial patch by Hans Lawrenz.
  * [bpo-28600](https://bugs.python.org/issue?@action=redirect&bpo=28600): Optimize loop.call_soon().
  * [bpo-28613](https://bugs.python.org/issue?@action=redirect&bpo=28613): Fix get_event_loop() return the current loop if called from coroutines/callbacks.
  * [bpo-28639](https://bugs.python.org/issue?@action=redirect&bpo=28639): Fix inspect.isawaitable to always return bool Patch by Justin Mayfield.
  * [bpo-28652](https://bugs.python.org/issue?@action=redirect&bpo=28652): Make loop methods reject socket kinds they do not support.
  * [bpo-28653](https://bugs.python.org/issue?@action=redirect&bpo=28653): Fix a refleak in functools.lru_cache.
  * [bpo-28703](https://bugs.python.org/issue?@action=redirect&bpo=28703): Fix asyncio.iscoroutinefunction to handle Mock objects.
  * [bpo-24142](https://bugs.python.org/issue?@action=redirect&bpo=24142): Reading a corrupt config file left the parser in an invalid state. Original patch by Florian Höch.
  * [bpo-28990](https://bugs.python.org/issue?@action=redirect&bpo=28990): Fix SSL hanging if connection is closed before handshake completed. (Patch by HoHo-Ho)


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id718 "Link to this heading")
  * [bpo-15308](https://bugs.python.org/issue?@action=redirect&bpo=15308): Add ‘interrupt execution’ (^C) to Shell menu. Patch by Roger Serwy, updated by Bayard Randel.
  * [bpo-27922](https://bugs.python.org/issue?@action=redirect&bpo=27922): Stop IDLE tests from ‘flashing’ gui widgets on the screen.
  * Add version to title of IDLE help window.
  * [bpo-25564](https://bugs.python.org/issue?@action=redirect&bpo=25564): In section on IDLE – console differences, mention that using exec means that __builtins__ is defined for each statement.
  * [bpo-27714](https://bugs.python.org/issue?@action=redirect&bpo=27714): text_textview and test_autocomplete now pass when re-run in the same process. This occurs when test_idle fails when run with the -w option but without -jn. Fix warning from test_config.
  * [bpo-25507](https://bugs.python.org/issue?@action=redirect&bpo=25507): IDLE no longer runs buggy code because of its tkinter imports. Users must include the same imports required to run directly in Python.
  * [bpo-27452](https://bugs.python.org/issue?@action=redirect&bpo=27452): add line counter and crc to IDLE configHandler test dump.
  * [bpo-27365](https://bugs.python.org/issue?@action=redirect&bpo=27365): Allow non-ascii chars in IDLE NEWS.txt, for contributor names.
  * [bpo-27245](https://bugs.python.org/issue?@action=redirect&bpo=27245): IDLE: Cleanly delete custom themes and key bindings. Previously, when IDLE was started from a console or by import, a cascade of warnings was emitted. Patch by Serhiy Storchaka.


### C API[¶](https://docs.python.org/3/whatsnew/changelog.html#id719 "Link to this heading")
  * [bpo-28808](https://bugs.python.org/issue?@action=redirect&bpo=28808): PyUnicode_CompareWithASCIIString() now never raises exceptions.
  * [bpo-26754](https://bugs.python.org/issue?@action=redirect&bpo=26754): PyUnicode_FSDecoder() accepted a filename argument encoded as an iterable of integers. Now only strings and bytes-like objects are accepted.