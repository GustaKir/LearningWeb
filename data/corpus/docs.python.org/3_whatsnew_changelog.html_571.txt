Title: Python 3 Updates and Bug Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section highlights several key updates in Python 3, including the new behavior of `after_cancel(None)` raising a ValueError, the introduction of a ThreadedHTTPServer class in the http.server module for better web socket management, and the addition of a `backup` method to the `sqlite3.Connection` class if the SQLite version is 3.6.11 or higher.
---

ical user interfaces"), `after_cancel(None)` now raises a [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") instead of canceling the first scheduled function. Patch by Cheryl Sabella.
  * [bpo-31639](https://bugs.python.org/issue?@action=redirect&bpo=31639): http.server now exposes a ThreadedHTTPServer class and uses it when the module is run with `-m` to cope with web browsers pre-opening sockets.
  * [bpo-27645](https://bugs.python.org/issue?@action=redirect&bpo=27645): [`sqlite3.Connection`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection "sqlite3.Connection") now exposes a [`backup`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.backup "sqlite3.Connection.backup") method, if the underlying SQLite library is at version 3.6.11 or higher. Patch by Lele Gaifax.


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id511 "Link to this heading")
  * [bpo-33126](https://bugs.python.org/issue?@action=redirect&bpo=33126): Document PyBuffer_ToContiguous().
  * [bpo-27212](https://bugs.python.org/issue?@action=redirect&bpo=27212): Modify documentation for the `islice()` recipe to consume initial values up to the start index.
  * [bpo-28247](https://bugs.python.org/issue?@action=redirect&bpo=28247): Update [`zipapp`](https://docs.python.org/3/library/zipapp.html#module-zipapp "zipapp: Manage executable Python zip archives") documentation to describe how to make standalone applications.
  * [bpo-18802](https://bugs.python.org/issue?@action=redirect&bpo=18802): Documentation changes for ipaddress. Patch by Jon Foster and Berker Peksag.
  * [bpo-27428](https://bugs.python.org/issue?@action=redirect&bpo=27428): Update documentation to clarify that `WindowsRegistryFinder` implements `MetaPathFinder`. (Patch by Himanshu Lakhara)


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id512 "Link to this heading")
  * [bpo-32872](https://bugs.python.org/issue?@action=redirect&bpo=32872): Avoid regrtest compatibility issue with namespace packages.
  * [bpo-32517](https://bugs.python.org/issue?@action=redirect&bpo=32517): Fix failing `test_asyncio` on macOS 10.12.2+ due to transport of `KqueueSelector` loop was not being closed.
  * [bpo-19417](https://bugs.python.org/issue?@action=redirect&bpo=19417): Add test_bdb.py.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id513 "Link to this heading")
  * [bpo-33163](https://bugs.python.org/issue?@action=redirect&bpo=33163): Upgrade pip to 9.0.3 and setuptools to v39.0.1.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id514 "Link to this heading")
  * [bpo-33016](https://bugs.python.org/issue?@action=redirect&bpo=33016): Fix potential use of uninitialized memory in nt._getfinalpathname
  * [bpo-32903](https://bugs.python.org/issue?@action=redirect&bpo=32903): Fix a memory leak in os.chdir() on Windows if the current directory is set to a UNC path.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id515 "Link to this heading")
  * [bpo-32726](https://bugs.python.org/issue?@action=redirect&bpo=32726): Build and link with private copy of Tcl/Tk 8.6 for the macOS 10.6+ installer. The 10.9+ installer variant already does this. This means that the Python 3.7 provided by the python.org macOS installers no longer need or use any external versions of Tcl/Tk, either system-provided or user-installed, such as ActiveTcl.


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id516 "Link to this heading")
  * [bpo-32984](https://bugs.python.org/issue?@action=redirect&bpo=32984): Set `__file__` while running a startup file. Like Python, IDLE optionally runs one startup file in the Shell window before presenting the first interactive input prompt. For IDLE, `-s` runs a file named in environmental variable `IDLESTARTUP` or [`PYTHONSTARTUP`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONSTARTUP); `-r file` runs `file`. Python sets `__file__` to the startup file name before running the file and unsets it before the first prompt. IDLE now does the same when run normally, without the `-n` option.
  * [bpo-32940](https://bugs.python.org/issue?@action=redirect&bpo=32940): Simplify and rename StringTranslatePseudoMapping in pyparse.


### Tools/Demos[¶](https://docs.python.org/3/whatsnew/changelog.html#id517 "Link to this heading")
  * [bpo-32885](https://bugs.python.org/issue?@action=redirect&bpo=32885): Add an `-n` flag for `Tools/scripts/pathfix.py` to disable automatic backup creation (files with `~` suffix).