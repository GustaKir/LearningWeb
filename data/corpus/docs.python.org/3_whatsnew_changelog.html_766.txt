Title: Python C API Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines recent changes to the Python C API, including the removal of obsolete buffer support functions, improvements to the PyBuffer_IsContiguous() function for better compatibility with NumPy, type checks in PyType_Ready(), removal of undocumented macros, and various bug fixes.
---

### C API[¶](https://docs.python.org/3/whatsnew/changelog.html#id795 "Link to this heading")
  * [bpo-14203](https://bugs.python.org/issue?@action=redirect&bpo=14203): Remove obsolete support for view==NULL in PyBuffer_FillInfo(), bytearray_getbuffer(), bytesiobuf_getbuffer() and array_buffer_getbuf(). All functions now raise BufferError in that case.
  * [bpo-22445](https://bugs.python.org/issue?@action=redirect&bpo=22445): PyBuffer_IsContiguous() now implements precise contiguity tests, compatible with NumPy’s NPY_RELAXED_STRIDES_CHECKING compilation flag. Previously the function reported false negatives for corner cases.
  * [bpo-22079](https://bugs.python.org/issue?@action=redirect&bpo=22079): PyType_Ready() now checks that statically allocated type has no dynamically allocated bases.
  * [bpo-22453](https://bugs.python.org/issue?@action=redirect&bpo=22453): Removed non-documented macro PyObject_REPR().
  * [bpo-18395](https://bugs.python.org/issue?@action=redirect&bpo=18395): Rename `_Py_char2wchar()` to [`Py_DecodeLocale()`](https://docs.python.org/3/c-api/sys.html#c.Py_DecodeLocale "Py_DecodeLocale"), rename `_Py_wchar2char()` to [`Py_EncodeLocale()`](https://docs.python.org/3/c-api/sys.html#c.Py_EncodeLocale "Py_EncodeLocale"), and document these functions.
  * [bpo-21233](https://bugs.python.org/issue?@action=redirect&bpo=21233): Add new C functions: PyMem_RawCalloc(), PyMem_Calloc(), PyObject_Calloc(), _PyObject_GC_Calloc(). bytes(int) is now using `calloc()` instead of `malloc()` for large objects which is faster and use less memory.
  * [bpo-20942](https://bugs.python.org/issue?@action=redirect&bpo=20942): PyImport_ImportFrozenModuleObject() no longer sets __file__ to match what importlib does; this affects _frozen_importlib as well as any module loaded using imp.init_frozen().


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id796 "Link to this heading")
  * [bpo-19548](https://bugs.python.org/issue?@action=redirect&bpo=19548): Update the codecs module documentation to better cover the distinction between text encodings and other codecs, together with other clarifications. Patch by Martin Panter.
  * [bpo-22394](https://bugs.python.org/issue?@action=redirect&bpo=22394): Doc/Makefile now supports `make venv PYTHON=../python` to create a venv for generating the documentation, e.g., `make html PYTHON=venv/bin/python3`.
  * [bpo-21514](https://bugs.python.org/issue?@action=redirect&bpo=21514): The documentation of the json module now refers to new JSON RFC 7159 instead of obsoleted RFC 4627.
  * [bpo-21777](https://bugs.python.org/issue?@action=redirect&bpo=21777): The binary sequence methods on bytes and bytearray are now documented explicitly, rather than assuming users will be able to derive the expected behaviour from the behaviour of the corresponding str methods.
  * [bpo-6916](https://bugs.python.org/issue?@action=redirect&bpo=6916): undocument deprecated asynchat.fifo class.
  * [bpo-17386](https://bugs.python.org/issue?@action=redirect&bpo=17386): Expanded functionality of the `Doc/make.bat` script to make it much more comparable to `Doc/Makefile`.
  * [bpo-21312](https://bugs.python.org/issue?@action=redirect&bpo=21312): Update the thread_foobar.h template file to include newer threading APIs. Patch by Jack McCracken.
  * [bpo-21043](https://bugs.python.org/issue?@action=redirect&bpo=21043): Remove the recommendation for specific CA organizations and to mention the ability to load the OS certificates.
  * [bpo-20765](https://bugs.python.org/issue?@action=redirect&bpo=20765): Add missing documentation for PurePath.with_name() and PurePath.with_suffix().
  * [bpo-19407](https://bugs.python.org/issue?@action=redirect&bpo=19407): New package installation and distribution guides based on the Python Packaging Authority tools. Existing guides have been retained as legacy links from the distutils docs, as they still contain some required reference material for tool developers that isn’t recorded anywhere else.
  * [bpo-19697](https://bugs.python.org/issue?@action=redirect&bpo=19697): Document cases where __main__.__spec__ is None.