Title: Python Performance Improvements and Fixes - Changelog
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document outlines recent patches, including performance improvements for `urllib.request.getproxies_environment`, faster regular expression substitutions in `re.sub()` and `re.subn()`, corrections in the xml module's findtext functionality, and the deprecation of the current default behavior of auto() for enum members.
---

Patch by Paul Ganssle.
  * [gh-91539](https://github.com/python/cpython/issues/91539): Improve performance of `urllib.request.getproxies_environment` when there are many environment variables
  * [gh-91524](https://github.com/python/cpython/issues/91524): Speed up the regular expression substitution (functions [`re.sub()`](https://docs.python.org/3/library/re.html#re.sub "re.sub") and [`re.subn()`](https://docs.python.org/3/library/re.html#re.subn "re.subn") and corresponding [`re.Pattern`](https://docs.python.org/3/library/re.html#re.Pattern "re.Pattern") methods) for replacement strings containing group references by 2â€“3 times.
  * [gh-91447](https://github.com/python/cpython/issues/91447): Fix findtext in the xml module to only give an empty string when the text attribute is set to `None`.
  * [gh-91456](https://github.com/python/cpython/issues/91456): Deprecate current default auto() behavior: In 3.13 the default will be for for auto() to always return the largest member value incremented by 1, and to raise if incompatible value types are used.
  * [bpo-47231](https://bugs.python.org/issue?@action=redirect&bpo=47231): Fixed an issue with inconsistent trailing slashes in tarfile longname directories.
  * [bpo-39064](https://bugs.python.org/issue?@action=redirect&bpo=39064): [`zipfile.ZipFile`](https://docs.python.org/3/library/zipfile.html#zipfile.ZipFile "zipfile.ZipFile") now raises [`zipfile.BadZipFile`](https://docs.python.org/3/library/zipfile.html#zipfile.BadZipFile "zipfile.BadZipFile") instead of `ValueError` when reading a corrupt zip file in which the central directory offset is negative.
  * [bpo-41287](https://bugs.python.org/issue?@action=redirect&bpo=41287): Fix handling of the `doc` argument in subclasses of [`property()`](https://docs.python.org/3/library/functions.html#property "property").
  * [gh-90005](https://github.com/python/cpython/issues/90005): [`ctypes`](https://docs.python.org/3/library/ctypes.html#module-ctypes "ctypes: A foreign function library for Python.") dependency `libffi` is now detected with `pkg-config`.
  * [bpo-32547](https://bugs.python.org/issue?@action=redirect&bpo=32547): The constructors for [`DictWriter`](https://docs.python.org/3/library/csv.html#csv.DictWriter "csv.DictWriter") and [`DictReader`](https://docs.python.org/3/library/csv.html#csv.DictReader "csv.DictReader") now coerce the `fieldnames` argument to a [`list`](https://docs.python.org/3/library/stdtypes.html#list "list") if it is an iterator.
  * [bpo-35540](https://bugs.python.org/issue?@action=redirect&bpo=35540): Fix [`dataclasses.asdict()`](https://docs.python.org/3/library/dataclasses.html#dataclasses.asdict "dataclasses.asdict") crash when [`collections.defaultdict`](https://docs.python.org/3/library/collections.html#collections.defaultdict "collections.defaultdict") is present in the attributes.
  * [bpo-47063](https://bugs.python.org/issue?@action=redirect&bpo=47063): Add an index_pages parameter to support using non-default index page names.
  * [bpo-47025](https://bugs.python.org/issue?@action=redirect&bpo=47025): Drop support for [`bytes`](https://docs.python.org/3/library/stdtypes.html#bytes "bytes") on [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "sys.path").
  * [bpo-46951](https://bugs.python.org/issue?@action=redirect&bpo=46951): Order the contents of zipapp archives, to make builds more reproducible.
  * [bpo-42777](https://bugs.python.org/issue?@action=redirect&bpo=42777): Implement [`pathlib.Path.is_mount()`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.is_mount "pathlib.Path.is_mount") for Windows paths.
  * [bpo-46755](https://bugs.python.org/issue?@action=redirect&bpo=46755): In `QueueHandler`, clear `stack_info` from `LogRecord` to prevent stack trace from being written twice.
  * [bpo-45393](https://bugs.python.org/issue?@action=redirect&bpo=45393): Fix the formatting for `await x` and `not x` in the operator precedence table when using the [`help()`](https://docs.python.org/3/library/functions.html#help "help") system.
  * [bpo-46642](https://bugs.python.org/issue?@action=redirect&bpo=46642): Improve error message when trying to subclass an instance of [`typing.TypeVar`](https://docs.python.org/3/library/typing.html#typing.TypeVar "typing.TypeVar"), [`typing.ParamSpec`](https://docs.python.org/3/library/typing.html#typing.ParamSpec "typing.ParamSpec"), [`typing.TypeVarTuple`](https://docs.python.org/3/library/typing.html#typing.TypeVarTuple "typing.TypeVarTuple"), etc.