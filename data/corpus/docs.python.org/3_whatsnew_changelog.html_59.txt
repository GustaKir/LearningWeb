Title: Python 3.x Changelog Highlights
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document highlights recent patches in Python 3, including a fix for type parameter overrides in class scope with future annotations, resolution of a NameError in 'inspect.get_annotations()', and a prohibition on passing None to 'datetime.date.fromtimestamp()' for consistency with C-extension implementation.
---

results if type parameters in a class scope were overridden by assignments in a class scope and `from __future__ import annotations` semantics were enabled. Patch by Alex Waygood.
  * [gh-114053](https://github.com/python/cpython/issues/114053): Fix erroneous [`NameError`](https://docs.python.org/3/library/exceptions.html#NameError "NameError") when calling [`inspect.get_annotations()`](https://docs.python.org/3/library/inspect.html#inspect.get_annotations "inspect.get_annotations") with `eval_str=True`` on a class that made use of [**PEP 695**](https://peps.python.org/pep-0695/) type parameters in a module that had `from __future__ import annotations` at the top of the file. Patch by Alex Waygood.
  * [gh-120268](https://github.com/python/cpython/issues/120268): Prohibit passing `None` to pure-Python [`datetime.date.fromtimestamp()`](https://docs.python.org/3/library/datetime.html#datetime.date.fromtimestamp "datetime.date.fromtimestamp") to achieve consistency with C-extension implementation.
  * [gh-120244](https://github.com/python/cpython/issues/120244): Fix memory leak in [`re.sub()`](https://docs.python.org/3/library/re.html#re.sub "re.sub") when the replacement string contains backreferences.
  * [gh-120211](https://github.com/python/cpython/issues/120211): Fix [`tkinter.ttk`](https://docs.python.org/3/library/tkinter.ttk.html#module-tkinter.ttk "tkinter.ttk: Tk themed widget set") with Tcl/Tk 9.0.
  * [gh-71587](https://github.com/python/cpython/issues/71587): Fix crash in C version of [`datetime.datetime.strptime()`](https://docs.python.org/3/library/datetime.html#datetime.datetime.strptime "datetime.datetime.strptime") when called again on the restarted interpreter.
  * [gh-120161](https://github.com/python/cpython/issues/120161): [`datetime`](https://docs.python.org/3/library/datetime.html#module-datetime "datetime: Basic date and time types.") no longer crashes in certain complex reference cycle situations.
  * [gh-119698](https://github.com/python/cpython/issues/119698): Fix [`symtable.Class.get_methods()`](https://docs.python.org/3/library/symtable.html#symtable.Class.get_methods "symtable.Class.get_methods") and document its behaviour. Patch by Bénédikt Tran.
  * [gh-120121](https://github.com/python/cpython/issues/120121): Add [`concurrent.futures.InvalidStateError`](https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.InvalidStateError "concurrent.futures.InvalidStateError") to module’s `__all__`.
  * [gh-119933](https://github.com/python/cpython/issues/119933): Add the [`symtable.SymbolTableType`](https://docs.python.org/3/library/symtable.html#symtable.SymbolTableType "symtable.SymbolTableType") enumeration to represent the possible outputs of the [`symtable.SymbolTable.get_type`](https://docs.python.org/3/library/symtable.html#symtable.SymbolTable.get_type "symtable.SymbolTable.get_type") method. Patch by Bénédikt Tran.
  * [gh-120108](https://github.com/python/cpython/issues/120108): Fix calling [`copy.deepcopy()`](https://docs.python.org/3/library/copy.html#copy.deepcopy "copy.deepcopy") on [`ast`](https://docs.python.org/3/library/ast.html#module-ast "ast: Abstract Syntax Tree classes and manipulation.") trees that have been modified to have references to parent nodes. Patch by Jelle Zijlstra.
  * [gh-112672](https://github.com/python/cpython/issues/112672): Support building [`tkinter`](https://docs.python.org/3/library/tkinter.html#module-tkinter "tkinter: Interface to Tcl/Tk for graphical user interfaces") with Tcl 9.0.
  * [gh-65454](https://github.com/python/cpython/issues/65454): [`unittest.mock.Mock.attach_mock()`](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.attach_mock "unittest.mock.Mock.attach_mock") no longer triggers a call to a `PropertyMock` being attached.
  * [gh-81936](https://github.com/python/cpython/issues/81936): `help()` and `showtopic()` methods now respect a configured _output_ argument to `pydoc.Helper` and not use the pager in such cases. Patch by Enrico Tröger.
  * [gh-119577](https://github.com/python/cpython/issues/119577): The [`DeprecationWarning`](https://docs.python.org/3/library/exceptions.html#DeprecationWarning "DeprecationWarning") emitted when testing the truth value of an [`xml.etree.ElementTree.Element`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element "xml.etree.ElementTree.Element") now describes unconditionally returning `True` in a future version rather than raising an exception in Python 3.14.
  * [gh-118908](https://github.com/python/cpython/issues/118908): Limit exposed globals from internal imports and definitions on new REPL startup. Patch by Eugene Triguba and Pablo Galindo.
  * [gh-119506](https://github.com/python/cpython/issues/119506): Fix `io.TextIOWrapper.write()` method breaks internal buffer when the method is called again during flushing internal buffer.