Title: Python Library Updates and Bug Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details various bug fixes and improvements in the Python library, including handling of exceptions related to PYTHONSTARTUP, updates to datetime instance handling, race condition fixes in debugging and asyncio, and corrections in configuration tests.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id487 "Link to this heading")
  * [bpo-30167](https://bugs.python.org/issue?@action=redirect&bpo=30167): Prevent site.main() exception if PYTHONSTARTUP is set. Patch by Steve Weber.
  * [bpo-33812](https://bugs.python.org/issue?@action=redirect&bpo=33812): Datetime instance d with non-None tzinfo, but with d.tzinfo.utcoffset(d) returning None is now treated as naive by the astimezone() method.
  * [bpo-30805](https://bugs.python.org/issue?@action=redirect&bpo=30805): Avoid race condition with debug logging
  * [bpo-33694](https://bugs.python.org/issue?@action=redirect&bpo=33694): asyncio: Fix a race condition causing data loss on pause_reading()/resume_reading() when using the ProactorEventLoop.
  * [bpo-32493](https://bugs.python.org/issue?@action=redirect&bpo=32493): Correct test for `uuid_enc_be` availability in `configure.ac`. Patch by Michael Felt.
  * [bpo-33792](https://bugs.python.org/issue?@action=redirect&bpo=33792): Add asyncio.WindowsSelectorEventLoopPolicy and asyncio.WindowsProactorEventLoopPolicy.
  * [bpo-33778](https://bugs.python.org/issue?@action=redirect&bpo=33778): Update `unicodedata`’s database to Unicode version 11.0.0.
  * [bpo-33770](https://bugs.python.org/issue?@action=redirect&bpo=33770): improve base64 exception message for encoded inputs of invalid length
  * [bpo-33769](https://bugs.python.org/issue?@action=redirect&bpo=33769): asyncio/start_tls: Fix error message; cancel callbacks in case of an unhandled error; mark SSLTransport as closed if it is aborted.
  * [bpo-33767](https://bugs.python.org/issue?@action=redirect&bpo=33767): The concatenation (`+`) and repetition (`*`) sequence operations now raise [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError") instead of [`SystemError`](https://docs.python.org/3/library/exceptions.html#SystemError "SystemError") when performed on [`mmap.mmap`](https://docs.python.org/3/library/mmap.html#mmap.mmap "mmap.mmap") objects. Patch by Zackery Spytz.
  * [bpo-33734](https://bugs.python.org/issue?@action=redirect&bpo=33734): asyncio/ssl: Fix AttributeError, increase default handshake timeout
  * [bpo-11874](https://bugs.python.org/issue?@action=redirect&bpo=11874): Use a better regex when breaking usage into wrappable parts. Avoids bogus assertion errors from custom metavar strings.
  * [bpo-33582](https://bugs.python.org/issue?@action=redirect&bpo=33582): Emit a deprecation warning for inspect.formatargspec


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id488 "Link to this heading")
  * [bpo-33409](https://bugs.python.org/issue?@action=redirect&bpo=33409): Clarified the relationship between [**PEP 538**](https://peps.python.org/pep-0538/)’s PYTHONCOERCECLOCALE and PEP 540’s PYTHONUTF8 mode.
  * [bpo-33736](https://bugs.python.org/issue?@action=redirect&bpo=33736): Improve the documentation of [`asyncio.open_connection()`](https://docs.python.org/3/library/asyncio-stream.html#asyncio.open_connection "asyncio.open_connection"), [`asyncio.start_server()`](https://docs.python.org/3/library/asyncio-stream.html#asyncio.start_server "asyncio.start_server") and their UNIX socket counterparts.
  * [bpo-31432](https://bugs.python.org/issue?@action=redirect&bpo=31432): Clarify meaning of CERT_NONE, CERT_OPTIONAL, and CERT_REQUIRED flags for ssl.SSLContext.verify_mode.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id489 "Link to this heading")
  * [bpo-5755](https://bugs.python.org/issue?@action=redirect&bpo=5755): Move `-Wstrict-prototypes` option to `CFLAGS_NODIST` from `OPT`. This option emitted annoying warnings when building extension modules written in C++.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id490 "Link to this heading")
  * [bpo-33720](https://bugs.python.org/issue?@action=redirect&bpo=33720): Reduces maximum marshal recursion depth on release builds.