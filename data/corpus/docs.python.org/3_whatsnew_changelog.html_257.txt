Title: Deprecation of Global Configuration Variables in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section discusses the deprecation of global configuration variables, specifically `Py_IgnoreEnvironmentFlag`, and emphasizes the use of the `Py_InitializeFromConfig()` API instead. It includes patches contributed by Serge Guelton and Victor Stinner, addressing specific GitHub issues related to these changes.
---

Patch by Serge Guelton.
  * [gh-93103](https://github.com/python/cpython/issues/93103): Deprecate global configuration variables, like [`Py_IgnoreEnvironmentFlag`](https://docs.python.org/3/c-api/init.html#c.Py_IgnoreEnvironmentFlag "Py_IgnoreEnvironmentFlag"), in the documentation: the [`Py_InitializeFromConfig()`](https://docs.python.org/3/c-api/init.html#c.Py_InitializeFromConfig "Py_InitializeFromConfig") API should be instead. Patch by Victor Stinner.
  * [gh-77782](https://github.com/python/cpython/issues/77782): Deprecate global configuration variable like [`Py_IgnoreEnvironmentFlag`](https://docs.python.org/3/c-api/init.html#c.Py_IgnoreEnvironmentFlag "Py_IgnoreEnvironmentFlag"): the [`Py_InitializeFromConfig()`](https://docs.python.org/3/c-api/init.html#c.Py_InitializeFromConfig "Py_InitializeFromConfig") API should be instead. Patch by Victor Stinner.
  * [gh-92913](https://github.com/python/cpython/issues/92913): Ensures changes to [`PyConfig.module_search_paths`](https://docs.python.org/3/c-api/init_config.html#c.PyConfig.module_search_paths "PyConfig.module_search_paths") are ignored unless [`PyConfig.module_search_paths_set`](https://docs.python.org/3/c-api/init_config.html#c.PyConfig.module_search_paths_set "PyConfig.module_search_paths_set") is set
  * [gh-92781](https://github.com/python/cpython/issues/92781): Avoid mixing declarations and code in the C API to fix the compiler warning: “ISO C90 forbids mixed declarations and code” [-Werror=declaration-after-statement]. Patch by Victor Stinner.
  * [gh-92651](https://github.com/python/cpython/issues/92651): Remove the `token.h` header file. There was never any public tokenizer C API. The `token.h` header file was only designed to be used by Python internals. Patch by Victor Stinner.
  * [gh-92536](https://github.com/python/cpython/issues/92536): Remove legacy Unicode APIs based on `Py_UNICODE*`.
  * [gh-85858](https://github.com/python/cpython/issues/85858): Remove the `PyUnicode_InternImmortal()` function and the `SSTATE_INTERNED_IMMORTAL` macro. Patch by Victor Stinner.
  * [gh-92193](https://github.com/python/cpython/issues/92193): Add new function [`PyFunction_SetVectorcall()`](https://docs.python.org/3/c-api/function.html#c.PyFunction_SetVectorcall "PyFunction_SetVectorcall") to the C API which sets the vectorcall field of a given [`PyFunctionObject`](https://docs.python.org/3/c-api/function.html#c.PyFunctionObject "PyFunctionObject").
Warning: extensions using this API must preserve the behavior of the unaltered function!
  * [gh-59121](https://github.com/python/cpython/issues/59121): Fixed an assert that prevented `PyRun_InteractiveOne` from providing tracebacks when parsing from the provided FD.
  * [bpo-45383](https://bugs.python.org/issue?@action=redirect&bpo=45383): The [`PyType_FromSpec()`](https://docs.python.org/3/c-api/type.html#c.PyType_FromSpec "PyType_FromSpec") API will now find and use a metaclass based on the provided bases. An error will be raised if there is a metaclass conflict.


## Python 3.11.0 beta 1[¶](https://docs.python.org/3/whatsnew/changelog.html#python-3-11-0-beta-1 "Link to this heading")
_Release date: 2022-05-06_
### Security[¶](https://docs.python.org/3/whatsnew/changelog.html#id217 "Link to this heading")
  * [gh-57684](https://github.com/python/cpython/issues/57684): Add the [`-P`](https://docs.python.org/3/using/cmdline.html#cmdoption-P) command line option and the [`PYTHONSAFEPATH`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONSAFEPATH) environment variable to not prepend a potentially unsafe path to [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "sys.path"). Patch by Victor Stinner.