Title: Python Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document includes several updates: A new `RuntimeError` is raised for custom metaclasses missing the `__classcell__` entry, a new `PYTHONPYCACHEPREFIX` environment variable allows setting an alternate directory for module bytecode cache files, and updates to `zipimport` functionality.
---

Patch by Rémi Lapeyre.
  * [bpo-23722](https://bugs.python.org/issue?@action=redirect&bpo=23722): A [`RuntimeError`](https://docs.python.org/3/library/exceptions.html#RuntimeError "RuntimeError") is now raised when the custom metaclass doesn’t provide the `__classcell__` entry in the namespace passed to `type.__new__`. A [`DeprecationWarning`](https://docs.python.org/3/library/exceptions.html#DeprecationWarning "DeprecationWarning") was emitted in Python 3.6–3.7.
  * [bpo-33499](https://bugs.python.org/issue?@action=redirect&bpo=33499): Add [`PYTHONPYCACHEPREFIX`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPYCACHEPREFIX) environment variable and [`-X`](https://docs.python.org/3/using/cmdline.html#cmdoption-X) `pycache_prefix` command-line option to set an alternate root directory for writing module bytecode cache files.
  * [bpo-25711](https://bugs.python.org/issue?@action=redirect&bpo=25711): The [`zipimport`](https://docs.python.org/3/library/zipimport.html#module-zipimport "zipimport: Support for importing Python modules from ZIP archives.") module has been rewritten in pure Python.
  * [bpo-33509](https://bugs.python.org/issue?@action=redirect&bpo=33509): Fix module_globals parameter of warnings.warn_explicit(): don’t crash if module_globals is not a dict.
  * [bpo-31849](https://bugs.python.org/issue?@action=redirect&bpo=31849): Fix signed/unsigned comparison warning in pyhash.c.
  * [bpo-33475](https://bugs.python.org/issue?@action=redirect&bpo=33475): Fixed miscellaneous bugs in converting annotations to strings and optimized parentheses in the string representation.
  * [bpo-20104](https://bugs.python.org/issue?@action=redirect&bpo=20104): Added support for the `setpgroup`, `resetids`, `setsigmask`, `setsigdef` and `scheduler` parameters of `posix_spawn`. Patch by Pablo Galindo.
  * [bpo-33391](https://bugs.python.org/issue?@action=redirect&bpo=33391): Fix a leak in set_symmetric_difference().
  * [bpo-33363](https://bugs.python.org/issue?@action=redirect&bpo=33363): Raise a SyntaxError for `async with` and `async for` statements outside of async functions.
  * [bpo-28055](https://bugs.python.org/issue?@action=redirect&bpo=28055): Fix unaligned accesses in siphash24(). Patch by Rolf Eike Beer.
  * [bpo-33128](https://bugs.python.org/issue?@action=redirect&bpo=33128): Fix a bug that causes PathFinder to appear twice on sys.meta_path. Patch by Pablo Galindo Salgado.
  * [bpo-33331](https://bugs.python.org/issue?@action=redirect&bpo=33331): Modules imported last are now cleared first at interpreter shutdown.
  * [bpo-33312](https://bugs.python.org/issue?@action=redirect&bpo=33312): Fixed clang ubsan (undefined behavior sanitizer) warnings in dictobject.c by adjusting how the internal struct _dictkeysobject shared keys structure is declared.
  * [bpo-33305](https://bugs.python.org/issue?@action=redirect&bpo=33305): Improved syntax error messages for invalid numerical literals.
  * [bpo-33306](https://bugs.python.org/issue?@action=redirect&bpo=33306): Improved syntax error messages for unbalanced parentheses.
  * [bpo-33234](https://bugs.python.org/issue?@action=redirect&bpo=33234): The list constructor will pre-size and not over-allocate when the input length is known.
  * [bpo-33270](https://bugs.python.org/issue?@action=redirect&bpo=33270): Intern the names for all anonymous code objects. Patch by Zackery Spytz.
  * [bpo-30455](https://bugs.python.org/issue?@action=redirect&bpo=30455): The C and Python code and the documentation related to tokens are now generated from a single source file `Grammar/Tokens`.
  * [bpo-33176](https://bugs.python.org/issue?@action=redirect&bpo=33176): Add a `toreadonly()` method to memoryviews.
  * [bpo-33231](https://bugs.python.org/issue?@action=redirect&bpo=33231): Fix potential memory leak in `normalizestring()`.
  * [bpo-33205](https://bugs.python.org/issue?@action=redirect&bpo=33205): Change dict growth function from `round_up_to_power_2(used*2+hashtable_size/2)` to `round_up_to_power_2(used*3)`. Previously, dict is shrinked only when `used == 0`. Now dict has more chance to be shrinked.
  * [bpo-29922](https://bugs.python.org/issue?@action=redirect&bpo=29922): Improved error messages in ‘async with’ when `__aenter__()` or `__aexit__()` return non-awaitable object.
  * [bpo-33199](https://bugs.python.org/issue?@action=redirect&bpo=33199): Fix `ma_version_tag` in dict implementation is uninitialized when copying from key-sharing dict.
  * [bpo-33053](https://bugs.python.org/issue?@action=redirect&bpo=33053): When using the -m switch, sys.path[0] is now explicitly expanded as the _starting_ working directory, rather than being left as the empty path (which allows imports from the current working directory at the time of the import)
  * [bpo-33138](https://bugs.python.org/issue?@action=redirect&bpo=33138): Changed standard error message for non-pickleable and non-copyable types.