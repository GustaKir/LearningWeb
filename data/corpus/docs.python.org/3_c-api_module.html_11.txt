Title: PyState_FindModule and PyState_AddModule Functions
URL: https://docs.python.org/3/c-api/module.html
Summary: The `PyState_FindModule` function retrieves a module object associated with a given `PyModuleDef` for the current interpreter, returning NULL if not found. It requires the module to be registered first with `PyState_AddModule`, which adds the module to the interpreter state.
---

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyState_FindModule([PyModuleDef](https://docs.python.org/3/c-api/module.html#c.PyModuleDef "PyModuleDef")*def)[¶](https://docs.python.org/3/c-api/module.html#c.PyState_FindModule "Link to this definition")
    _Return value: Borrowed reference.__Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable)._
Returns the module object that was created from _def_ for the current interpreter. This method requires that the module object has been attached to the interpreter state with [`PyState_AddModule()`](https://docs.python.org/3/c-api/module.html#c.PyState_AddModule "PyState_AddModule") beforehand. In case the corresponding module object is not found or has not been attached to the interpreter state yet, it returns `NULL`. 

intPyState_AddModule([PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*module, [PyModuleDef](https://docs.python.org/3/c-api/module.html#c.PyModuleDef "PyModuleDef")*def)[¶](https://docs.python.org/3/c-api/module.html#c.PyState_AddModule "Link to this definition")
    _Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable) since version 3.3._
Attaches the module object passed to the function to the interpreter state. This allows the module object to be accessible via [`PyState_FindModule()`](https://docs.python.org/3/c-api/module.html#c.PyState_FindModule "PyState_FindModule").
Only effective on modules created using single-phase initialization.
Python calls `PyState_AddModule` automatically after importing a module, so it is unnecessary (but harmless) to call it from module initialization code. An explicit call is needed only if the module’s own init code subsequently calls `PyState_FindModule`. The function is mainly intended for implementing alternative import mechanisms (either by calling it directly, or by referring to its implementation for details of the required state updates).
The caller must hold the GIL.
Return `-1` with an exception set on error, `0` on success.
Added in version 3.3. 

intPyState_RemoveModule([PyModuleDef](https://docs.python.org/3/c-api/module.html#c.PyModuleDef "PyModuleDef")*def)[¶](https://docs.python.org/3/c-api/module.html#c.PyState_RemoveModule "Link to this definition")
    _Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable) since version 3.3._
Removes the module object created from _def_ from the interpreter state. Return `-1` with an exception set on error, `0` on success.
The caller must hold the GIL.
Added in version 3.3.
### [Table of Contents](https://docs.python.org/3/contents.html)
  * [Module Objects](https://docs.python.org/3/c-api/module.html)
    * [Initializing C modules](https://docs.python.org/3/c-api/module.html#initializing-c-modules)
      * [Single-phase initialization](https://docs.python.org/3/c-api/module.html#single-phase-initialization)
      * [Multi-phase initialization](https://docs.python.org/3/c-api/module.html#multi-phase-initialization)
      * [Low-level module creation functions](https://docs.python.org/3/c-api/module.html#low-level-module-creation-functions)
      * [Support functions](https://docs.python.org/3/c-api/module.html#support-functions)
    * [Module lookup](https://docs.python.org/3/c-api/module.html#module-lookup)


#### Previous topic
[File Objects](https://docs.python.org/3/c-api/file.html "previous chapter")
#### Next topic
[Iterator Objects](https://docs.python.org/3/c-api/iterator.html "next chapter")
### This Page
  * [Report a Bug](https://docs.python.org/3/bugs.html)
  * [Show Source ](https://github.com/python/cpython/blob/main/Doc/c-api/module.rst)


«
### Navigation
  * [index](https://docs.python.org/3/genindex.html "General Index")
  * [modules](https://docs.python.org/3/py-modindex.html "Python Module Index") |
  * [next](https://docs.python.org/3/c-api/iterator.html "Iterator Objects") |
  * [previous](https://docs.python.org/3/c-api/file.html "File Objects") |
  * ![Python logo](https://docs.python.org/3/_static/py.svg)
  * [Python](https://www.python.org/) »
  * EnglishSpanish | españolFrench | françaisItalian | italianoJapanese | 日本語Korean | 한국어Polish | polskiBrazilian Portuguese | Português brasileiroTurkish | TürkçeSimplified Chinese | 简体中文Traditional Chinese | 繁體中文
dev (3.14)3.13.33.123.113.103.93.83.73.63.53.43.33.23.13.02.72.6
  * [3.13.3 Documentation](https://docs.python.org/3/index.html) » 
  * [Python/C API Reference Manual](https://docs.python.org/3/c-api/index.html) »
  * [Concrete Objects Layer](https://docs.python.org/3/c-api/concrete.html) »
  * [Module Objects](https://docs.python.org/3/c-api/module.html)
  * | 
  * Theme  Auto Light Dark |