Title: C API Updates in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines recent updates to the C API, including the addition of new functions to safely access frame object attributes and the relocation of certain private functions to the internal C API. Notable enhancements feature `PyFrame_GetBuiltins`, `PyFrame_GetGenerator`, and `PyFrame_GetGlobals` functions, as well as updates to `_PyFrameEvalFunction` and `_PyEval_EvalFrameDefault()`.
---

### C API[Â¶](https://docs.python.org/3/whatsnew/changelog.html#id235 "Link to this heading")
  * [bpo-40421](https://bugs.python.org/issue?@action=redirect&bpo=40421): Add `PyFrame_GetBuiltins`, `PyFrame_GetGenerator` and `PyFrame_GetGlobals` C-API functions to access frame object attributes safely from C code.
  * [bpo-46850](https://bugs.python.org/issue?@action=redirect&bpo=46850): Move the private `_PyFrameEvalFunction` type, and private `_PyInterpreterState_GetEvalFrameFunc()` and `_PyInterpreterState_SetEvalFrameFunc()` functions to the internal C API. The `_PyFrameEvalFunction` callback function type now uses the `_PyInterpreterFrame` type which is part of the internal C API. Patch by Victor Stinner.
  * [bpo-46850](https://bugs.python.org/issue?@action=redirect&bpo=46850): Move the private undocumented `_PyEval_EvalFrameDefault()` function to the internal C API. The function now uses the `_PyInterpreterFrame` type which is part of the internal C API. Patch by Victor Stinner.
  * [bpo-46850](https://bugs.python.org/issue?@action=redirect&bpo=46850): Remove the private undocumented function `_PyEval_CallTracing()` from the C API. Call the public [`sys.call_tracing()`](https://docs.python.org/3/library/sys.html#sys.call_tracing "sys.call_tracing") function instead. Patch by Victor Stinner.
  * [bpo-46850](https://bugs.python.org/issue?@action=redirect&bpo=46850): Remove the private undocumented function `_PyEval_GetCoroutineOriginTrackingDepth()` from the C API. Call the public [`sys.get_coroutine_origin_tracking_depth()`](https://docs.python.org/3/library/sys.html#sys.get_coroutine_origin_tracking_depth "sys.get_coroutine_origin_tracking_depth") function instead. Patch by Victor Stinner.
  * [bpo-46850](https://bugs.python.org/issue?@action=redirect&bpo=46850): Remove the following private undocumented functions from the C API:
    * `_PyEval_GetAsyncGenFirstiter()`
    * `_PyEval_GetAsyncGenFinalizer()`
    * `_PyEval_SetAsyncGenFirstiter()`
    * `_PyEval_SetAsyncGenFinalizer()`
Call the public [`sys.get_asyncgen_hooks()`](https://docs.python.org/3/library/sys.html#sys.get_asyncgen_hooks "sys.get_asyncgen_hooks") and [`sys.set_asyncgen_hooks()`](https://docs.python.org/3/library/sys.html#sys.set_asyncgen_hooks "sys.set_asyncgen_hooks") functions instead. Patch by Victor Stinner.
  * [bpo-46987](https://bugs.python.org/issue?@action=redirect&bpo=46987): Remove private functions `_PySys_GetObjectId()` and `_PySys_SetObjectId()`. Patch by Donghee Na.
  * [bpo-46906](https://bugs.python.org/issue?@action=redirect&bpo=46906): Add new functions to pack and unpack C double (serialize and deserialize): [`PyFloat_Pack2()`](https://docs.python.org/3/c-api/float.html#c.PyFloat_Pack2 "PyFloat_Pack2"), [`PyFloat_Pack4()`](https://docs.python.org/3/c-api/float.html#c.PyFloat_Pack4 "PyFloat_Pack4"), [`PyFloat_Pack8()`](https://docs.python.org/3/c-api/float.html#c.PyFloat_Pack8 "PyFloat_Pack8"), [`PyFloat_Unpack2()`](https://docs.python.org/3/c-api/float.html#c.PyFloat_Unpack2 "PyFloat_Unpack2"), [`PyFloat_Unpack4()`](https://docs.python.org/3/c-api/float.html#c.PyFloat_Unpack4 "PyFloat_Unpack4") and [`PyFloat_Unpack8()`](https://docs.python.org/3/c-api/float.html#c.PyFloat_Unpack8 "PyFloat_Unpack8"). Patch by Victor Stinner.