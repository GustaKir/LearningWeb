Title: Library Updates in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details various bug fixes in Python's standard library, including corrections to the `doctest` module for reporting errors in decorated functions, multiple issues in `format()` when using the C implementation of `Decimal`, and other enhancements.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id102 "Link to this heading")
  * [gh-115392](https://github.com/python/cpython/issues/115392): Fix a bug in [`doctest`](https://docs.python.org/3/library/doctest.html#module-doctest "doctest: Test pieces of code within docstrings.") where incorrect line numbers would be reported for decorated functions.
  * [gh-114563](https://github.com/python/cpython/issues/114563): Fix several [`format()`](https://docs.python.org/3/library/functions.html#format "format") bugs when using the C implementation of [`Decimal`](https://docs.python.org/3/library/decimal.html#decimal.Decimal "decimal.Decimal"): * memory leak in some rare cases when using the `z` format option (coerce negative 0) * incorrect output when applying the `z` format option to type `F` (fixed-point with capital `NAN` / `INF`) * incorrect output when applying the `#` format option (alternate form)
  * [gh-102840](https://github.com/python/cpython/issues/102840): Fix confused traceback when floordiv, mod, or divmod operations happens between instances of [`fractions.Fraction`](https://docs.python.org/3/library/fractions.html#fractions.Fraction "fractions.Fraction") and [`complex`](https://docs.python.org/3/library/functions.html#complex "complex").
  * [gh-115165](https://github.com/python/cpython/issues/115165): Most exceptions are now ignored when attempting to set the `__orig_class__` attribute on objects returned when calling [`typing`](https://docs.python.org/3/library/typing.html#module-typing "typing: Support for type hints \(see :pep:`484`\).") generic aliases (including generic aliases created using [`typing.Annotated`](https://docs.python.org/3/library/typing.html#typing.Annotated "typing.Annotated")). Previously only [`AttributeError`](https://docs.python.org/3/library/exceptions.html#AttributeError "AttributeError") was ignored. Patch by Dave Shawley.
  * [gh-112903](https://github.com/python/cpython/issues/112903): Fix “issubclass() arg 1 must be a class” errors in certain cases of multiple inheritance with generic aliases (regression in early 3.13 alpha releases).
  * [gh-115133](https://github.com/python/cpython/issues/115133): Fix tests for [`XMLPullParser`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLPullParser "xml.etree.ElementTree.XMLPullParser") with Expat 2.6.0.
  * [gh-115059](https://github.com/python/cpython/issues/115059): `io.BufferedRandom.read1()` now flushes the underlying write buffer.
  * [gh-79382](https://github.com/python/cpython/issues/79382): Trailing `**` no longer allows to match files and non-existing paths in recursive [`glob()`](https://docs.python.org/3/library/glob.html#glob.glob "glob.glob").
  * [gh-67837](https://github.com/python/cpython/issues/67837): Avoid race conditions in the creation of directories during concurrent extraction in [`tarfile`](https://docs.python.org/3/library/tarfile.html#module-tarfile "tarfile: Read and write tar-format archive files.") and [`zipfile`](https://docs.python.org/3/library/zipfile.html#module-zipfile "zipfile: Read and write ZIP-format archive files.").
  * [gh-115060](https://github.com/python/cpython/issues/115060): Speed up [`pathlib.Path.glob()`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob "pathlib.Path.glob") by removing redundant regex matching.
  * [gh-97928](https://github.com/python/cpython/issues/97928): Partially revert the behavior of `tkinter.Text.count()`. By default it preserves the behavior of older Python versions, except that setting `wantobjects` to 0 no longer has effect. Add a new parameter _return_ints_ : specifying `return_ints=True` makes `Text.count()` always returning the single count as an integer instead of a 1-tuple or `None`.
  * [gh-114628](https://github.com/python/cpython/issues/114628): When csv.Error is raised when handling TypeError, do not print the TypeError traceback.
  * [gh-85984](https://github.com/python/cpython/issues/85984): Added `_POSIX_VDISABLE` from C’s `<unistd.h>` to [`termios`](https://docs.python.org/3/library/termios.html#module-termios "termios: POSIX style tty control. \(Unix\)").
  * [gh-114965](https://github.com/python/cpython/issues/114965): Update bundled pip to 24.0
  * [gh-114959](https://github.com/python/cpython/issues/114959): [`tarfile`](https://docs.python.org/3/library/tarfile.html#module-tarfile "tarfile: Read and write tar-format archive files.") no longer ignores errors when trying to extract a directory on top of a file.
  * [gh-114894](https://github.com/python/cpython/issues/114894): Add [`array.array.clear()`](https://docs.python.org/3/library/array.html#array.array.clear "array.array.clear").
  * [gh-114071](https://github.com/python/cpython/issues/114071): Support tuple subclasses using auto() for enum member value.
  * [gh-109475](https://github.com/python/cpython/issues/109475): Fix support of explicit option value “–” in [`argparse`](https://docs.python.org/3/libr