Title: Library Modifications in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines various updates made to the Python library, including fixes to inspect.getframeinfo(), ZIP file offsets, recursion errors in curses.textpad.Textbox, weakrefs in collections.OrderedDict, and enhancements to curses.ascii predicates.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id717 "Link to this heading")
  * [bpo-15812](https://bugs.python.org/issue?@action=redirect&bpo=15812): inspect.getframeinfo() now correctly shows the first line of a context. Patch by Sam Breese.
  * [bpo-29094](https://bugs.python.org/issue?@action=redirect&bpo=29094): Offsets in a ZIP file created with extern file object and modes “w” and “x” now are relative to the start of the file.
  * [bpo-13051](https://bugs.python.org/issue?@action=redirect&bpo=13051): Fixed recursion errors in large or resized curses.textpad.Textbox. Based on patch by Tycho Andersen.
  * [bpo-29119](https://bugs.python.org/issue?@action=redirect&bpo=29119): Fix weakrefs in the pure python version of collections.OrderedDict move_to_end() method. Contributed by Andra Bogildea.
  * [bpo-9770](https://bugs.python.org/issue?@action=redirect&bpo=9770): curses.ascii predicates now work correctly with negative integers.
  * [bpo-28427](https://bugs.python.org/issue?@action=redirect&bpo=28427): old keys should not remove new values from WeakValueDictionary when collecting from another thread.
  * [bpo-28923](https://bugs.python.org/issue?@action=redirect&bpo=28923): Remove editor artifacts from Tix.py.
  * [bpo-28871](https://bugs.python.org/issue?@action=redirect&bpo=28871): Fixed a crash when deallocate deep ElementTree.
  * [bpo-19542](https://bugs.python.org/issue?@action=redirect&bpo=19542): Fix bugs in WeakValueDictionary.setdefault() and WeakValueDictionary.pop() when a GC collection happens in another thread.
  * [bpo-20191](https://bugs.python.org/issue?@action=redirect&bpo=20191): Fixed a crash in resource.prlimit() when pass a sequence that doesn’t own its elements as limits.
  * [bpo-28779](https://bugs.python.org/issue?@action=redirect&bpo=28779): multiprocessing.set_forkserver_preload() would crash the forkserver process if a preloaded module instantiated some multiprocessing objects such as locks.
  * [bpo-28847](https://bugs.python.org/issue?@action=redirect&bpo=28847): dbm.dumb now supports reading read-only files and no longer writes the index file when it is not changed.
  * [bpo-25659](https://bugs.python.org/issue?@action=redirect&bpo=25659): In ctypes, prevent a crash calling the from_buffer() and from_buffer_copy() methods on abstract classes like Array.
  * [bpo-28732](https://bugs.python.org/issue?@action=redirect&bpo=28732): Fix crash in os.spawnv() with no elements in args
  * [bpo-28485](https://bugs.python.org/issue?@action=redirect&bpo=28485): Always raise ValueError for negative compileall.compile_dir(workers=…) parameter, even when multithreading is unavailable.
  * [bpo-28387](https://bugs.python.org/issue?@action=redirect&bpo=28387): Fixed possible crash in _io.TextIOWrapper deallocator when the garbage collector is invoked in other thread. Based on patch by Sebastian Cufre.
  * [bpo-27517](https://bugs.python.org/issue?@action=redirect&bpo=27517): LZMA compressor and decompressor no longer raise exceptions if given empty data twice. Patch by Benjamin Fogle.
  * [bpo-28549](https://bugs.python.org/issue?@action=redirect&bpo=28549): Fixed segfault in curses’s addch() with ncurses6.
  * [bpo-28449](https://bugs.python.org/issue?@action=redirect&bpo=28449): tarfile.open() with mode “r” or “r:” now tries to open a tar file with compression before trying to open it without compression. Otherwise it had 50% chance failed with ignore_zeros=True.
  * [bpo-23262](https://bugs.python.org/issue?@action=redirect&bpo=23262): The webbrowser module now supports Firefox 36+ and derived browsers. Based on patch by Oleg Broytman.
  * [bpo-27939](https://bugs.python.org/issue?@action=redirect&bpo=27939): Fixed bugs in tkinter.ttk.LabeledScale and tkinter.Scale caused by representing the scale as float value internally in Tk. tkinter.IntVar now works if float value is set to underlying Tk variable.
  * [bpo-28255](https://bugs.python.org/issue?@action=redirect&bpo=28255): calendar.TextCalendar().prmonth() no longer prints a space at the start of new line after printing a month’s calendar. Patch by Xiang Zhang.
  * [bpo-20491](https://bugs.python.org/issue?@action=redirect&bpo=20491): The textwrap.TextWrapper class now honors non-breaking spaces. Based on patch by Kaarle Ritvanen.
  * [bpo-28353](https://bugs.python.org/issue?@action=redirect&bpo=28353): os.fwalk() no longer fails on broken links.
  * [bpo-25464](https://bugs.python.org/issue?@action=redirect&bpo=25464): Fixed HList.header_exists() in tkinter.tix module by addin a workaround to Tix library bug.
  * [bpo-28488](https://bugs.python.org/issue?@action=redirect&bpo=28488): shutil.make_archive() no longer add entry “./” to ZIP archive.
  * [bpo-24452](https://bugs.python.org/issue?@action=redirect&bpo=24452): Make webbrowser support Chrome on Mac OS X.
  * [bpo-20766](https://bugs.python.org/issue?@action=redirect&bpo=20766): Fix references leaked by pdb in the handling of SIGINT handlers.
  * [bpo-