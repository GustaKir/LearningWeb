Title: Subprocess Popen Behavior and Bug Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details a correction in the `subprocess.Popen` API, where passing `extra_groups=[]` previously failed to trigger a necessary system call in child processes. It also references various bug fixes, including structural corrections for ctypes on Arm, addressing a crash in `socket.if_indextoname()`, and other highlighted issues.
---

If a value of `extra_groups=[]` was passed to [`subprocess.Popen`](https://docs.python.org/3/library/subprocess.html#subprocess.Popen "subprocess.Popen") or related APIs, the underlying `setgroups(0, NULL)` system call to clear the groups list would not be made in the child process prior to `exec()`.
This was identified via code inspection in the process of fixing the first bug.
  * [gh-110190](https://github.com/python/cpython/issues/110190): Fix ctypes structs with array on Arm platform by setting `MAX_STRUCT_SIZE` to 32 in stgdict. Patch by Diego Russo.
  * [gh-81194](https://github.com/python/cpython/issues/81194): Fix a crash in [`socket.if_indextoname()`](https://docs.python.org/3/library/socket.html#socket.if_indextoname "socket.if_indextoname") with specific value (UINT_MAX). Fix an integer overflow in [`socket.if_indextoname()`](https://docs.python.org/3/library/socket.html#socket.if_indextoname "socket.if_indextoname") on 64-bit non-Windows platforms.
  * [gh-112578](https://github.com/python/cpython/issues/112578): Fix a spurious [`RuntimeWarning`](https://docs.python.org/3/library/exceptions.html#RuntimeWarning "RuntimeWarning") when executing the [`zipfile`](https://docs.python.org/3/library/zipfile.html#module-zipfile "zipfile: Read and write ZIP-format archive files.") module.
  * [gh-112516](https://github.com/python/cpython/issues/112516): Update the bundled copy of pip to version 23.3.1.
  * [gh-112510](https://github.com/python/cpython/issues/112510): Add [`readline.backend`](https://docs.python.org/3/library/readline.html#readline.backend "readline.backend") for the backend readline uses (`editline` or `readline`)
  * [gh-112328](https://github.com/python/cpython/issues/112328): [Enum] Make `EnumDict`, `EnumDict.member_names`, `EnumType._add_alias_` and `EnumType._add_value_alias_` public.
  * [gh-112509](https://github.com/python/cpython/issues/112509): Fix edge cases that could cause a key to be present in both the `__required_keys__` and `__optional_keys__` attributes of a [`typing.TypedDict`](https://docs.python.org/3/library/typing.html#typing.TypedDict "typing.TypedDict"). Patch by Jelle Zijlstra.
  * [gh-101336](https://github.com/python/cpython/issues/101336): Add `keep_alive` keyword parameter for `AbstractEventLoop.create_server()` and `BaseEventLoop.create_server()`.
  * [gh-63284](https://github.com/python/cpython/issues/63284): Added support for TLS-PSK (pre-shared key) mode to the [`ssl`](https://docs.python.org/3/library/ssl.html#module-ssl "ssl: TLS/SSL wrapper for socket objects") module.
  * [gh-112414](https://github.com/python/cpython/issues/112414): Fix regression in Python 3.12 where calling [`repr()`](https://docs.python.org/3/library/functions.html#repr "repr") on a module that had been imported using a custom [loader](https://docs.python.org/3/glossary.html#term-loader) could fail with [`AttributeError`](https://docs.python.org/3/library/exceptions.html#AttributeError "AttributeError"). Patch by Alex Waygood.
  * [gh-112358](https://github.com/python/cpython/issues/112358): Revert change to [`struct.Struct`](https://docs.python.org/3/library/struct.html#struct.Struct "struct.Struct") initialization that broke some cases of subclassing.
  * [gh-112405](https://github.com/python/cpython/issues/112405): Optimize [`pathlib.PurePath.relative_to()`](https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.relative_to "pathlib.PurePath.relative_to"). Patch by Alex Waygood.
  * [gh-94722](https://github.com/python/cpython/issues/94722): Fix bug where comparison between instances of [`DocTest`](https://docs.python.org/3/library/doctest.html#doctest.DocTest "doctest.DocTest") fails if one of them has `None` as its lineno.
  * [gh-112361](https://github.com/python/cpython/issues/112361): Speed up a small handful of [`pathlib`](https://docs.python.org/3/library/pathlib.html#module-pathlib "pathlib: Object-oriented filesystem paths") methods by removing some temporary objects.
  * [gh-112345](https://github.com/python/cpython/issues/112345): Improve error message when trying to call [`issubclass()`](https://docs.python.org/3/library/functions.html#issubclass "issubclass") against a [`typing.Protocol`](https://docs.python.org/3/library/typing.html#typing.Protocol "typing.Protocol") that has non-method members. Patch by Randolf Scholz.
  * [gh-112137](https://github.com/python/cpython/issues/112137): Change [`dis`](https://docs.python.org/3/library/dis.html#module-dis "dis: Disassembler for Python bytecode.") output to display no-lineno as “–” instead of “None”.
  * [gh-112332](https://github.com/python/cpython/issues/112332): Deprecate the `exc_type` field of [`traceback.TracebackException`](https://docs.python.org/3/library/traceback.html#traceback.TracebackException "traceback.TracebackException").