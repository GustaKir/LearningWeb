Title: HTTP State Management Mechanism and CookieJar Objects
URL: https://docs.python.org/3/library/http.cookiejar.html
Summary: This document outlines RFCs related to HTTP State Management Mechanisms, including RFC 2109 and RFC 2965, detailing their use of Set-Cookie and Set-Cookie2 headers. It also introduces CookieJar and FileCookieJar objects used for managing cookies in Python.
---

[**RFC 2109**](https://datatracker.ietf.org/doc/html/rfc2109.html) - HTTP State Management Mechanism
    
Obsoleted by [**RFC 2965**](https://datatracker.ietf.org/doc/html/rfc2965.html). Uses _Set-Cookie_ with version=1. 

[**RFC 2965**](https://datatracker.ietf.org/doc/html/rfc2965.html) - HTTP State Management Mechanism
    
The Netscape protocol with the bugs fixed. Uses _Set-Cookie2_ in place of _Set-Cookie_. Not widely used. 

<https://kristol.org/cookie/errata.html>
    
Unfinished errata to [**RFC 2965**](https://datatracker.ietf.org/doc/html/rfc2965.html).
[**RFC 2964**](https://datatracker.ietf.org/doc/html/rfc2964.html) - Use of HTTP State Management
## CookieJar and FileCookieJar Objects[¶](https://docs.python.org/3/library/http.cookiejar.html#cookiejar-and-filecookiejar-objects "Link to this heading")
[`CookieJar`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar "http.cookiejar.CookieJar") objects support the [iterator](https://docs.python.org/3/glossary.html#term-iterator) protocol for iterating over contained [`Cookie`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.Cookie "http.cookiejar.Cookie") objects.
[`CookieJar`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar "http.cookiejar.CookieJar") has the following methods: 

CookieJar.add_cookie_header(_request_)[¶](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar.add_cookie_header "Link to this definition")
    
Add correct _Cookie_ header to _request_.
If policy allows (ie. the `rfc2965` and `hide_cookie2` attributes of the [`CookieJar`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar "http.cookiejar.CookieJar")’s [`CookiePolicy`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookiePolicy "http.cookiejar.CookiePolicy") instance are true and false respectively), the _Cookie2_ header is also added when appropriate.
The _request_ object (usually a [`urllib.request.Request`](https://docs.python.org/3/library/urllib.request.html#urllib.request.Request "urllib.request.Request") instance) must support the methods `get_full_url()`, `has_header()`, `get_header()`, `header_items()`, `add_unredirected_header()` and the attributes `host`, `type`, `unverifiable` and `origin_req_host` as documented by [`urllib.request`](https://docs.python.org/3/library/urllib.request.html#module-urllib.request "urllib.request: Extensible library for opening URLs.").
Changed in version 3.3: _request_ object needs `origin_req_host` attribute. Dependency on a deprecated method `get_origin_req_host()` has been removed. 

CookieJar.extract_cookies(_response_ , _request_)[¶](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar.extract_cookies "Link to this definition")
    
Extract cookies from HTTP _response_ and store them in the [`CookieJar`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar "http.cookiejar.CookieJar"), where allowed by policy.
The [`CookieJar`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar "http.cookiejar.CookieJar") will look for allowable _Set-Cookie_ and _Set-Cookie2_ headers in the _response_ argument, and store cookies as appropriate (subject to the [`CookiePolicy.set_ok()`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookiePolicy.set_ok "http.cookiejar.CookiePolicy.set_ok") method’s approval).
The _response_ object (usually the result of a call to [`urllib.request.urlopen()`](https://docs.python.org/3/library/urllib.request.html#urllib.request.urlopen "urllib.request.urlopen"), or similar) should support an `info()` method, which returns an [`email.message.Message`](https://docs.python.org/3/library/email.compat32-message.html#email.message.Message "email.message.Message") instance.
The _request_ object (usually a [`urllib.request.Request`](https://docs.python.org/3/library/urllib.request.html#urllib.request.Request "urllib.request.Request") instance) must support the method `get_full_url()` and the attributes `host`, `unverifiable` and `origin_req_host`, as documented by [`urllib.request`](https://docs.python.org/3/library/urllib.request.html#module-urllib.request "urllib.request: Extensible library for opening URLs."). The request is used to set default values for cookie-attributes as well as for checking that the cookie is allowed to be set.
Changed in version 3.3: _request_ object needs `origin_req_host` attribute. Dependency on a deprecated method `get_origin_req_host()` has been removed. 

CookieJar.set_policy(_policy_)[¶](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookieJar.set_policy "Link to this definition")
    
Set the [`CookiePolicy`](https://docs.python.org/3/library/http.cookiejar.html#http.cookiejar.CookiePolicy "http.cookiejar.CookiePolicy") instance to be used.