Title: Python 3.5 Updates on smtplib and sndhdr
URL: https://docs.python.org/3/whatsnew/3.5.html
Summary: The `smtplib.SMTP.set_debuglevel` method now allows a debuglevel of 2 to include timestamps. Additionally, `SMTP.sendmail()` and `SMTP.send_message()` methods have been updated to support SMTPUTF8 (RFC 6531). The `sndhdr` module's `what()` and `whathdr()` functions now return a namedtuple.
---

`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP.set_debuglevel "smtplib.SMTP.set_debuglevel") method now accepts an additional debuglevel (2), which enables timestamps in debug messages. (Contributed by Gavin Chappell and Maciej Szulik in [bpo-16914](https://bugs.python.org/issue?@action=redirect&bpo=16914).)
Both the [`SMTP.sendmail()`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP.sendmail "smtplib.SMTP.sendmail") and [`SMTP.send_message()`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP.send_message "smtplib.SMTP.send_message") methods now support [**RFC 6531**](https://datatracker.ietf.org/doc/html/rfc6531.html) (SMTPUTF8). (Contributed by Milan Oberkirch and R. David Murray in [bpo-22027](https://bugs.python.org/issue?@action=redirect&bpo=22027).)
### sndhdr[¶](https://docs.python.org/3/whatsnew/3.5.html#sndhdr "Link to this heading")
The `what()` and `whathdr()` functions now return a [`namedtuple()`](https://docs.python.org/3/library/collections.html#collections.namedtuple "collections.namedtuple"). (Contributed by Claudiu Popa in [bpo-18615](https://bugs.python.org/issue?@action=redirect&bpo=18615).)
### socket[¶](https://docs.python.org/3/whatsnew/3.5.html#socket "Link to this heading")
Functions with timeouts now use a monotonic clock, instead of a system clock. (Contributed by Victor Stinner in [bpo-22043](https://bugs.python.org/issue?@action=redirect&bpo=22043).)
A new [`socket.sendfile()`](https://docs.python.org/3/library/socket.html#socket.socket.sendfile "socket.socket.sendfile") method allows sending a file over a socket by using the high-performance [`os.sendfile()`](https://docs.python.org/3/library/os.html#os.sendfile "os.sendfile") function on UNIX, resulting in uploads being from 2 to 3 times faster than when using plain [`socket.send()`](https://docs.python.org/3/library/socket.html#socket.socket.send "socket.socket.send"). (Contributed by Giampaolo Rodola’ in [bpo-17552](https://bugs.python.org/issue?@action=redirect&bpo=17552).)
The [`socket.sendall()`](https://docs.python.org/3/library/socket.html#socket.socket.sendall "socket.socket.sendall") method no longer resets the socket timeout every time bytes are received or sent. The socket timeout is now the maximum total duration to send all data. (Contributed by Victor Stinner in [bpo-23853](https://bugs.python.org/issue?@action=redirect&bpo=23853).)
The _backlog_ argument of the [`socket.listen()`](https://docs.python.org/3/library/socket.html#socket.socket.listen "socket.socket.listen") method is now optional. By default it is set to [`SOMAXCONN`](https://docs.python.org/3/library/socket.html#socket.SOMAXCONN "socket.SOMAXCONN") or to `128`, whichever is less. (Contributed by Charles-François Natali in [bpo-21455](https://bugs.python.org/issue?@action=redirect&bpo=21455).)
### ssl[¶](https://docs.python.org/3/whatsnew/3.5.html#ssl "Link to this heading")
#### Memory BIO Support[¶](https://docs.python.org/3/whatsnew/3.5.html#memory-bio-support "Link to this heading")
(Contributed by Geert Jansen in [bpo-21965](https://bugs.python.org/issue?@action=redirect&bpo=21965).)
The new [`SSLObject`](https://docs.python.org/3/library/ssl.html#ssl.SSLObject "ssl.SSLObject") class has been added to provide SSL protocol support for cases when the network I/O capabilities of [`SSLSocket`](https://docs.python.org/3/library/ssl.html#ssl.SSLSocket "ssl.SSLSocket") are not necessary or are suboptimal. `SSLObject` represents an SSL protocol instance, but does not implement any network I/O methods, and instead provides a memory buffer interface.