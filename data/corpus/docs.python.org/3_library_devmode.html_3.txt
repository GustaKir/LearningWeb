Title: Handling File Descriptors in Python Development Mode
URL: https://docs.python.org/3/library/devmode.html
Summary: The document discusses the issue of closing file descriptors in Python, highlighting that closing them multiple times leads to a 'Bad file descriptor' error. It advises against using `os.close(fp.fileno())` and suggests opening the file with `closefd=False` as a solution.
---

```

`os.close(fp.fileno())` closes the file descriptor. When the file object finalizer tries to close the file descriptor again, it fails with the `Bad file descriptor` error. A file descriptor must be closed only once. In the worst case scenario, closing it twice can lead to a crash (see [bpo-18748](https://bugs.python.org/issue?@action=redirect&bpo=18748) for an example).
The fix is to remove the `os.close(fp.fileno())` line, or open the file with `closefd=False`.
### [Table of Contents](https://docs.python.org/3/contents.html)
  * [Python Development Mode](https://docs.python.org/3/library/devmode.html)
    * [Effects of the Python Development Mode](https://docs.python.org/3/library/devmode.html#effects-of-the-python-development-mode)
    * [ResourceWarning Example](https://docs.python.org/3/library/devmode.html#resourcewarning-example)
    * [Bad file descriptor error example](https://docs.python.org/3/library/devmode.html#bad-file-descriptor-error-example)


#### Previous topic
[`pydoc` — Documentation generator and online help system](https://docs.python.org/3/library/pydoc.html "previous chapter")
#### Next topic
[`doctest` — Test interactive Python examples](https://docs.python.org/3/library/doctest.html "next chapter")
### This Page
  * [Report a Bug](https://docs.python.org/3/bugs.html)
  * [Show Source ](https://github.com/python/cpython/blob/main/Doc/library/devmode.rst)


«
### Navigation
  * [index](https://docs.python.org/3/genindex.html "General Index")
  * [modules](https://docs.python.org/3/py-modindex.html "Python Module Index") |
  * [next](https://docs.python.org/3/library/doctest.html "doctest — Test interactive Python examples") |
  * [previous](https://docs.python.org/3/library/pydoc.html "pydoc — Documentation generator and online help system") |
  * ![Python logo](https://docs.python.org/3/_static/py.svg)
  * [Python](https://www.python.org/) »
  * EnglishSpanish | españolFrench | françaisItalian | italianoJapanese | 日本語Korean | 한국어Polish | polskiBrazilian Portuguese | Português brasileiroTurkish | TürkçeSimplified Chinese | 简体中文Traditional Chinese | 繁體中文
dev (3.14)3.13.33.123.113.103.93.83.73.63.53.43.33.23.13.02.72.6
  * [3.13.3 Documentation](https://docs.python.org/3/index.html) » 
  * [The Python Standard Library](https://docs.python.org/3/library/index.html) »
  * [Development Tools](https://docs.python.org/3/library/development.html) »
  * [Python Development Mode](https://docs.python.org/3/library/devmode.html)
  * | 
  * Theme  Auto Light Dark |


© [ Copyright ](https://docs.python.org/3/copyright.html) 2001-2025, Python Software Foundation. This page is licensed under the Python Software Foundation License Version 2. Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License. See [History and License](https://docs.python.org/license.html) for more information. The Python Software Foundation is a non-profit corporation. [Please donate.](https://www.python.org/psf/donations/) Last updated on Apr 27, 2025 (05:38 UTC). [Found a bug](https://docs.python.org/bugs.html)? Created using [Sphinx](https://www.sphinx-doc.org/) 8.2.3.