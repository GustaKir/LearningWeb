Title: Critical Section Macros in Python C API
URL: https://docs.python.org/3/c-api/init.html
Summary: This section describes the macros `PyCriticalSection2_Begin` and `Py_END_CRITICAL_SECTION2`, introduced in version 3.13, which manage critical sections in multi-threaded contexts. The macros facilitate the beginning and ending of critical sections, ensuring proper locking mechanisms for Python objects. In a free-threaded build, specific expansions are outlined.
---

```
{
PyCriticalSection2_py_cs2;
PyCriticalSection2_Begin(&_py_cs2,(PyObject*)(a),(PyObject*)(b))

```

In the default build, this macro expands to `{`.
Added in version 3.13. 

Py_END_CRITICAL_SECTION2()[¶](https://docs.python.org/3/c-api/init.html#c.Py_END_CRITICAL_SECTION2 "Link to this definition")
    
Ends the critical section and releases the per-object locks.
In the free-threaded build, this macro expands to:
```
PyCriticalSection2_End(&_py_cs2);
}

```

In the default build, this macro expands to `}`.
Added in version 3.13.
### [Table of Contents](https://docs.python.org/3/contents.html)
  * [Initialization, Finalization, and Threads](https://docs.python.org/3/c-api/init.html)
    * [Before Python Initialization](https://docs.python.org/3/c-api/init.html#before-python-initialization)
    * [Global configuration variables](https://docs.python.org/3/c-api/init.html#global-configuration-variables)
    * [Initializing and finalizing the interpreter](https://docs.python.org/3/c-api/init.html#initializing-and-finalizing-the-interpreter)
    * [Process-wide parameters](https://docs.python.org/3/c-api/init.html#process-wide-parameters)
    * [Thread State and the Global Interpreter Lock](https://docs.python.org/3/c-api/init.html#thread-state-and-the-global-interpreter-lock)
      * [Releasing the GIL from extension code](https://docs.python.org/3/c-api/init.html#releasing-the-gil-from-extension-code)
      * [Non-Python created threads](https://docs.python.org/3/c-api/init.html#non-python-created-threads)
      * [Cautions about fork()](https://docs.python.org/3/c-api/init.html#cautions-about-fork)
      * [High-level API](https://docs.python.org/3/c-api/init.html#high-level-api)
      * [Low-level API](https://docs.python.org/3/c-api/init.html#low-level-api)
    * [Sub-interpreter support](https://docs.python.org/3/c-api/init.html#sub-interpreter-support)
      * [A Per-Interpreter GIL](https://docs.python.org/3/c-api/init.html#a-per-interpreter-gil)
      * [Bugs and caveats](https://docs.python.org/3/c-api/init.html#bugs-and-caveats)
    * [Asynchronous Notifications](https://docs.python.org/3/c-api/init.html#asynchronous-notifications)
    * [Profiling and Tracing](https://docs.python.org/3/c-api/init.html#profiling-and-tracing)
    * [Reference tracing](https://docs.python.org/3/c-api/init.html#reference-tracing)
    * [Advanced Debugger Support](https://docs.python.org/3/c-api/init.html#advanced-debugger-support)
    * [Thread Local Storage Support](https://docs.python.org/3/c-api/init.html#thread-local-storage-support)
      * [Thread Specific Storage (TSS) API](https://docs.python.org/3/c-api/init.html#thread-specific-storage-tss-api)
        * [Dynamic Allocation](https://docs.python.org/3/c-api/init.html#dynamic-allocation)
        * [Methods](https://docs.python.org/3/c-api/init.html#methods)
      * [Thread Local Storage (TLS) API](https://docs.python.org/3/c-api/init.html#thread-local-storage-tls-api)
    * [Synchronization Primitives](https://docs.python.org/3/c-api/init.html#synchronization-primitives)
      * [Python Critical Section API](https://docs.python.org/3/c-api/init.html#python-critical-section-api)


#### Previous topic
[Objects for Type Hinting](https://docs.python.org/3/c-api/typehints.html "previous chapter")
#### Next topic
[Python Initialization Configuration](https://docs.python.org/3/c-api/init_config.html "next chapter")
### This Page
  * [Report a Bug](https://docs.python.org/3/bugs.html)
  * [Show Source ](https://github.com/python/cpython/blob/main/Doc/c-api/init.rst)


«
### Navigation
  * [index](https://docs.python.org/3/genindex.html "General Index")
  * [modules](https://docs.python.org/3/py-modindex.html "Python Module Index") |
  * [next](https://docs.python.org/3/c-api/init_config.html "Python Initialization Configuration") |
  * [previous](https://docs.python.org/3/c-api/typehints.html "Objects for Type Hinting") |
  * ![Python logo](https://docs.python.org/3/_static/py.svg)
  * [Python](https://www.python.org/) »
  * EnglishSpanish | españolFrench | françaisItalian | italianoJapanese | 日本語Korean | 한국어Polish | polskiBrazilian Portuguese | Português brasileiroTurkish | TürkçeSimplified Chinese | 简体中文Traditional Chinese | 繁體中文
dev (3.14)3.13.33.123.113.103.93.83.73.63.53.43.33.23.13.02.72.6
  * [3.13.3 Documentation](https://docs.python.org/3/index.html) » 
  * [Python/C API Reference Manual](https://docs.python.org/3/c-api/index.html) »
  * [Initialization, Finalization, and Threads](https://docs.python.org/3/c-api/init.html)
  * | 
  * Theme  Auto Light Dark |