Title: Python 3 Update: Regular Expressions and Bug Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document chunk outlines recent changes in Python 3, including modifications to regular expression patterns related to set operations, implementation of a fast sendfile in the Windows proactor event loop, fixes for deadlock issues in subprocess on POSIX systems, and updates to the ctypes module for direct linking on certain platforms.
---

patterns which contain set operations. Sets starting with ‘[’ or containing ‘–’, ‘&&’, ‘~~’ or ‘||’ will be interpreted differently in regular expressions in future versions. Currently they emit warnings. fnmatch.translate() now avoids producing patterns containing such sets by accident.
  * [bpo-32622](https://bugs.python.org/issue?@action=redirect&bpo=32622): Implement native fast sendfile for Windows proactor event loop.
  * [bpo-32777](https://bugs.python.org/issue?@action=redirect&bpo=32777): Fix a rare but potential pre-exec child process deadlock in subprocess on POSIX systems when marking file descriptors inheritable on exec in the child process. This bug appears to have been introduced in 3.4.
  * [bpo-32647](https://bugs.python.org/issue?@action=redirect&bpo=32647): The ctypes module used to depend on indirect linking for dlopen. The shared extension is now explicitly linked against libdl on platforms with dl.
  * [bpo-32741](https://bugs.python.org/issue?@action=redirect&bpo=32741): Implement `asyncio.TimerHandle.when()` method.
  * [bpo-32691](https://bugs.python.org/issue?@action=redirect&bpo=32691): Use mod_spec.parent when running modules with pdb
  * [bpo-32734](https://bugs.python.org/issue?@action=redirect&bpo=32734): Fixed `asyncio.Lock()` safety issue which allowed acquiring and locking the same lock multiple times, without it being free. Patch by Bar Harel.
  * [bpo-32727](https://bugs.python.org/issue?@action=redirect&bpo=32727): Do not include name field in SMTP envelope from address. Patch by Stéphane Wirtel
  * [bpo-31453](https://bugs.python.org/issue?@action=redirect&bpo=31453): Add TLSVersion constants and SSLContext.maximum_version / minimum_version attributes. The new API wraps OpenSSL 1.1 <https://web.archive.org/web/20180309043602/https://www.openssl.org/docs/man1.1.0/ssl/SSL_CTX_set_min_proto_version.html> feature.
  * [bpo-24334](https://bugs.python.org/issue?@action=redirect&bpo=24334): Internal implementation details of ssl module were cleaned up. The SSLSocket has one less layer of indirection. Owner and session information are now handled by the SSLSocket and SSLObject constructor. Channel binding implementation has been simplified.
  * [bpo-31848](https://bugs.python.org/issue?@action=redirect&bpo=31848): Fix the error handling in Aifc_read.initfp() when the SSND chunk is not found. Patch by Zackery Spytz.
  * [bpo-32585](https://bugs.python.org/issue?@action=redirect&bpo=32585): Add Ttk spinbox widget to [`tkinter.ttk`](https://docs.python.org/3/library/tkinter.ttk.html#module-tkinter.ttk "tkinter.ttk: Tk themed widget set"). Patch by Alan D Moore.
  * [bpo-32221](https://bugs.python.org/issue?@action=redirect&bpo=32221): Various functions returning tuple containing IPv6 addresses now omit `%scope` part since the same information is already encoded in _scopeid_ tuple item. Especially this speeds up `socket.recvfrom()` when it receives multicast packet since useless resolving of network interface name is omitted.
  * [bpo-30693](https://bugs.python.org/issue?@action=redirect&bpo=30693): The TarFile class now recurses directories in a reproducible way.
  * [bpo-30693](https://bugs.python.org/issue?@action=redirect&bpo=30693): The ZipFile class now recurses directories in a reproducible way.


### Documentation[¶](https://docs.python.org/3/whatsnew/changelog.html#id522 "Link to this heading")
  * [bpo-28124](https://bugs.python.org/issue?@action=redirect&bpo=28124): The ssl module function ssl.wrap_socket() has been de-emphasized and deprecated in favor of the more secure and efficient SSLContext.wrap_socket() method.
  * [bpo-17232](https://bugs.python.org/issue?@action=redirect&bpo=17232): Clarify docs for -O and -OO. Patch by Terry Reedy.
  * [bpo-32436](https://bugs.python.org/issue?@action=redirect&bpo=32436): Add documentation for the contextvars module (PEP 567).
  * [bpo-32800](https://bugs.python.org/issue?@action=redirect&bpo=32800): Update link to w3c doc for xml default namespaces.
  * [bpo-11015](https://bugs.python.org/issue?@action=redirect&bpo=11015): Update [`test.support`](https://docs.python.org/3/library/test.html#module-test.support "test.support: Support for Python's regression test suite.") documentation.
  * [bpo-8722](https://bugs.python.org/issue?@action=redirect&bpo=8722): Document `__getattr__()` behavior when property `get()` method raises [`AttributeError`](https://docs.python.org/3/library/exceptions.html#AttributeError "AttributeError").
  * [bpo-32614](https://bugs.python.org/issue?@action=redirect&bpo=32614): Modify RE examples in documentation to use raw strings to prevent [`DeprecationWarning`](https://docs.python.org/3/library/exceptions.html#DeprecationWarning "DeprecationWarning") and add text to REGEX HOWTO to highlight the deprecation.
  * [bpo-31972](https://bugs.python.org/issue?@action=redirect&bpo=31972): Improve docstrings for `pathlib.PurePath` subclasses.