Title: Testing Enhancements in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines several enhancements in Python's testing framework, including updates to test.support.HOST, improvements to SSL testing, and changes in OpenSSL protocol handling. Notable changes involve the addition of HOSTv4, adjustments to PROTOCOL_TLS configurations, and updates to the regrtest functionalities.
---

### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id564 "Link to this heading")
  * [bpo-29639](https://bugs.python.org/issue?@action=redirect&bpo=29639): test.support.HOST is now “localhost”, a new HOSTv4 constant has been added for your `127.0.0.1` needs, similar to the existing HOSTv6 constant.
  * [bpo-31320](https://bugs.python.org/issue?@action=redirect&bpo=31320): Silence traceback in test_ssl
  * [bpo-31346](https://bugs.python.org/issue?@action=redirect&bpo=31346): Prefer PROTOCOL_TLS_CLIENT and PROTOCOL_TLS_SERVER protocols for SSLContext.
  * [bpo-25674](https://bugs.python.org/issue?@action=redirect&bpo=25674): Remove sha256.tbs-internet.com ssl test
  * [bpo-30715](https://bugs.python.org/issue?@action=redirect&bpo=30715): Address ALPN callback changes for OpenSSL 1.1.0f. The latest version behaves like OpenSSL 1.0.2 and no longer aborts handshake.
  * [bpo-30822](https://bugs.python.org/issue?@action=redirect&bpo=30822): regrtest: Exclude tzdata from regrtest –all. When running the test suite using –use=all / -u all, exclude tzdata since it makes test_datetime too slow (15-20 min on some buildbots) which then times out on some buildbots. Fix also regrtest command line parser to allow passing -u extralargefile to run test_zipfile64.
  * [bpo-30695](https://bugs.python.org/issue?@action=redirect&bpo=30695): Add the `set_nomemory(start, stop)` and `remove_mem_hooks()` functions to the `_testcapi` module.
  * [bpo-30357](https://bugs.python.org/issue?@action=redirect&bpo=30357): test_thread: setUp() now uses support.threading_setup() and support.threading_cleanup() to wait until threads complete to avoid random side effects on following tests. Initial patch written by Grzegorz Grzywacz.
  * [bpo-30197](https://bugs.python.org/issue?@action=redirect&bpo=30197): Enhanced functions swap_attr() and swap_item() in the test.support module. They now work when delete replaced attribute or item inside the with statement. The old value of the attribute or item (or None if it doesn’t exist) now will be assigned to the target of the “as” clause, if there is one.
  * [bpo-24932](https://bugs.python.org/issue?@action=redirect&bpo=24932): Use proper command line parsing in _testembed
  * [bpo-28950](https://bugs.python.org/issue?@action=redirect&bpo=28950): Disallow -j0 to be combined with -T/-l in regrtest command line arguments.
  * [bpo-28683](https://bugs.python.org/issue?@action=redirect&bpo=28683): Fix the tests that bind() a unix socket and raise PermissionError on Android for a non-root user.
  * [bpo-26936](https://bugs.python.org/issue?@action=redirect&bpo=26936): Fix the test_socket failures on Android - getservbyname(), getservbyport() and getaddrinfo() are broken on some Android API levels.
  * [bpo-28666](https://bugs.python.org/issue?@action=redirect&bpo=28666): Now test.support.rmtree is able to remove unwritable or unreadable directories.
  * [bpo-23839](https://bugs.python.org/issue?@action=redirect&bpo=23839): Various caches now are cleared before running every test file.
  * [bpo-26944](https://bugs.python.org/issue?@action=redirect&bpo=26944): Fix test_posix for Android where ‘id -G’ is entirely wrong or missing the effective gid.
  * [bpo-28409](https://bugs.python.org/issue?@action=redirect&bpo=28409): regrtest: fix the parser of command line arguments.
  * [bpo-28217](https://bugs.python.org/issue?@action=redirect&bpo=28217): Adds _testconsole module to test console input.
  * [bpo-26939](https://bugs.python.org/issue?@action=redirect&bpo=26939): Add the support.setswitchinterval() function to fix test_functools hanging on the Android armv7 qemu emulator.