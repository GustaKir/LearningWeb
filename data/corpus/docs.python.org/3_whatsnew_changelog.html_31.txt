Title: Python Documentation Changelog: Security and Library Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section of the Python changelog details significant updates related to security and library enhancements. Key security fixes include upgrading libexpat, modifying `sys.path` in PyREPL, and consistent behavior changes in the `ipaddress.IPv6Address` class. Updates in the library include adjustments to `pdb.set_trace()` function behavior.
---

### Security[¶](https://docs.python.org/3/whatsnew/changelog.html#id21 "Link to this heading")
  * [gh-126623](https://github.com/python/cpython/issues/126623): Upgrade libexpat to 2.6.4
  * [gh-125140](https://github.com/python/cpython/issues/125140): Remove the current directory from `sys.path` when using PyREPL.
  * [gh-122792](https://github.com/python/cpython/issues/122792): Changed IPv4-mapped `ipaddress.IPv6Address` to consistently use the mapped IPv4 address value for deciding properties. Properties which have their behavior fixed are `is_multicast`, `is_reserved`, `is_link_local`, `is_global`, and `is_unspecified`.


### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id22 "Link to this heading")
  * [gh-127321](https://github.com/python/cpython/issues/127321): [`pdb.set_trace()`](https://docs.python.org/3/library/pdb.html#pdb.set_trace "pdb.set_trace") will not stop at an opcode that does not have an associated line number anymore.
  * [gh-127303](https://github.com/python/cpython/issues/127303): Publicly expose [`EXACT_TOKEN_TYPES`](https://docs.python.org/3/library/token.html#token.EXACT_TOKEN_TYPES "token.EXACT_TOKEN_TYPES") in `token.__all__`.
  * [gh-123967](https://github.com/python/cpython/issues/123967): Fix faulthandler for trampoline frames. If the top-most frame is a trampoline frame, skip it. Patch by Victor Stinner.
  * [gh-127182](https://github.com/python/cpython/issues/127182): Fix `io.StringIO.__setstate__()` crash, when [`None`](https://docs.python.org/3/library/constants.html#None "None") was passed as the first value.
  * [gh-127217](https://github.com/python/cpython/issues/127217): Fix [`urllib.request.pathname2url()`](https://docs.python.org/3/library/urllib.request.html#urllib.request.pathname2url "urllib.request.pathname2url") for paths starting with multiple slashes on Posix.
  * [gh-127035](https://github.com/python/cpython/issues/127035): Fix [`shutil.which`](https://docs.python.org/3/library/shutil.html#shutil.which "shutil.which") on Windows. Now it looks at direct match if and only if the command ends with a PATHEXT extension or X_OK is not in mode. Support extensionless files if “.” is in PATHEXT. Support PATHEXT extensions that end with a dot.
  * [gh-122273](https://github.com/python/cpython/issues/122273): Support PyREPL history on Windows. Patch by devdanzin and Victor Stinner.
  * [gh-127078](https://github.com/python/cpython/issues/127078): Fix issue where [`urllib.request.url2pathname()`](https://docs.python.org/3/library/urllib.request.html#urllib.request.url2pathname "urllib.request.url2pathname") failed to discard an extra slash before a UNC drive in the URL path on Windows.
  * [gh-126766](https://github.com/python/cpython/issues/126766): Fix issue where [`urllib.request.url2pathname()`](https://docs.python.org/3/library/urllib.request.html#urllib.request.url2pathname "urllib.request.url2pathname") failed to discard any ‘localhost’ authority present in the URL.
  * [gh-127065](https://github.com/python/cpython/issues/127065): Fix crash when calling a [`operator.methodcaller()`](https://docs.python.org/3/library/operator.html#operator.methodcaller "operator.methodcaller") instance from multiple threads in the free threading build.
  * [gh-126997](https://github.com/python/cpython/issues/126997): Fix support of STRING and GLOBAL opcodes with non-ASCII arguments in [`pickletools`](https://docs.python.org/3/library/pickletools.html#module-pickletools "pickletools: Contains extensive comments about the pickle protocols and pickle-machine opcodes, as well as some useful functions."). [`pickletools.dis()`](https://docs.python.org/3/library/pickletools.html#pickletools.dis "pickletools.dis") now outputs non-ASCII bytes in STRING, BINSTRING and SHORT_BINSTRING arguments as escaped (`\xXX`).
  * [gh-126316](https://github.com/python/cpython/issues/126316): [`grp`](https://docs.python.org/3/library/grp.html#module-grp "grp: The group database \(getgrnam\(\) and friends\). \(Unix\)"): Make [`grp.getgrall()`](https://docs.python.org/3/library/grp.html#grp.getgrall "grp.getgrall") thread-safe by adding a mutex. Patch by Victor Stinner.
  * [gh-126618](https://github.com/python/cpython/issues/126618): Fix the representation of [`itertools.count`](https://docs.python.org/3/library/itertools.html#itertools.count "itertools.count") objects when the count value is [`sys.maxsize`](https://docs.python.org/3/library/sys.html#sys.maxsize "sys.maxsize").
  * [gh-85168](https://github.com/python/cpython/issues/85168): Fix issue where [`urllib.request.url2pathname()`](https://docs.python.org/3/library/urllib.request.html#urllib.request.url2pathname "urllib.request.url2pathname") and [`pathname2url()`](https://docs.python.org/3/library/urllib.request.html#urllib.request.pathname2url "urllib.request.pathname2url") always used UTF-8 when quoting and unquoting file URIs. They now use the [filesystem encoding and error handler](https://docs.python.org/3/glossary.html#term