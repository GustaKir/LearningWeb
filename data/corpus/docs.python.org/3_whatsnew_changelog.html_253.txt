Title: Python 3 Changes and Improvements
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document section outlines various changes made in Python 3, including enhancements to `os.get_terminal_size()`, adjustments to `py.exe` for virtual environment preferences, the disabling of incremental linking for non-Debug builds, and improvements in the `asyncio` module to prevent `RuntimeError` on interpreter exit.
---

ows ARM64.
  * [gh-43414](https://github.com/python/cpython/issues/43414): [`os.get_terminal_size()`](https://docs.python.org/3/library/os.html#os.get_terminal_size "os.get_terminal_size") now attempts to read the size from any provided handle, rather than only supporting file descriptors 0, 1 and 2.
  * [gh-92817](https://github.com/python/cpython/issues/92817): Ensures that `py.exe` will prefer an active virtual environment over default tags specified with environment variables or through a `py.ini` file.
  * [gh-92984](https://github.com/python/cpython/issues/92984): Explicitly disable incremental linking for non-Debug builds
  * [gh-92841](https://github.com/python/cpython/issues/92841): [`asyncio`](https://docs.python.org/3/library/asyncio.html#module-asyncio "asyncio: Asynchronous I/O.") no longer throws `RuntimeError: Event loop is closed` on interpreter exit after asynchronous socket activity. Patch by Oleg Iarygin.
  * [bpo-46907](https://bugs.python.org/issue?@action=redirect&bpo=46907): Update Windows installer to use SQLite 3.38.4.
  * [gh-91061](https://github.com/python/cpython/issues/91061): Accept os.PathLike for the argument to winsound.PlaySound
  * [bpo-42658](https://bugs.python.org/issue?@action=redirect&bpo=42658): Support native Windows case-insensitive path comparisons by using `LCMapStringEx` instead of [`str.lower()`](https://docs.python.org/3/library/stdtypes.html#str.lower "str.lower") in `ntpath.normcase()`. Add `LCMapStringEx` to the `_winapi` module.
  * [bpo-38704](https://bugs.python.org/issue?@action=redirect&bpo=38704): Prevent installation on unsupported Windows versions.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id212 "Link to this heading")
  * [gh-97897](https://github.com/python/cpython/issues/97897): The macOS 13 SDK includes support for the `mkfifoat` and `mknodat` system calls. Using the `dir_fd` option with either [`os.mkfifo()`](https://docs.python.org/3/library/os.html#os.mkfifo "os.mkfifo") or [`os.mknod()`](https://docs.python.org/3/library/os.html#os.mknod "os.mknod") could result in a segfault if cpython is built with the macOS 13 SDK but run on an earlier version of macOS. Prevent this by adding runtime support for detection of these system calls (“weaklinking”) as is done for other newer syscalls on macOS.


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id213 "Link to this heading")
  * [gh-97527](https://github.com/python/cpython/issues/97527): Fix a bug in the previous bugfix that caused IDLE to not start when run with 3.10.8, 3.12.0a1, and at least Microsoft Python 3.10.2288.0 installed without the Lib/test package. 3.11.0 was never affected.
  * [gh-65802](https://github.com/python/cpython/issues/65802): Document handling of extensions in Save As dialogs.
  * [gh-95191](https://github.com/python/cpython/issues/95191): Include prompts when saving Shell (interactive input and output).
  * [gh-95511](https://github.com/python/cpython/issues/95511): Fix the Shell context menu copy-with-prompts bug of copying an extra line when one selects whole lines.
  * [gh-95471](https://github.com/python/cpython/issues/95471): In the Edit menu, move `Select All` and add a new separator.
  * [gh-95411](https://github.com/python/cpython/issues/95411): Enable using IDLE’s module browser with .pyw files.
  * [gh-89610](https://github.com/python/cpython/issues/89610): Add .pyi as a recognized extension for IDLE on macOS. This allows opening stub files by double clicking on them in the Finder.