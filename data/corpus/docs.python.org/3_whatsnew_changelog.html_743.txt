Title: Changes and Bug Fixes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document outlines various updates and bug fixes in Python, including improvements to time.sleep() behavior upon signal interruption, _strptime handling for week 0 days, reference management in NamedTemporaryFile iterator, picklability of unittest fake test cases, and enhancements to os.urandom() on Linux systems.
---

time.sleep() is interrupted by a signal, the sleep is now retried with the recomputed delay, except if the signal handler raises an exception (PEP 475).
  * [bpo-23136](https://bugs.python.org/issue?@action=redirect&bpo=23136): _strptime now uniformly handles all days in week 0, including Dec 30 of previous year. Based on patch by Jim Carroll.
  * [bpo-23700](https://bugs.python.org/issue?@action=redirect&bpo=23700): Iterator of NamedTemporaryFile now keeps a reference to NamedTemporaryFile instance. Patch by Bohuslav Kabrda.
  * [bpo-22903](https://bugs.python.org/issue?@action=redirect&bpo=22903): The fake test case created by unittest.loader when it fails importing a test module is now picklable.
  * [bpo-22181](https://bugs.python.org/issue?@action=redirect&bpo=22181): On Linux, os.urandom() now uses the new getrandom() syscall if available, syscall introduced in the Linux kernel 3.17. It is more reliable and more secure, because it avoids the need of a file descriptor and waits until the kernel has enough entropy.
  * [bpo-2211](https://bugs.python.org/issue?@action=redirect&bpo=2211): Updated the implementation of the http.cookies.Morsel class. Setting attributes key, value and coded_value directly now is deprecated. update() and setdefault() now transform and check keys. Comparing for equality now takes into account attributes key, value and coded_value. copy() now returns a Morsel, not a dict. repr() now contains all attributes. Optimized checking keys and quoting values. Added new tests. Original patch by Demian Brecht.
  * [bpo-18983](https://bugs.python.org/issue?@action=redirect&bpo=18983): Allow selection of output units in timeit. Patch by Julian Gindi.
  * [bpo-23631](https://bugs.python.org/issue?@action=redirect&bpo=23631): Fix traceback.format_list when a traceback has been mutated.
  * [bpo-23568](https://bugs.python.org/issue?@action=redirect&bpo=23568): Add rdivmod support to MagicMock() objects. Patch by Håkan Lövdahl.
  * [bpo-2052](https://bugs.python.org/issue?@action=redirect&bpo=2052): Add charset parameter to HtmlDiff.make_file().
  * [bpo-23668](https://bugs.python.org/issue?@action=redirect&bpo=23668): Support os.truncate and os.ftruncate on Windows.
  * [bpo-23138](https://bugs.python.org/issue?@action=redirect&bpo=23138): Fixed parsing cookies with absent keys or values in cookiejar. Patch by Demian Brecht.
  * [bpo-23051](https://bugs.python.org/issue?@action=redirect&bpo=23051): multiprocessing.Pool methods imap() and imap_unordered() now handle exceptions raised by an iterator. Patch by Alon Diamant and Davin Potts.
  * [bpo-23581](https://bugs.python.org/issue?@action=redirect&bpo=23581): Add matmul support to MagicMock. Patch by Håkan Lövdahl.
  * [bpo-23566](https://bugs.python.org/issue?@action=redirect&bpo=23566): enable(), register(), dump_traceback() and dump_traceback_later() functions of faulthandler now accept file descriptors. Patch by Wei Wu.
  * [bpo-22928](https://bugs.python.org/issue?@action=redirect&bpo=22928): Disabled HTTP header injections in http.client. Original patch by Demian Brecht.
  * [bpo-23615](https://bugs.python.org/issue?@action=redirect&bpo=23615): Modules bz2, tarfile and tokenize now can be reloaded with imp.reload(). Patch by Thomas Kluyver.
  * [bpo-23605](https://bugs.python.org/issue?@action=redirect&bpo=23605): os.walk() now calls os.scandir() instead of os.listdir(). The usage of os.scandir() reduces the number of calls to os.stat(). Initial patch written by Ben Hoyt.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id783 "Link to this heading")
  * [bpo-23585](https://bugs.python.org/issue?@action=redirect&bpo=23585): make patchcheck will ensure the interpreter is built.


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id784 "Link to this heading")
  * [bpo-23583](https://bugs.python.org/issue?@action=redirect&bpo=23583): Added tests for standard IO streams in IDLE.
  * [bpo-22289](https://bugs.python.org/issue?@action=redirect&bpo=22289): Prevent test_urllib2net failures due to ftp connection timeout.


### Tools/Demos[¶](https://docs.python.org/3/whatsnew/changelog.html#id785 "Link to this heading")
  * [bpo-22826](https://bugs.python.org/issue?@action=redirect&bpo=22826): The result of open() in Tools/freeze/bkfile.py is now better compatible with regular files (in particular it now supports the context management protocol).


## Python 3.5.0 alpha 2[¶](https://docs.python.org/3/whatsnew/changelog.html#python-3-5-0-alpha-2 "Link to this heading")
_Release date: 2015-03-09_
### Core and Builtins[¶](https://docs.python.org/3/whatsnew/changelog.html#id786 "Link to this heading")
  * [bpo-23571](https://bugs.python.org/issue?@action=redirect&bpo=23571): PyObject_Call() and PyCFunction_Call() now raise a SystemError if a function returns a result and raises an exception. The SystemError is chained to the previous exception.