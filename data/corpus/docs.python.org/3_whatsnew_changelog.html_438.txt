Title: Core and Builtins Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent updates and bug fixes in Python's core and built-ins, including a fix for a use-after-free error in `issubclass()`, enhancements to the clinic tool, and enabling `os.chroot()` on HP-UX systems.
---

### Core and Builtins[¶](https://docs.python.org/3/whatsnew/changelog.html#id400 "Link to this heading")
  * [bpo-39382](https://bugs.python.org/issue?@action=redirect&bpo=39382): Fix a use-after-free in the single inheritance path of `issubclass()`, when the `__bases__` of an object has a single reference, and so does its first item. Patch by Yonatan Goldschmidt.
  * [bpo-39573](https://bugs.python.org/issue?@action=redirect&bpo=39573): Update clinic tool to use [`Py_IS_TYPE()`](https://docs.python.org/3/c-api/structures.html#c.Py_IS_TYPE "Py_IS_TYPE"). Patch by Donghee Na.
  * [bpo-39619](https://bugs.python.org/issue?@action=redirect&bpo=39619): Enable use of [`os.chroot()`](https://docs.python.org/3/library/os.html#os.chroot "os.chroot") on HP-UX systems.
  * [bpo-39573](https://bugs.python.org/issue?@action=redirect&bpo=39573): Add [`Py_IS_TYPE()`](https://docs.python.org/3/c-api/structures.html#c.Py_IS_TYPE "Py_IS_TYPE") static inline function to check whether the object _o_ type is _type_.
  * [bpo-39606](https://bugs.python.org/issue?@action=redirect&bpo=39606): Fix regression caused by fix for [bpo-39386](https://bugs.python.org/issue?@action=redirect&bpo=39386), that prevented calling `aclose` on an async generator that had already been closed or exhausted.
  * [bpo-39579](https://bugs.python.org/issue?@action=redirect&bpo=39579): Change the ending column offset of `Attribute` nodes constructed in `ast_for_dotted_name` to point at the end of the current node and not at the end of the last `NAME` node.
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port _crypt extension module to multiphase initialization ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port _contextvars extension module to multiphase initialization ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-39510](https://bugs.python.org/issue?@action=redirect&bpo=39510): Fix segfault in `readinto()` method on closed BufferedReader.
  * [bpo-39502](https://bugs.python.org/issue?@action=redirect&bpo=39502): Fix [`time.localtime()`](https://docs.python.org/3/library/time.html#time.localtime "time.localtime") on 64-bit AIX to support years before 1902 and after 2038. Patch by M Felt.
  * [bpo-39492](https://bugs.python.org/issue?@action=redirect&bpo=39492): Fix a reference cycle in the C Pickler that was preventing the garbage collection of deleted, pickled objects.
  * [bpo-39453](https://bugs.python.org/issue?@action=redirect&bpo=39453): Fixed a possible crash in `list.__contains__()` when a list is changed during comparing items. Patch by Donghee Na.
  * [bpo-39434](https://bugs.python.org/issue?@action=redirect&bpo=39434): [floor division](https://docs.python.org/3/glossary.html#term-floor-division) of float operation now has a better performance. Also the message of [`ZeroDivisionError`](https://docs.python.org/3/library/exceptions.html#ZeroDivisionError "ZeroDivisionError") for this operation is updated. Patch by Donghee Na.
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port _codecs extension module to multiphase initialization ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port _bz2 extension module to multiphase initialization ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-1635741](https://bugs.python.org/issue?@action=redirect&bpo=1635741): Port _abc extension module to multiphase initialization ([**PEP 489**](https://peps.python.org/pep-0489/)).
  * [bpo-39320](https://bugs.python.org/issue?@action=redirect&bpo=39320): Replace two complex bytecodes for building dicts with two simpler ones. The new bytecodes `DICT_MERGE` and `DICT_UPDATE` have been added The old bytecodes `BUILD_MAP_UNPACK` and `BUILD_MAP_UNPACK_WITH_CALL` have been removed.
  * [bpo-39219](https://bugs.python.org/issue?@action=redirect&bpo=39219): Syntax errors raised in the tokenizer now always set correct “text” and “offset” attributes.
  * [bpo-36051](https://bugs.python.org/issue?@action=redirect&bpo=36051): Drop the GIL during large `bytes.join` operations. Patch by Bruce Merry.
  * [bpo-38960](https://bugs.python.org/issue?@action=redirect&bpo=38960): Fix DTrace build issues on FreeBSD. Patch by David Carlier.
  * [bpo-37207](https://bugs.python.org/issue?@action=redirect&bpo=37207): Speed up calls to `range()` by about 30%, by using the PEP 590 `vectorcall` calling convention. Patch by Mark Shannon.
  * [bpo-36144](https://bugs.python.org/issue?@action=redirect&bpo=36144): [`dict`](https://docs.python.org/3/library/stdtypes.html#dict "dict") (and [`collections.UserDict`](https://docs.python.org/3/library/collections.html#collections.UserDict "collections.UserDict")) objects now support PEP 584’s merge (`|`) and update (`|=`) operators. Patch by Brandt Bucher.
  * [bpo-32856](https://bugs.python.org/issue?@a