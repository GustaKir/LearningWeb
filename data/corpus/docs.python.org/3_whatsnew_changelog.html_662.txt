Title: Python Change Log Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document summarizes several bug fixes and improvements in Python, including handling of UnboundLocalError in socket operations, enhancements to Windows os.stat() function, improved regex warning messages, and updates to the urllib.parse module for WebSocket support.
---

n win32_ver().
  * Fix UnboundLocalError in socket._sendfile_use_sendfile.
  * [bpo-28075](https://bugs.python.org/issue?@action=redirect&bpo=28075): Check for ERROR_ACCESS_DENIED in Windows implementation of os.stat(). Patch by Eryk Sun.
  * [bpo-22493](https://bugs.python.org/issue?@action=redirect&bpo=22493): Warning message emitted by using inline flags in the middle of regular expression now contains a (truncated) regex pattern. Patch by Tim Graham.
  * [bpo-25270](https://bugs.python.org/issue?@action=redirect&bpo=25270): Prevent codecs.escape_encode() from raising SystemError when an empty bytestring is passed.
  * [bpo-28181](https://bugs.python.org/issue?@action=redirect&bpo=28181): Get antigravity over HTTPS. Patch by Kaartic Sivaraam.
  * [bpo-25895](https://bugs.python.org/issue?@action=redirect&bpo=25895): Enable WebSocket URL schemes in urllib.parse.urljoin. Patch by Gergely Imreh and Markus Holtermann.
  * [bpo-28114](https://bugs.python.org/issue?@action=redirect&bpo=28114): Fix a crash in parse_envlist() when env contains byte strings. Patch by Eryk Sun.
  * [bpo-27599](https://bugs.python.org/issue?@action=redirect&bpo=27599): Fixed buffer overrun in binascii.b2a_qp() and binascii.a2b_qp().
  * [bpo-27906](https://bugs.python.org/issue?@action=redirect&bpo=27906): Fix socket accept exhaustion during high TCP traffic. Patch by Kevin Conway.
  * [bpo-28174](https://bugs.python.org/issue?@action=redirect&bpo=28174): Handle when SO_REUSEPORT isn’t properly supported. Patch by Seth Michael Larson.
  * [bpo-26654](https://bugs.python.org/issue?@action=redirect&bpo=26654): Inspect functools.partial in asyncio.Handle.__repr__. Patch by iceboy.
  * [bpo-26909](https://bugs.python.org/issue?@action=redirect&bpo=26909): Fix slow pipes IO in asyncio. Patch by INADA Naoki.
  * [bpo-28176](https://bugs.python.org/issue?@action=redirect&bpo=28176): Fix callbacks race in asyncio.SelectorLoop.sock_connect.
  * [bpo-27759](https://bugs.python.org/issue?@action=redirect&bpo=27759): Fix selectors incorrectly retain invalid file descriptors. Patch by Mark Williams.
  * [bpo-28368](https://bugs.python.org/issue?@action=redirect&bpo=28368): Refuse monitoring processes if the child watcher has no loop attached. Patch by Vincent Michel.
  * [bpo-28369](https://bugs.python.org/issue?@action=redirect&bpo=28369): Raise RuntimeError when transport’s FD is used with add_reader, add_writer, etc.
  * [bpo-28370](https://bugs.python.org/issue?@action=redirect&bpo=28370): Speedup asyncio.StreamReader.readexactly. Patch by Коренберг Марк.
  * [bpo-28371](https://bugs.python.org/issue?@action=redirect&bpo=28371): Deprecate passing asyncio.Handles to run_in_executor.
  * [bpo-28372](https://bugs.python.org/issue?@action=redirect&bpo=28372): Fix asyncio to support formatting of non-python coroutines.
  * [bpo-28399](https://bugs.python.org/issue?@action=redirect&bpo=28399): Remove UNIX socket from FS before binding. Patch by Коренберг Марк.
  * [bpo-27972](https://bugs.python.org/issue?@action=redirect&bpo=27972): Prohibit Tasks to await on themselves.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id656 "Link to this heading")
  * [bpo-28402](https://bugs.python.org/issue?@action=redirect&bpo=28402): Adds signed catalog files for stdlib on Windows.
  * [bpo-28333](https://bugs.python.org/issue?@action=redirect&bpo=28333): Enables Unicode for ps1/ps2 and input() prompts. (Patch by Eryk Sun)
  * [bpo-28251](https://bugs.python.org/issue?@action=redirect&bpo=28251): Improvements to help manuals on Windows.
  * [bpo-28110](https://bugs.python.org/issue?@action=redirect&bpo=28110): launcher.msi has different product codes between 32-bit and 64-bit
  * [bpo-28161](https://bugs.python.org/issue?@action=redirect&bpo=28161): Opening CON for write access fails
  * [bpo-28162](https://bugs.python.org/issue?@action=redirect&bpo=28162): WindowsConsoleIO readall() fails if first line starts with Ctrl+Z
  * [bpo-28163](https://bugs.python.org/issue?@action=redirect&bpo=28163): WindowsConsoleIO fileno() passes wrong flags to _open_osfhandle
  * [bpo-28164](https://bugs.python.org/issue?@action=redirect&bpo=28164): _PyIO_get_console_type fails for various paths
  * [bpo-28137](https://bugs.python.org/issue?@action=redirect&bpo=28137): Renames Windows path file to ._pth
  * [bpo-28138](https://bugs.python.org/issue?@action=redirect&bpo=28138): Windows ._pth file should allow import site


### C API[¶](https://docs.python.org/3/whatsnew/changelog.html#id657 "Link to this heading")
  * [bpo-28426](https://bugs.python.org/issue?@action=redirect&bpo=28426): Deprecated undocumented functions PyUnicode_AsEncodedObject(), PyUnicode_AsDecodedObject(), PyUnicode_AsDecodedUnicode() and PyUnicode_AsEncodedUnicode().