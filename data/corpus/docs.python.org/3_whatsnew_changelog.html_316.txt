Title: Build Improvements in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: The build system has been updated to utilize values from the configure script for the `_uuid` extension module, which now also detects `libuuid`. Additionally, warnings regarding `swprintf` usage have been addressed, and improvements have been made to the `Modules/Setup` and `Modules/makesetup` files to ensure correct tracking of extension dependencies and removing outdated comments.
---

### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id273 "Link to this heading")
  * [bpo-43158](https://bugs.python.org/issue?@action=redirect&bpo=43158): `setup.py` now uses values from configure script to build the `_uuid` extension module. Configure now detects util-linux’s `libuuid`, too.
  * [bpo-45666](https://bugs.python.org/issue?@action=redirect&bpo=45666): Fix warning of `swprintf` and `%s` usage in `_testembed.c`
  * [bpo-45548](https://bugs.python.org/issue?@action=redirect&bpo=45548): `Modules/Setup` and `Modules/makesetup` have been improved. The `Setup` file now contains working rules for all extensions. Outdated comments have been removed. Rules defined by `makesetup` track dependencies correctly.
  * [bpo-45548](https://bugs.python.org/issue?@action=redirect&bpo=45548): The [`math`](https://docs.python.org/3/library/math.html#module-math "math: Mathematical functions \(sin\(\) etc.\).") and [`cmath`](https://docs.python.org/3/library/cmath.html#module-cmath "cmath: Mathematical functions for complex numbers.") implementation now require a C99 compatible `libm` and no longer ship with workarounds for missing acosh, asinh, atanh, expm1, and log1p functions.
  * [bpo-45595](https://bugs.python.org/issue?@action=redirect&bpo=45595): `setup.py` and `makesetup` now track build dependencies on all Python header files and module specific header files.
  * [bpo-45571](https://bugs.python.org/issue?@action=redirect&bpo=45571): `Modules/Setup` now use `PY_CFLAGS_NODIST` instead of `PY_CFLAGS` to compile shared modules.
  * [bpo-45570](https://bugs.python.org/issue?@action=redirect&bpo=45570): `pyexpat` and `_elementtree` no longer define obsolete macros `HAVE_EXPAT_CONFIG_H` and `USE_PYEXPAT_CAPI`. `XML_POOR_ENTROPY` is now defined in `expat_config.h`.
  * [bpo-43974](https://bugs.python.org/issue?@action=redirect&bpo=43974): `setup.py` no longer defines `Py_BUILD_CORE_MODULE`. Instead every module, that uses the internal API, defines the macro.
  * [bpo-45548](https://bugs.python.org/issue?@action=redirect&bpo=45548): Fill in missing entries in Modules/Setup.
  * [bpo-45532](https://bugs.python.org/issue?@action=redirect&bpo=45532): Update [`sys.version`](https://docs.python.org/3/library/sys.html#sys.version "sys.version") to use `main` as fallback information. Patch by Jeong YunWon.
  * [bpo-45536](https://bugs.python.org/issue?@action=redirect&bpo=45536): The `configure` script now checks whether OpenSSL headers and libraries provide required APIs. Most common APIs are verified. The check detects outdated or missing OpenSSL. Failures do not stop configure.
  * [bpo-45221](https://bugs.python.org/issue?@action=redirect&bpo=45221): Fixed regression in handling of `LDFLAGS` and `CPPFLAGS` options where `argparse.parse_known_args()` could interpret an option as one of the built-in command line argument, for example `-h` for help.
  * [bpo-45440](https://bugs.python.org/issue?@action=redirect&bpo=45440): Building Python now requires a C99 `<math.h>` header file providing the following functions: `copysign()`, `hypot()`, `isfinite()`, `isinf()`, `isnan()`, `round()`. Patch by Victor Stinner.
  * [bpo-45405](https://bugs.python.org/issue?@action=redirect&bpo=45405): Prevent `internal configure error` when running `configure` with recent versions of non-Apple clang. Patch by David Bohman.
  * [bpo-45433](https://bugs.python.org/issue?@action=redirect&bpo=45433): Avoid linking libpython with libcrypt.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id274 "Link to this heading")
  * [bpo-43652](https://bugs.python.org/issue?@action=redirect&bpo=43652): Update Tcl/Tk to 8.6.11, actually this time. The previous update incorrectly included 8.6.10.
  * [bpo-45337](https://bugs.python.org/issue?@action=redirect&bpo=45337): venv now warns when the created environment may need to be accessed at a different path, due to redirections, links or junctions. It also now correctly installs or upgrades components when the alternate path is required.
  * [bpo-43851](https://bugs.python.org/issue?@action=redirect&bpo=43851): Build SQLite `SQLITE_OMIT_AUTOINIT` on Windows. Patch by Erlend E. Aasland.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id275 "Link to this heading")
  * [bpo-44828](https://bugs.python.org/issue?@action=redirect&bpo=44828): Avoid tkinter file dialog failure on macOS 12 Monterey when using the Tk 8.6.11 provided by python.org macOS installers. Patch by Marc Culler of the Tk project.


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id276 "Link to this heading")
  * [bpo-45495](https://bugs.python.org/issue?@action=redirect&bpo=45495): Add context keywords ‘case’ and ‘match’ to completions list.