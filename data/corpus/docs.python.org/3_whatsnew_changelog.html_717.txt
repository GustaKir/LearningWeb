Title: Python Release Notes: Bug Fixes and Improvements
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document outlines several bug fixes and improvements in Python, including changes to SSLSocket behavior, fixes in the datetime module, and enhancements to the warnings module. Notably, ValueError is now raised for negative lengths in SSLSocket, and reading zero bytes has been adjusted. Additional issues related to exception handling and logging during shutdown are also addressed.
---

Patch by Andrew Plummer.
  * [bpo-26644](https://bugs.python.org/issue?@action=redirect&bpo=26644): Raise ValueError rather than SystemError when a negative length is passed to SSLSocket.recv() or read().
  * [bpo-23804](https://bugs.python.org/issue?@action=redirect&bpo=23804): Fix SSL recv(0) and read(0) methods to return zero bytes instead of up to 1024.
  * [bpo-26616](https://bugs.python.org/issue?@action=redirect&bpo=26616): Fixed a bug in datetime.astimezone() method.
  * [bpo-21925](https://bugs.python.org/issue?@action=redirect&bpo=21925): [`warnings.formatwarning()`](https://docs.python.org/3/library/warnings.html#warnings.formatwarning "warnings.formatwarning") now catches exceptions on `linecache.getline(...)` to be able to log [`ResourceWarning`](https://docs.python.org/3/library/exceptions.html#ResourceWarning "ResourceWarning") emitted late during the Python shutdown process.
  * [bpo-24266](https://bugs.python.org/issue?@action=redirect&bpo=24266): Ctrl+C during Readline history search now cancels the search mode when compiled with Readline 7.
  * [bpo-26560](https://bugs.python.org/issue?@action=redirect&bpo=26560): Avoid potential ValueError in BaseHandler.start_response. Initial patch by Peter Inglesby.
  * [bpo-26569](https://bugs.python.org/issue?@action=redirect&bpo=26569): Fix [`pyclbr.readmodule()`](https://docs.python.org/3/library/pyclbr.html#pyclbr.readmodule "pyclbr.readmodule") and [`pyclbr.readmodule_ex()`](https://docs.python.org/3/library/pyclbr.html#pyclbr.readmodule_ex "pyclbr.readmodule_ex") to support importing packages.
  * [bpo-26499](https://bugs.python.org/issue?@action=redirect&bpo=26499): Account for remaining Content-Length in HTTPResponse.readline() and read1(). Based on patch by Silent Ghost. Also document that HTTPResponse now supports these methods.
  * [bpo-25320](https://bugs.python.org/issue?@action=redirect&bpo=25320): Handle sockets in directories unittest discovery is scanning. Patch from Victor van den Elzen.
  * [bpo-16181](https://bugs.python.org/issue?@action=redirect&bpo=16181): cookiejar.http2time() now returns None if year is higher than datetime.MAXYEAR.
  * [bpo-26513](https://bugs.python.org/issue?@action=redirect&bpo=26513): Fixes platform module detection of Windows Server
  * [bpo-23718](https://bugs.python.org/issue?@action=redirect&bpo=23718): Fixed parsing time in week 0 before Jan 1. Original patch by Tamás Bence Gedai.
  * [bpo-20589](https://bugs.python.org/issue?@action=redirect&bpo=20589): Invoking Path.owner() and Path.group() on Windows now raise NotImplementedError instead of ImportError.
  * [bpo-26177](https://bugs.python.org/issue?@action=redirect&bpo=26177): Fixed the keys() method for Canvas and Scrollbar widgets.
  * [bpo-15068](https://bugs.python.org/issue?@action=redirect&bpo=15068): Got rid of excessive buffering in the fileinput module. The bufsize parameter is no longer used.
  * [bpo-2202](https://bugs.python.org/issue?@action=redirect&bpo=2202): Fix UnboundLocalError in AbstractDigestAuthHandler.get_algorithm_impls. Initial patch by Mathieu Dupuy.
  * [bpo-25718](https://bugs.python.org/issue?@action=redirect&bpo=25718): Fixed pickling and copying the accumulate() iterator with total is None.
  * [bpo-26475](https://bugs.python.org/issue?@action=redirect&bpo=26475): Fixed debugging output for regular expressions with the (?x) flag.
  * [bpo-26457](https://bugs.python.org/issue?@action=redirect&bpo=26457): Fixed the subnets() methods in IP network classes for the case when resulting prefix length is equal to maximal prefix length. Based on patch by Xiang Zhang.
  * [bpo-26385](https://bugs.python.org/issue?@action=redirect&bpo=26385): Remove the file if the internal open() call in NamedTemporaryFile() fails. Patch by Silent Ghost.
  * [bpo-26402](https://bugs.python.org/issue?@action=redirect&bpo=26402): Fix XML-RPC client to retry when the server shuts down a persistent connection. This was a regression related to the new http.client.RemoteDisconnected exception in 3.5.0a4.
  * [bpo-25913](https://bugs.python.org/issue?@action=redirect&bpo=25913): Leading `<~` is optional now in base64.a85decode() with adobe=True. Patch by Swati Jaiswal.
  * [bpo-26186](https://bugs.python.org/issue?@action=redirect&bpo=26186): Remove an invalid type check in importlib.util.LazyLoader.
  * [bpo-26367](https://bugs.python.org/issue?@action=redirect&bpo=26367): importlib.__import__() raises SystemError like builtins.__import__() when `level` is specified but without an accompanying package specified.
  * [bpo-26309](https://bugs.python.org/issue?@action=redirect&bpo=26309): In the “socketserver” module, shut down the request (closing the connected socket) when verify_request() returns false.