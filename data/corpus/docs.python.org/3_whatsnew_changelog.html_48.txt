Title: Library Updates and Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details several updates to the Python library, including fixes for a crash and memory leak in `decimal.getcontext()`, addressing a memory leak in `typing.NoDefault`, and corrections to the output of `ipaddress.IPv6Address.reverse_pointer` in accordance with RFC 3596.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id43 "Link to this heading")
  * [gh-123657](https://github.com/python/cpython/issues/123657): Fix crash and memory leak in [`decimal.getcontext()`](https://docs.python.org/3/library/decimal.html#decimal.getcontext "decimal.getcontext"). It crashed when using a thread-local context by `--with-decimal-contextvar=no`.
  * [gh-123448](https://github.com/python/cpython/issues/123448): Fixed memory leak of [`typing.NoDefault`](https://docs.python.org/3/library/typing.html#typing.NoDefault "typing.NoDefault") by moving it to the static types array.
  * [gh-123409](https://github.com/python/cpython/issues/123409): Fix [`ipaddress.IPv6Address.reverse_pointer`](https://docs.python.org/3/library/ipaddress.html#ipaddress.IPv6Address.reverse_pointer "ipaddress.IPv6Address.reverse_pointer") output according to [**RFC 3596, §2.5**](https://datatracker.ietf.org/doc/html/rfc3596.html#section-2.5). Patch by Bénédikt Tran.
  * [gh-123270](https://github.com/python/cpython/issues/123270): Applied a more surgical fix for malformed payloads in [`zipfile.Path`](https://docs.python.org/3/library/zipfile.html#zipfile.Path "zipfile.Path") causing infinite loops ([gh-122905](https://github.com/python/cpython/issues/122905)) without breaking contents using legitimate characters.
  * [gh-123228](https://github.com/python/cpython/issues/123228): Fix return type for `_pyrepl.readline._ReadlineWrapper.get_line_buffer()` to be [`str()`](https://docs.python.org/3/library/stdtypes.html#str "str"). Patch by Sergey B Kirpichev.
  * [gh-123240](https://github.com/python/cpython/issues/123240): Raise audit events for the [`input()`](https://docs.python.org/3/library/functions.html#input "input") in the new REPL.
  * [gh-123243](https://github.com/python/cpython/issues/123243): Fix memory leak in `_decimal`.
  * [gh-122546](https://github.com/python/cpython/issues/122546): Consistently use same file name for different exceptions in the new repl. Patch by Sergey B Kirpichev.
  * [gh-123213](https://github.com/python/cpython/issues/123213): [`xml.etree.ElementTree.Element.extend()`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.extend "xml.etree.ElementTree.Element.extend") and [`Element`](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element "xml.etree.ElementTree.Element") assignment no longer hide the internal exception if an erronous generator is passed. Patch by Bar Harel.
  * [gh-85110](https://github.com/python/cpython/issues/85110): Preserve relative path in URL without netloc in [`urllib.parse.urlunsplit()`](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlunsplit "urllib.parse.urlunsplit") and [`urllib.parse.urlunparse()`](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlunparse "urllib.parse.urlunparse").
  * [gh-123067](https://github.com/python/cpython/issues/123067): Fix quadratic complexity in parsing `"`-quoted cookie values with backslashes by [`http.cookies`](https://docs.python.org/3/library/http.cookies.html#module-http.cookies "http.cookies: Support for HTTP state management \(cookies\).").
  * [gh-122981](https://github.com/python/cpython/issues/122981): Fix [`inspect.getsource()`](https://docs.python.org/3/library/inspect.html#inspect.getsource "inspect.getsource") for generated classes with Python base classes (e.g. enums).
  * [gh-122903](https://github.com/python/cpython/issues/122903): `zipfile.Path.glob` now correctly matches directories instead of silently omitting them.
  * [gh-122905](https://github.com/python/cpython/issues/122905): [`zipfile.Path`](https://docs.python.org/3/library/zipfile.html#zipfile.Path "zipfile.Path") objects now sanitize names from the zipfile.
  * [gh-122695](https://github.com/python/cpython/issues/122695): Fixed double-free when using [`gc.get_referents()`](https://docs.python.org/3/library/gc.html#gc.get_referents "gc.get_referents") with a freed [`asyncio.Future`](https://docs.python.org/3/library/asyncio-future.html#asyncio.Future "asyncio.Future") iterator.
  * [gh-116263](https://github.com/python/cpython/issues/116263): [`logging.handlers.RotatingFileHandler`](https://docs.python.org/3/library/logging.handlers.html#logging.handlers.RotatingFileHandler "logging.handlers.RotatingFileHandler") no longer rolls over empty log files.
  * [gh-105376](https://github.com/python/cpython/issues/105376): Restore the deprecated [`logging`](https://docs.python.org/3/library/logging.html#module-logging "logging: Flexible event logging system for applications.") `warn()` method. It was removed in Python 3.13 alpha 1. Keep the deprecated `warn()` method in Python 3.13. Patch by Victor Stinner.
  * [gh-122744](https://github.com/python/cpython/issues/122744): Bump the version of pip bundled in ensurepip to version 24.2.
  * [gh-118814](https://github.com/python/cpython/issues/118814): Fix the [`typing.TypeVar`](https: