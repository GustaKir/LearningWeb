Title: IDLE Enhancements and Pyparse Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: Recent updates to IDLE include improved functionality without the `-n` option, simplifications in the Pyparse module, removal of unused code, and the addition of tests. Also noted is a recommendation against using system-dependent default encoding in IDLE.
---

IDLE now does the same when run normally, without the `-n` option.
  * [bpo-32940](https://bugs.python.org/issue?@action=redirect&bpo=32940): Simplify and rename StringTranslatePseudoMapping in pyparse.
  * [bpo-32916](https://bugs.python.org/issue?@action=redirect&bpo=32916): Change `str` to `code` in pyparse.
  * [bpo-32905](https://bugs.python.org/issue?@action=redirect&bpo=32905): Remove unused code in pyparse module.
  * [bpo-32874](https://bugs.python.org/issue?@action=redirect&bpo=32874): Add tests for pyparse.
  * [bpo-32837](https://bugs.python.org/issue?@action=redirect&bpo=32837): Using the system and place-dependent default encoding for open() is a bad idea for IDLE’s system and location-independent files.
  * [bpo-32826](https://bugs.python.org/issue?@action=redirect&bpo=32826): Add “encoding=utf-8” to open() in IDLE’s test_help_about. GUI test test_file_buttons() only looks at initial ascii-only lines, but failed on systems where open() defaults to ‘ascii’ because readline() internally reads and decodes far enough ahead to encounter a non-ascii character in CREDITS.txt.
  * [bpo-32831](https://bugs.python.org/issue?@action=redirect&bpo=32831): Add docstrings and tests for codecontext.
  * [bpo-32765](https://bugs.python.org/issue?@action=redirect&bpo=32765): Update configdialog General tab docstring to add new widgets to the widget list.


### Tools/Demos[¶](https://docs.python.org/3/whatsnew/changelog.html#id482 "Link to this heading")
  * [bpo-35884](https://bugs.python.org/issue?@action=redirect&bpo=35884): Add a benchmark script for timing various ways to access variables: `Tools/scripts/var_access_benchmark.py`.
  * [bpo-34989](https://bugs.python.org/issue?@action=redirect&bpo=34989): python-gdb.py now handles errors on computing the line number of a Python frame.
  * [bpo-20260](https://bugs.python.org/issue?@action=redirect&bpo=20260): Argument Clinic now has non-bitwise unsigned int converters.
  * [bpo-32962](https://bugs.python.org/issue?@action=redirect&bpo=32962): python-gdb now catches `UnicodeDecodeError` exceptions when calling `string()`.
  * [bpo-32962](https://bugs.python.org/issue?@action=redirect&bpo=32962): python-gdb now catches ValueError on read_var(): when Python has no debug symbols for example.
  * [bpo-33189](https://bugs.python.org/issue?@action=redirect&bpo=33189): **pygettext.py** now recognizes only literal strings as docstrings and translatable strings, and rejects bytes literals and f-string expressions.
  * [bpo-31920](https://bugs.python.org/issue?@action=redirect&bpo=31920): Fixed handling directories as arguments in the `pygettext` script. Based on patch by Oleg Krasnikov.
  * [bpo-29673](https://bugs.python.org/issue?@action=redirect&bpo=29673): Fix pystackv and pystack gdbinit macros.
  * [bpo-25427](https://bugs.python.org/issue?@action=redirect&bpo=25427): Remove the pyvenv script in favor of `python3 -m venv` in order to lower confusion as to what Python interpreter a virtual environment will be created for.
  * [bpo-32885](https://bugs.python.org/issue?@action=redirect&bpo=32885): Add an `-n` flag for `Tools/scripts/pathfix.py` to disable automatic backup creation (files with `~` suffix).
  * [bpo-32222](https://bugs.python.org/issue?@action=redirect&bpo=32222): Fix pygettext not extracting docstrings for functions with type annotated arguments. Patch by Toby Harradine.
  * [bpo-31583](https://bugs.python.org/issue?@action=redirect&bpo=31583): Fix 2to3 for using with –add-suffix option but without –output-dir option for relative path to files in current directory.