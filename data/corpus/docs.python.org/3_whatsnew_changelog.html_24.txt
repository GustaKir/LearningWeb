Title: Python Changes: Windows, Tools, and Tests
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines recent updates for Python, including support for forced color output on Windows, enhancements to the iOS test runner, and several bug fixes related to Argument Clinic and limited C API testing.
---

### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id8 "Link to this heading")
  * [gh-127353](https://github.com/python/cpython/issues/127353): Allow to force color output on Windows using environment variables. Patch by Andrey Efremov.


### Tools/Demos[¶](https://docs.python.org/3/whatsnew/changelog.html#id9 "Link to this heading")
  * [gh-129248](https://github.com/python/cpython/issues/129248): The iOS test runner now strips the log prefix from each line output by the test suite.
  * [gh-128152](https://github.com/python/cpython/issues/128152): Fix a bug where Argument Clinic’s C pre-processor parser tried to parse pre-processor directives inside C comments. Patch by Erlend Aasland.


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id10 "Link to this heading")
  * [gh-127906](https://github.com/python/cpython/issues/127906): Test the limited C API in test_cppext. Patch by Victor Stinner.
  * [gh-127637](https://github.com/python/cpython/issues/127637): Add tests for the [`dis`](https://docs.python.org/3/library/dis.html#module-dis "dis: Disassembler for Python bytecode.") command-line interface. Patch by Bénédikt Tran.
  * [gh-126925](https://github.com/python/cpython/issues/126925): iOS test results are now streamed during test execution, and the deprecated xcresulttool is no longer used.


### Security[¶](https://docs.python.org/3/whatsnew/changelog.html#id11 "Link to this heading")
  * [gh-105704](https://github.com/python/cpython/issues/105704): When using [`urllib.parse.urlsplit()`](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlsplit "urllib.parse.urlsplit") and [`urllib.parse.urlparse()`](https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlparse "urllib.parse.urlparse") host parsing would not reject domain names containing square brackets (`[` and `]`). Square brackets are only valid for IPv6 and IPvFuture hosts according to [RFC 3986 Section 3.2.2](https://www.rfc-editor.org/rfc/rfc3986#section-3.2.2).
  * [gh-127655](https://github.com/python/cpython/issues/127655): Fixed the `asyncio.selector_events._SelectorSocketTransport` transport not pausing writes for the protocol when the buffer reaches the high water mark when using [`asyncio.WriteTransport.writelines()`](https://docs.python.org/3/library/asyncio-protocol.html#asyncio.WriteTransport.writelines "asyncio.WriteTransport.writelines").
  * [gh-126108](https://github.com/python/cpython/issues/126108): Fix a possible `NULL` pointer dereference in `PySys_AddWarnOptionUnicode()`.
  * [gh-80222](https://github.com/python/cpython/issues/80222): Fix bug in the folding of quoted strings when flattening an email message using a modern email policy. Previously when a quoted string was folded so that it spanned more than one line, the surrounding quotes and internal escapes would be omitted. This could theoretically be used to spoof header lines using a carefully constructed quoted string if the resulting rendered email was transmitted or re-parsed.
  * [gh-119511](https://github.com/python/cpython/issues/119511): Fix a potential denial of service in the [`imaplib`](https://docs.python.org/3/library/imaplib.html#module-imaplib "imaplib: IMAP4 protocol client \(requires sockets\).") module. When connecting to a malicious server, it could cause an arbitrary amount of memory to be allocated. On many systems this is harmless as unused virtual memory is only a mapping, but if this hit a virtual address size limit it could lead to a [`MemoryError`](https://docs.python.org/3/library/exceptions.html#MemoryError "MemoryError") or other process crash. On unusual systems or builds where all allocated memory is touched and backed by actual ram or storage it could’ve consumed resources doing so until similarly crashing.