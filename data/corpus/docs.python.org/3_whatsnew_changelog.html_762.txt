Title: Python Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This chunk outlines recent changes and fixes in Python, including improvements to tempfile handling, pkgutil loader behavior, SSL context security, and stricter type checks for assert functions.
---

Thanks to Devin Jeanpierre for the patch.
  * [bpo-21058](https://bugs.python.org/issue?@action=redirect&bpo=21058): Fix a leak of file descriptor in [`tempfile.NamedTemporaryFile()`](https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile "tempfile.NamedTemporaryFile"), close the file descriptor if [`io.open()`](https://docs.python.org/3/library/io.html#io.open "io.open") fails
  * [bpo-21200](https://bugs.python.org/issue?@action=redirect&bpo=21200): Return None from pkgutil.get_loader() when __spec__ is missing.
  * [bpo-21013](https://bugs.python.org/issue?@action=redirect&bpo=21013): Enhance ssl.create_default_context() when used for server side sockets to provide better security by default.
  * [bpo-20145](https://bugs.python.org/issue?@action=redirect&bpo=20145): `assertRaisesRegex` and `assertWarnsRegex` now raise a `TypeError` if the second argument is not a string or compiled regex.
  * [bpo-20633](https://bugs.python.org/issue?@action=redirect&bpo=20633): Replace relative import by absolute import.
  * [bpo-20980](https://bugs.python.org/issue?@action=redirect&bpo=20980): Stop wrapping exception when using ThreadPool.
  * [bpo-21082](https://bugs.python.org/issue?@action=redirect&bpo=21082): In os.makedirs, do not set the process-wide umask. Note this changes behavior of makedirs when exist_ok=True.
  * [bpo-20990](https://bugs.python.org/issue?@action=redirect&bpo=20990): Fix issues found by pyflakes for multiprocessing.
  * [bpo-21015](https://bugs.python.org/issue?@action=redirect&bpo=21015): SSL contexts will now automatically select an elliptic curve for ECDH key exchange on OpenSSL 1.0.2 and later, and otherwise default to “prime256v1”.
  * [bpo-21000](https://bugs.python.org/issue?@action=redirect&bpo=21000): Improve the command-line interface of json.tool.
  * [bpo-20995](https://bugs.python.org/issue?@action=redirect&bpo=20995): Enhance default ciphers used by the ssl module to enable better security and prioritize perfect forward secrecy.
  * [bpo-20884](https://bugs.python.org/issue?@action=redirect&bpo=20884): Don’t assume that __file__ is defined on importlib.__init__.
  * [bpo-21499](https://bugs.python.org/issue?@action=redirect&bpo=21499): Ignore __builtins__ in several test_importlib.test_api tests.
  * [bpo-20627](https://bugs.python.org/issue?@action=redirect&bpo=20627): xmlrpc.client.ServerProxy is now a context manager.
  * [bpo-19165](https://bugs.python.org/issue?@action=redirect&bpo=19165): The formatter module now raises DeprecationWarning instead of PendingDeprecationWarning.
  * [bpo-13936](https://bugs.python.org/issue?@action=redirect&bpo=13936): Remove the ability of datetime.time instances to be considered false in boolean contexts.
  * [bpo-18931](https://bugs.python.org/issue?@action=redirect&bpo=18931): selectors module now supports /dev/poll on Solaris. Patch by Giampaolo Rodola’.
  * [bpo-19977](https://bugs.python.org/issue?@action=redirect&bpo=19977): When the `LC_TYPE` locale is the POSIX locale (`C` locale), [`sys.stdin`](https://docs.python.org/3/library/sys.html#sys.stdin "sys.stdin") and [`sys.stdout`](https://docs.python.org/3/library/sys.html#sys.stdout "sys.stdout") are now using the `surrogateescape` error handler, instead of the `strict` error handler.
  * [bpo-20574](https://bugs.python.org/issue?@action=redirect&bpo=20574): Implement incremental decoder for cp65001 code (Windows code page 65001, Microsoft UTF-8).
  * [bpo-20879](https://bugs.python.org/issue?@action=redirect&bpo=20879): Delay the initialization of encoding and decoding tables for base32, ascii85 and base85 codecs in the base64 module, and delay the initialization of the unquote_to_bytes() table of the urllib.parse module, to not waste memory if these modules are not used.
  * [bpo-19157](https://bugs.python.org/issue?@action=redirect&bpo=19157): Include the broadcast address in the usuable hosts for IPv6 in ipaddress.
  * [bpo-11599](https://bugs.python.org/issue?@action=redirect&bpo=11599): When an external command (e.g. compiler) fails, distutils now prints out the whole command line (instead of just the command name) if the environment variable DISTUTILS_DEBUG is set.
  * [bpo-4931](https://bugs.python.org/issue?@action=redirect&bpo=4931): distutils should not produce unhelpful “error: None” messages anymore. distutils.util.grok_environment_error is kept but doc-deprecated.
  * [bpo-20875](https://bugs.python.org/issue?@action=redirect&bpo=20875): Prevent possible gzip “‘read’ is not defined” NameError. Patch by Claudiu Popa.
  * [bpo-11558](https://bugs.python.org/issue?@action=redirect&bpo=11558): `email.message.Message.attach` now returns a more useful error message if `attach` is called on a message for which `is_multipart` is False.
  * [bpo-20283](https://bugs.python.org/issue?@action=redirect&bpo=20283): RE pattern methods now accept the string keyword parameters as documented.