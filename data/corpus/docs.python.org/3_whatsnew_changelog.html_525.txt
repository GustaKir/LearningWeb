Title: Changes in Pool State Constants and Bug Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This update introduces several changes and bug fixes: Pool state constant values are now strings, causing `RUN` to be represented as 'RUN'. The behavior of `multiprocessing.Pool.__enter__()` has been modified to fail if the pool is not running. The removal of the macpath module follows its deprecation in Python 3.7. Additionally, improvements were made to unblock the Proactor event loop on Windows, and a fix for `xml.dom.minidom cloneNode()` handling with entities.
---

Pool state constant values are now strings instead of integers, for example `RUN` value becomes `'RUN'` instead of `0`.
  * [bpo-35477](https://bugs.python.org/issue?@action=redirect&bpo=35477): `multiprocessing.Pool.__enter__()` now fails if the pool is not running: `with pool:` fails if used more than once.
  * [bpo-31446](https://bugs.python.org/issue?@action=redirect&bpo=31446): Copy command line that was passed to CreateProcessW since this function can change the content of the input buffer.
  * [bpo-35471](https://bugs.python.org/issue?@action=redirect&bpo=35471): Python 2.4 dropped MacOS 9 support. The macpath module was deprecated in Python 3.7. The module is now removed.
  * [bpo-23057](https://bugs.python.org/issue?@action=redirect&bpo=23057): Unblock Proactor event loop when keyboard interrupt is received on Windows
  * [bpo-35052](https://bugs.python.org/issue?@action=redirect&bpo=35052): Fix xml.dom.minidom cloneNode() on a document with an entity: pass the correct arguments to the user data handler of an entity.
  * [bpo-20239](https://bugs.python.org/issue?@action=redirect&bpo=20239): Allow repeated assignment deletion of [`unittest.mock.Mock`](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock "unittest.mock.Mock") attributes. Patch by Pablo Galindo.
  * [bpo-17185](https://bugs.python.org/issue?@action=redirect&bpo=17185): Set `__signature__` on mock for [`inspect`](https://docs.python.org/3/library/inspect.html#module-inspect "inspect: Extract information and source code from live objects.") to get signature. Patch by Karthikeyan Singaravelan.
  * [bpo-35445](https://bugs.python.org/issue?@action=redirect&bpo=35445): Memory errors during creating posix.environ no longer ignored.
  * [bpo-35415](https://bugs.python.org/issue?@action=redirect&bpo=35415): Validate fileno= argument to socket.socket().
  * [bpo-35424](https://bugs.python.org/issue?@action=redirect&bpo=35424): `multiprocessing.Pool` destructor now emits [`ResourceWarning`](https://docs.python.org/3/library/exceptions.html#ResourceWarning "ResourceWarning") if the pool is still running.
  * [bpo-35330](https://bugs.python.org/issue?@action=redirect&bpo=35330): When a `Mock` instance was used to wrap an object, if `side_effect` is used in one of the mocks of it methods, don’t call the original implementation and return the result of using the side effect the same way that it is done with return_value.
  * [bpo-35346](https://bugs.python.org/issue?@action=redirect&bpo=35346): Drop Mac OS 9 and Rhapsody support from the [`platform`](https://docs.python.org/3/library/platform.html#module-platform "platform: Retrieves as much platform identifying data as possible.") module. Rhapsody last release was in 2000. Mac OS 9 last release was in 2001.
  * [bpo-10496](https://bugs.python.org/issue?@action=redirect&bpo=10496): `check_environ()` of `distutils.utils` now catches [`KeyError`](https://docs.python.org/3/library/exceptions.html#KeyError "KeyError") on calling [`pwd.getpwuid()`](https://docs.python.org/3/library/pwd.html#pwd.getpwuid "pwd.getpwuid"): don’t create the `HOME` environment variable in this case.
  * [bpo-10496](https://bugs.python.org/issue?@action=redirect&bpo=10496): `posixpath.expanduser()` now returns the input _path_ unchanged if the `HOME` environment variable is not set and the current user has no home directory (if the current user identifier doesn’t exist in the password database). This change fix the [`site`](https://docs.python.org/3/library/site.html#module-site "site: Module responsible for site-specific configuration.") module if the current user doesn’t exist in the password database (if the user has no home directory).
  * [bpo-35389](https://bugs.python.org/issue?@action=redirect&bpo=35389): [`platform.libc_ver()`](https://docs.python.org/3/library/platform.html#platform.libc_ver "platform.libc_ver") now uses `os.confstr('CS_GNU_LIBC_VERSION')` if available and the _executable_ parameter is not set.
  * [bpo-35394](https://bugs.python.org/issue?@action=redirect&bpo=35394): Add empty slots to asyncio abstract protocols.
  * [bpo-35310](https://bugs.python.org/issue?@action=redirect&bpo=35310): Fix a bug in [`select.select()`](https://docs.python.org/3/library/select.html#select.select "select.select") where, in some cases, the file descriptor sequences were returned unmodified after a signal interruption, even though the file descriptors might not be ready yet. [`select.select()`](https://docs.python.org/3/library/select.html#select.select "select.select") will now always return empty lists if a timeout has occurred. Patch by Oran Avraham.
  * [bpo-35380](https://bugs.python.org/issue?@action=redirect&bpo=35380): Enable TCP_NODELAY on Windows for proactor asyncio event loop.
  * [bpo-35341](https://bugs.python.org/issue?@action=redirect&bpo=35341): Add generic version of `collections.OrderedDict` to the `typing` module.