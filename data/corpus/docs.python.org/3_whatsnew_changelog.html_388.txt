Title: Test Improvements and Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines several important test enhancements and fixes in Python, including re-enabling 'test_gdb' for GDB versions 9.2 and newer, resolving a race condition in 'test_asyncio.test_call_later()', and addressing various issues with 'test_netrc' and other tests on the VxWorks platform.
---

### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id340 "Link to this heading")
  * [bpo-41473](https://bugs.python.org/issue?@action=redirect&bpo=41473): Re-enable test_gdb on gdb 9.2 and newer: <https://bugzilla.redhat.com/show_bug.cgi?id=1866884> bug is fixed in gdb 10.1.
  * [bpo-42553](https://bugs.python.org/issue?@action=redirect&bpo=42553): Fix `test_asyncio.test_call_later()` race condition: don’t measure asyncio performance in the `call_later()` unit test. The test failed randomly on the CI.
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): Fix test_netrc on VxWorks: create temporary directories using temp_cwd().
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): skip test_getaddrinfo_ipv6_scopeid_symbolic and test_getnameinfo_ipv6_scopeid_symbolic on VxWorks
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): skip test_test of test_mailcap on VxWorks
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): add shell requirement for test_pipes
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): skip some tests related to fifo on VxWorks
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): Fix test_doctest.py failures for VxWorks.
  * [bpo-40754](https://bugs.python.org/issue?@action=redirect&bpo=40754): Include `_testinternalcapi` module in Windows installer for test suite
  * [bpo-41561](https://bugs.python.org/issue?@action=redirect&bpo=41561): test_ssl: skip test_min_max_version_mismatch when TLS 1.0 is not available
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): Fix os module failures for VxWorks RTOS.
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): Fix fifo test cases for VxWorks RTOS.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id341 "Link to this heading")
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): remove libnet dependency from detect_socket() for VxWorks
  * [bpo-42398](https://bugs.python.org/issue?@action=redirect&bpo=42398): Fix a race condition in “make regen-all” when make -jN option is used to run jobs in parallel. The clinic.py script now only use atomic write to write files. Moveover, generated files are now left unchanged if the content does not change, to not change the file modification time.
  * [bpo-41617](https://bugs.python.org/issue?@action=redirect&bpo=41617): Fix building `pycore_bitutils.h` internal header on old clang version without `__builtin_bswap16()` (ex: Xcode 4.6.3 on Mac OS X 10.7). Patch by Joshua Root and Victor Stinner.
  * [bpo-38823](https://bugs.python.org/issue?@action=redirect&bpo=38823): It is no longer possible to build the `_ctypes` extension module without `wchar_t` type: remove `CTYPES_UNICODE` macro. Anyway, the `wchar_t` type is required to build Python. Patch by Victor Stinner.
  * [bpo-42087](https://bugs.python.org/issue?@action=redirect&bpo=42087): Support was removed for AIX 5.3 and below. See [bpo-40680](https://bugs.python.org/issue?@action=redirect&bpo=40680).
  * [bpo-40998](https://bugs.python.org/issue?@action=redirect&bpo=40998): Addressed three compiler warnings found by undefined behavior sanitizer (ubsan).


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id342 "Link to this heading")
  * [bpo-42120](https://bugs.python.org/issue?@action=redirect&bpo=42120): Remove macro definition of `copysign` (to `_copysign`) in headers.
  * [bpo-38506](https://bugs.python.org/issue?@action=redirect&bpo=38506): The Windows launcher now properly handles Python 3.10 when listing installed Python versions.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id343 "Link to this heading")
  * [bpo-42504](https://bugs.python.org/issue?@action=redirect&bpo=42504): Fix build on macOS Big Sur when MACOSX_DEPLOYMENT_TARGET=11
  * [bpo-41116](https://bugs.python.org/issue?@action=redirect&bpo=41116): Ensure distutils.unixxcompiler.find_library_file can find system provided libraries on macOS 11.
  * [bpo-41100](https://bugs.python.org/issue?@action=redirect&bpo=41100): Add support for macOS 11 and Apple Silicon systems.
It is now possible to build “Universal 2” binaries using “–enable-universalsdk –with-universal-archs=universal2”.
Binaries build on later macOS versions can be deployed back to older versions (tested up to macOS 10.9), when using the correct deployment target. This is tested using Xcode 11 and later.
  * [bpo-42232](https://bugs.python.org/issue?@action=redirect&bpo=42232): Added Darwin specific madvise options to mmap module.
  * [bpo-38443](https://bugs.python.org/issue?@action=redirect&bpo=38443): The `--enable-universalsdk` and `--with-universal-archs` options for the configure script now check that the specified architectures can be used.