Title: Python 3.5.0 beta 4 Release Notes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: The release notes for Python 3.5.0 beta 4 highlight key updates including optimization restoration for bytes.rfind() and bytearray.rfind() on Linux, improvements in PEP 448 dictionary evaluation, and fixes for crashes related to mutating sets and dictionaries during updates. Additionally, a new tokenization approach for async/await was introduced.
---

## Python 3.5.0 beta 4[¶](https://docs.python.org/3/whatsnew/changelog.html#python-3-5-0-beta-4 "Link to this heading")
_Release date: 2015-07-26_
### Core and Builtins[¶](https://docs.python.org/3/whatsnew/changelog.html#id759 "Link to this heading")
  * [bpo-23573](https://bugs.python.org/issue?@action=redirect&bpo=23573): Restored optimization of bytes.rfind() and bytearray.rfind() for single-byte argument on Linux.
  * [bpo-24569](https://bugs.python.org/issue?@action=redirect&bpo=24569): Make [**PEP 448**](https://peps.python.org/pep-0448/) dictionary evaluation more consistent.
  * [bpo-24583](https://bugs.python.org/issue?@action=redirect&bpo=24583): Fix crash when set is mutated while being updated.
  * [bpo-24407](https://bugs.python.org/issue?@action=redirect&bpo=24407): Fix crash when dict is mutated while being updated.
  * [bpo-24619](https://bugs.python.org/issue?@action=redirect&bpo=24619): New approach for tokenizing async/await. As a consequence, it is now possible to have one-line ‘async def foo(): await ..’ functions.
  * [bpo-24687](https://bugs.python.org/issue?@action=redirect&bpo=24687): Plug refleak on SyntaxError in function parameters annotations.
  * [bpo-15944](https://bugs.python.org/issue?@action=redirect&bpo=15944): memoryview: Allow arbitrary formats when casting to bytes. Patch by Martin Panter.


### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id760 "Link to this heading")
  * [bpo-23441](https://bugs.python.org/issue?@action=redirect&bpo=23441): rcompleter now prints a tab character instead of displaying possible completions for an empty word. Initial patch by Martin Sekera.
  * [bpo-24683](https://bugs.python.org/issue?@action=redirect&bpo=24683): Fixed crashes in _json functions called with arguments of inappropriate type.
  * [bpo-21697](https://bugs.python.org/issue?@action=redirect&bpo=21697): shutil.copytree() now correctly handles symbolic links that point to directories. Patch by Eduardo Seabra and Thomas Kluyver.
  * [bpo-14373](https://bugs.python.org/issue?@action=redirect&bpo=14373): Fixed segmentation fault when gc.collect() is called during constructing lru_cache (C implementation).
  * [bpo-24695](https://bugs.python.org/issue?@action=redirect&bpo=24695): Fix a regression in traceback.print_exception(). If exc_traceback is None we shouldn’t print a traceback header like described in the documentation.
  * [bpo-24620](https://bugs.python.org/issue?@action=redirect&bpo=24620): Random.setstate() now validates the value of state last element.
  * [bpo-22485](https://bugs.python.org/issue?@action=redirect&bpo=22485): Fixed an issue that caused `inspect.getsource` to return incorrect results on nested functions.
  * [bpo-22153](https://bugs.python.org/issue?@action=redirect&bpo=22153): Improve unittest docs. Patch from Martin Panter and evilzero.
  * [bpo-24580](https://bugs.python.org/issue?@action=redirect&bpo=24580): Symbolic group references to open group in re patterns now are explicitly forbidden as well as numeric group references.
  * [bpo-24206](https://bugs.python.org/issue?@action=redirect&bpo=24206): Fixed __eq__ and __ne__ methods of inspect classes.
  * [bpo-24631](https://bugs.python.org/issue?@action=redirect&bpo=24631): Fixed regression in the timeit module with multiline setup.
  * [bpo-18622](https://bugs.python.org/issue?@action=redirect&bpo=18622): unittest.mock.mock_open().reset_mock would recurse infinitely. Patch from Nicola Palumbo and Laurent De Buyst.
  * [bpo-23661](https://bugs.python.org/issue?@action=redirect&bpo=23661): unittest.mock side_effects can now be exceptions again. This was a regression vs Python 3.4. Patch from Ignacio Rossi
  * [bpo-24608](https://bugs.python.org/issue?@action=redirect&bpo=24608): chunk.Chunk.read() now always returns bytes, not str.
  * [bpo-18684](https://bugs.python.org/issue?@action=redirect&bpo=18684): Fixed reading out of the buffer in the re module.
  * [bpo-24259](https://bugs.python.org/issue?@action=redirect&bpo=24259): tarfile now raises a ReadError if an archive is truncated inside a data segment.
  * [bpo-15014](https://bugs.python.org/issue?@action=redirect&bpo=15014): SMTP.auth() and SMTP.login() now support RFC 4954’s optional initial-response argument to the SMTP AUTH command.
  * [bpo-24669](https://bugs.python.org/issue?@action=redirect&bpo=24669): Fix inspect.getsource() for ‘async def’ functions. Patch by Kai Groner.
  * [bpo-24688](https://bugs.python.org/issue?@action=redirect&bpo=24688): ast.get_docstring() for ‘async def’ functions.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id761 "Link to this heading")
  * [bpo-24603](https://bugs.python.org/issue?@action=redirect&bpo=24603): Update Windows builds and OS X 10.5 installer to use OpenSSL 1.0.2d.