Title: Python 3 Library Changes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent fixes and updates in the Python 3 library, including a fix for a crash when using gc.get_referents() on capsule objects, adjustments to typing.TypeAliasType, changes to time.strftime() regarding negative years on Android, and improvements to os.pidfd_open() and signal.pidfd_send_signal().
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id32 "Link to this heading")
  * [gh-124538](https://github.com/python/cpython/issues/124538): Fixed crash when using [`gc.get_referents()`](https://docs.python.org/3/library/gc.html#gc.get_referents "gc.get_referents") on a capsule object.
  * [gh-124498](https://github.com/python/cpython/issues/124498): Fix [`typing.TypeAliasType`](https://docs.python.org/3/library/typing.html#typing.TypeAliasType "typing.TypeAliasType") not to be generic, when `type_params` is an empty tuple.
  * [gh-123017](https://github.com/python/cpython/issues/123017): Due to unreliable results on some devices, [`time.strftime()`](https://docs.python.org/3/library/time.html#time.strftime "time.strftime") no longer accepts negative years on Android.
  * [gh-123014](https://github.com/python/cpython/issues/123014): [`os.pidfd_open()`](https://docs.python.org/3/library/os.html#os.pidfd_open "os.pidfd_open") and [`signal.pidfd_send_signal()`](https://docs.python.org/3/library/signal.html#signal.pidfd_send_signal "signal.pidfd_send_signal") are now unavailable when building against Android API levels older than 31, since the underlying system calls may cause a crash.
  * [gh-124248](https://github.com/python/cpython/issues/124248): Fixed potential crash when using [`struct`](https://docs.python.org/3/library/struct.html#module-struct "struct: Interpret bytes as packed binary data.") to process zero-width ‘Pascal string’ fields (`0p`).
  * [gh-87041](https://github.com/python/cpython/issues/87041): Fix a bug in [`argparse`](https://docs.python.org/3/library/argparse.html#module-argparse "argparse: Command-line option and argument parsing library.") where lengthy subparser argument help is incorrectly indented.
  * [gh-124212](https://github.com/python/cpython/issues/124212): Fix invalid variable in [`venv`](https://docs.python.org/3/library/venv.html#module-venv "venv: Creation of virtual environments.") handling of failed symlink on Windows
  * [gh-124171](https://github.com/python/cpython/issues/124171): Add workaround for broken `fmod()` implementations on Windows, that loose zero sign (e.g. `fmod(-10, 1)` returns `0.0`). Patch by Sergey B Kirpichev.
  * [gh-123934](https://github.com/python/cpython/issues/123934): Fix [`unittest.mock.MagicMock`](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.MagicMock "unittest.mock.MagicMock") reseting magic methods return values after `.reset_mock(return_value=True)` was called.
  * [gh-123968](https://github.com/python/cpython/issues/123968): Fix the command-line interface for the [`random`](https://docs.python.org/3/library/random.html#module-random "random: Generate pseudo-random numbers with various common distributions.") module to select floats between 0 and N, not 1 and N.
  * [gh-123892](https://github.com/python/cpython/issues/123892): Add `"_wmi"` to [`sys.stdlib_module_names`](https://docs.python.org/3/library/sys.html#sys.stdlib_module_names "sys.stdlib_module_names"). Patch by Victor Stinner.
  * [gh-123339](https://github.com/python/cpython/issues/123339): Fix [`inspect.getsource()`](https://docs.python.org/3/library/inspect.html#inspect.getsource "inspect.getsource") for classes in [`collections.abc`](https://docs.python.org/3/library/collections.abc.html#module-collections.abc "collections.abc: Abstract base classes for containers") and [`decimal`](https://docs.python.org/3/library/decimal.html#module-decimal "decimal: Implementation of the General Decimal Arithmetic Specification.") (for pure Python implementation) modules. [`inspect.getcomments()`](https://docs.python.org/3/library/inspect.html#inspect.getcomments "inspect.getcomments") now raises OSError instead of IndexError if the `__firstlineno__` value for a class is out of bound.
  * [gh-121735](https://github.com/python/cpython/issues/121735): When working with zip archives, importlib.resources now properly honors module-adjacent references (e.g. `files(pkg.mod)` and not just `files(pkg)`).
  * [gh-122145](https://github.com/python/cpython/issues/122145): Fix an issue when reporting tracebacks corresponding to Python code emitting an empty AST body. Patch by Nikita Sobolev and Bénédikt Tran.
  * [gh-119004](https://github.com/python/cpython/issues/119004): Fix a crash in [OrderedDict.__eq__](https://docs.python.org/3/library/collections.html#collections-ordereddict-eq) when operands are mutated during the check. Patch by Bénédikt Tran.
  * [bpo-44864](https://bugs.python.org/issue?@action=redirect&bpo=44864): Do not translate user-provided strings in [`argparse.ArgumentParser`](https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser "argparse.ArgumentParser").