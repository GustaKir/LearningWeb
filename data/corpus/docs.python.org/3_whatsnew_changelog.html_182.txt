Title: Build Optimizations and Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines various build-related updates, including the application of BOLT optimization settings for the libpython shared library, the requirement of Python 3.10 for `PYTHON_FOR_REGEN`, consistent definition of make targets, gcc fallback additions for macOS, and the removal of the `TKINTER_PROTECT_LOADTK` macro in the `_tkinter` module.
---

### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id146 "Link to this heading")
  * [gh-101282](https://github.com/python/cpython/issues/101282): BOLT optimization is now applied to the libpython shared library if building a shared library. BOLT instrumentation and application settings can now be influenced via the `BOLT_INSTRUMENT_FLAGS` and `BOLT_APPLY_FLAGS` configure variables.
  * [gh-99017](https://github.com/python/cpython/issues/99017): `PYTHON_FOR_REGEN` now require Python 3.10 or newer.
  * [gh-104490](https://github.com/python/cpython/issues/104490): Define `.PHONY` / virtual make targets consistently and properly.
  * [gh-104106](https://github.com/python/cpython/issues/104106): Add gcc fallback of mkfifoat/mknodat for macOS. Patch by Donghee Na.
  * [gh-103532](https://github.com/python/cpython/issues/103532): The `TKINTER_PROTECT_LOADTK` macro is no longer defined or used in the `_tkinter` module. It was previously only defined when building against Tk 8.4.13 and older, but Tk older than 8.5.12 has been unsupported since [gh-91152](https://github.com/python/cpython/issues/91152).
  * [gh-99069](https://github.com/python/cpython/issues/99069): Extended workaround defining `static_assert` when missing from the libc headers to all clang and gcc builds. In particular, this fixes building on macOS <= 10.10.
  * [gh-100220](https://github.com/python/cpython/issues/100220): Changed the default value of the `SHELL` Makefile variable from `/bin/sh` to `/bin/sh -e` to ensure that complex recipes correctly fail after an error. Previously, `make install` could fail to install some files and yet return a successful result.
  * [gh-90656](https://github.com/python/cpython/issues/90656): Add platform triplets for 64-bit LoongArch:
    * loongarch64-linux-gnusf
    * loongarch64-linux-gnuf32
    * loongarch64-linux-gnu
Patch by Zhang Na.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id147 "Link to this heading")
  * [gh-104623](https://github.com/python/cpython/issues/104623): Update Windows installer to use SQLite 3.42.0.
  * [gh-82814](https://github.com/python/cpython/issues/82814): Fix a potential `[Errno 13] Permission denied` when using [`shutil.copystat()`](https://docs.python.org/3/library/shutil.html#shutil.copystat "shutil.copystat") within Windows Subsystem for Linux (WSL) on a mounted filesystem by adding `errno.EACCES` to the list of ignored errors within the internal implementation.
  * [gh-103088](https://github.com/python/cpython/issues/103088): Fix virtual environment `activate` script having incorrect line endings for Cygwin.
  * [gh-103088](https://github.com/python/cpython/issues/103088): Fixes venvs not working in bash on Windows across different disks
  * [gh-102997](https://github.com/python/cpython/issues/102997): Update Windows installer to use SQLite 3.41.2.
  * [gh-88013](https://github.com/python/cpython/issues/88013): Fixed a bug where [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError") was raised when calling `ntpath.realpath()` with a bytes parameter in some cases.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id148 "Link to this heading")
  * [gh-99834](https://github.com/python/cpython/issues/99834): Update macOS installer to Tcl/Tk 8.6.13.
  * [gh-104623](https://github.com/python/cpython/issues/104623): Update macOS installer to SQLite 3.42.0.
  * [gh-103545](https://github.com/python/cpython/issues/103545): Add `os.PRIO_DARWIN_THREAD`, `os.PRIO_DARWIN_PROCESS`, `os.PRIO_DARWIN_BG` and `os.PRIO_DARWIN_NONUI`. These can be used with `os.setpriority` to run the process at a lower priority and make use of the efficiency cores on Apple Silicon systems.
  * [gh-104180](https://github.com/python/cpython/issues/104180): Support reading SOCKS proxy configuration from macOS System Configuration. Patch by Sam Schott.
  * [gh-60436](https://github.com/python/cpython/issues/60436): update curses textbox to additionally handle backspace using the `curses.ascii.DEL` key press.
  * [gh-102997](https://github.com/python/cpython/issues/102997): Update macOS installer to SQLite 3.41.2.


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id149 "Link to this heading")
  * [gh-104499](https://github.com/python/cpython/issues/104499): Fix completions for Tk Aqua 8.7 (currently blank).
  * [gh-104496](https://github.com/python/cpython/issues/104496): About prints both tcl and tk versions if different (expected someday).
  * [gh-88496](https://github.com/python/cpython/issues/88496): Fix IDLE test hang on macOS.


### Tools/Demos[¶](https://docs.python.org/3/whatsnew/changelog.html#id150 "Link to this heading")
  * [gh-104389](https://github.com/python/cpython/issues/104389): Argument Clinic C converters now accept the `unused` keyword, for wrapping a parameter with [`Py_UNUSED`](https://docs.python.org/3/c-api/intro.html#c.Py_UNUSED "Py_UNUSED"). Patch by Erlend E. Aasland.