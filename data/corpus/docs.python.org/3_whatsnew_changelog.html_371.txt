Title: C API Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: The chunk outlines updates to the C API, including the addition of compiler and system information to the REPL welcome message, the removal of a private macro in favor of a public function, and the relocation of several header files into the cpython/ directory.
---

### C API[¶](https://docs.python.org/3/whatsnew/changelog.html#id317 "Link to this heading")
  * [bpo-43278](https://bugs.python.org/issue?@action=redirect&bpo=43278): Always put compiler and system information on the first line of the REPL welcome message.
  * [bpo-43270](https://bugs.python.org/issue?@action=redirect&bpo=43270): Remove the private `_PyErr_OCCURRED()` macro: use the public [`PyErr_Occurred()`](https://docs.python.org/3/c-api/exceptions.html#c.PyErr_Occurred "PyErr_Occurred") function instead.
  * [bpo-35134](https://bugs.python.org/issue?@action=redirect&bpo=35134): Move odictobject.h, parser_interface.h, picklebufobject.h, pydebug.h, and pyfpe.h into the cpython/ directory. They must not be included directly, as they are already included by Python.h: [Include Files](https://docs.python.org/3/c-api/intro.html#api-includes).
  * [bpo-35134](https://bugs.python.org/issue?@action=redirect&bpo=35134): Move pyarena.h, pyctype.h, and pytime.h into the cpython/ directory. They must not be included directly, as they are already included by Python.h: [Include Files](https://docs.python.org/3/c-api/intro.html#api-includes).
  * [bpo-40170](https://bugs.python.org/issue?@action=redirect&bpo=40170): `PyExceptionClass_Name()` is now always declared as a function, in order to hide implementation details. The macro accessed [`PyTypeObject.tp_name`](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_name "PyTypeObject.tp_name") directly. Patch by Erlend E. Aasland.
  * [bpo-43239](https://bugs.python.org/issue?@action=redirect&bpo=43239): The [`PyCFunction_New()`](https://docs.python.org/3/c-api/structures.html#c.PyCFunction_New "PyCFunction_New") function is now exported in the ABI when compiled with `-fvisibility=hidden`.
  * [bpo-40170](https://bugs.python.org/issue?@action=redirect&bpo=40170): [`PyIter_Check()`](https://docs.python.org/3/c-api/iter.html#c.PyIter_Check "PyIter_Check") is now always declared as a function, in order to hide implementation details. The macro accessed [`PyTypeObject.tp_iternext`](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_iternext "PyTypeObject.tp_iternext") directly. Patch by Erlend E. Aasland.
  * [bpo-40170](https://bugs.python.org/issue?@action=redirect&bpo=40170): Convert [`PyDescr_IsData()`](https://docs.python.org/3/c-api/descriptor.html#c.PyDescr_IsData "PyDescr_IsData") macro to a function to hide implementation details: The macro accessed [`PyTypeObject.tp_descr_set`](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_descr_set "PyTypeObject.tp_descr_set") directly. Patch by Erlend E. Aasland.
  * [bpo-43181](https://bugs.python.org/issue?@action=redirect&bpo=43181): Convert [`PyObject_TypeCheck()`](https://docs.python.org/3/c-api/object.html#c.PyObject_TypeCheck "PyObject_TypeCheck") macro to a static inline function. Patch by Erlend E. Aasland.


## Python 3.10.0 alpha 5[¶](https://docs.python.org/3/whatsnew/changelog.html#python-3-10-0-alpha-5 "Link to this heading")
_Release date: 2021-02-02_
### Security[¶](https://docs.python.org/3/whatsnew/changelog.html#id318 "Link to this heading")
  * [bpo-42938](https://bugs.python.org/issue?@action=redirect&bpo=42938): Avoid static buffers when computing the repr of [`ctypes.c_double`](https://docs.python.org/3/library/ctypes.html#ctypes.c_double "ctypes.c_double") and [`ctypes.c_longdouble`](https://docs.python.org/3/library/ctypes.html#ctypes.c_longdouble "ctypes.c_longdouble") values.