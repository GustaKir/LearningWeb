Title: Build Improvements in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document outlines various build improvements for Python, including updates to support virtual environments on Windows, fixes for the _hashlib build with disabled Blake2, changes to python-config.in, corrections for ICC compiler checks, and Solaris adjustments.
---

### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id429 "Link to this heading")
  * [bpo-38809](https://bugs.python.org/issue?@action=redirect&bpo=38809): On Windows, build scripts will now recognize and use python.exe from an active virtual env.
  * [bpo-38684](https://bugs.python.org/issue?@action=redirect&bpo=38684): Fix _hashlib build when Blake2 is disabled, but OpenSSL supports it.
  * [bpo-38468](https://bugs.python.org/issue?@action=redirect&bpo=38468): Misc/python-config.in now uses `getvar()` for all still existing `sysconfig.get_config_var()` calls. Patch by Joannah Nanjekye.
  * [bpo-37415](https://bugs.python.org/issue?@action=redirect&bpo=37415): Fix stdatomic.h header check for ICC compiler: the ICC implementation lacks atomic_uintptr_t type which is needed by Python.
  * [bpo-38301](https://bugs.python.org/issue?@action=redirect&bpo=38301): In Solaris family, we must be sure to use `-D_REENTRANT`. Patch by Jesús Cea Avión.
  * [bpo-36002](https://bugs.python.org/issue?@action=redirect&bpo=36002): Locate `llvm-profdata` and `llvm-ar` binaries using `AC_PATH_TOOL` rather than `AC_PATH_TARGET_TOOL`.
  * [bpo-37936](https://bugs.python.org/issue?@action=redirect&bpo=37936): The `.gitignore` file systematically keeps “rooted”, with a non-trailing slash, all the rules that are meant to apply to files in a specific place in the repo. Previously, when the intended file to ignore happened to be at the root of the repo, we’d most often accidentally also ignore files and directories with the same name anywhere in the tree.
  * [bpo-37760](https://bugs.python.org/issue?@action=redirect&bpo=37760): The `Tools/unicode/makeunicodedata.py` script, which is used for converting information from the Unicode Character Database into generated code and data used by the methods of [`str`](https://docs.python.org/3/library/stdtypes.html#str "str") and by the [`unicodedata`](https://docs.python.org/3/library/unicodedata.html#module-unicodedata "unicodedata: Access the Unicode Database.") module, now handles each character’s data as a `dataclass` with named attributes, rather than a length-18 list of different fields.
  * [bpo-37936](https://bugs.python.org/issue?@action=redirect&bpo=37936): The `.gitignore` file no longer applies to any files that are in fact tracked in the Git repository. Patch by Greg Price.
  * [bpo-37725](https://bugs.python.org/issue?@action=redirect&bpo=37725): Change “clean” makefile target to also clean the program guided optimization (PGO) data. Previously you would have to use “make clean” and “make profile-removal”, or “make clobber”.
  * [bpo-37707](https://bugs.python.org/issue?@action=redirect&bpo=37707): Mark some individual tests to skip when –pgo is used. The tests marked increase the PGO task time significantly and likely don’t help improve optimization of the final executable.
  * [bpo-36044](https://bugs.python.org/issue?@action=redirect&bpo=36044): Reduce the number of unit tests run for the PGO generation task. This speeds up the task by a factor of about 15x. Running the full unit test suite is slow. This change may result in a slightly less optimized build since not as many code branches will be executed. If you are willing to wait for the much slower build, the old behavior can be restored using ‘./configure [..] PROFILE_TASK=”-m test –pgo-extended”’. We make no guarantees as to which PGO task set produces a faster build. Users who care should run their own relevant benchmarks as results can depend on the environment, workload, and compiler tool chain.
  * [bpo-37468](https://bugs.python.org/issue?@action=redirect&bpo=37468): `make install` no longer installs `wininst-*.exe` files used by distutils bdist_wininst: bdist_wininst only works on Windows.
  * [bpo-37189](https://bugs.python.org/issue?@action=redirect&bpo=37189): Many `PyRun__XXX_()`functions like[`PyRun_String()`](https://docs.python.org/3/c-api/veryhigh.html#c.PyRun_String "PyRun_String") were no longer exported in `libpython38.dll` by mistake. Export them again to fix the ABI compatibility.
  * [bpo-25361](https://bugs.python.org/issue?@action=redirect&bpo=25361): Enables use of SSE2 instructions in Windows 32-bit build.
  * [bpo-36210](https://bugs.python.org/issue?@action=redirect&bpo=36210): Update optional extension module detection for AIX. ossaudiodev and spwd are not applicable for AIX, and are no longer reported as missing. 3rd-party packaging of ncurses (with ASIS support) conflicts with officially supported AIX curses library, so configure AIX to use libcurses.a. However, skip trying to build _curses_panel.
patch by M Felt