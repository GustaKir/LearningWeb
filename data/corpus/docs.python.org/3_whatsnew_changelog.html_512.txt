Title: Library Improvements in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines recent changes in Python's standard library, including enhancements to unittest.mock, the introduction of statistics.NormalDist for normal distributions, and the addition of a faster mean calculation function, statistics.fmean().
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id468 "Link to this heading")
  * [bpo-35512](https://bugs.python.org/issue?@action=redirect&bpo=35512): [`unittest.mock.patch.dict()`](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch.dict "unittest.mock.patch.dict") used as a decorator with string target resolves the target during function call instead of during decorator construction. Patch by Karthikeyan Singaravelan.
  * [bpo-36018](https://bugs.python.org/issue?@action=redirect&bpo=36018): Add statistics.NormalDist, a tool for creating and manipulating normal distributions of random variable. Features a composite class that treats the mean and standard deviation of measurement data as single entity.
  * [bpo-35904](https://bugs.python.org/issue?@action=redirect&bpo=35904): Added statistics.fmean() as a faster, floating-point variant of the existing mean() function.
  * [bpo-35918](https://bugs.python.org/issue?@action=redirect&bpo=35918): Removed broken `has_key` method from multiprocessing.managers.SyncManager.dict. Contributed by Rémi Lapeyre.
  * [bpo-18283](https://bugs.python.org/issue?@action=redirect&bpo=18283): Add support for bytes to [`shutil.which()`](https://docs.python.org/3/library/shutil.html#shutil.which "shutil.which").
  * [bpo-35960](https://bugs.python.org/issue?@action=redirect&bpo=35960): Fix [`dataclasses.field()`](https://docs.python.org/3/library/dataclasses.html#dataclasses.field "dataclasses.field") throwing away empty mapping objects passed as metadata.
  * [bpo-35500](https://bugs.python.org/issue?@action=redirect&bpo=35500): Write expected and actual call parameters on separate lines in [`unittest.mock.Mock.assert_called_with()`](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock.assert_called_with "unittest.mock.Mock.assert_called_with") assertion errors. Contributed by Susan Su.
  * [bpo-35931](https://bugs.python.org/issue?@action=redirect&bpo=35931): The [`pdb`](https://docs.python.org/3/library/pdb.html#module-pdb "pdb: The Python debugger for interactive interpreters.") `debug` command now gracefully handles syntax errors.
  * [bpo-24209](https://bugs.python.org/issue?@action=redirect&bpo=24209): In http.server script, rely on getaddrinfo to bind to preferred address based on the bind parameter. Now default bind or binding to a name may bind to IPv6 or dual-stack, depending on the environment.
  * [bpo-35321](https://bugs.python.org/issue?@action=redirect&bpo=35321): Set `__spec__.origin` of `_frozen_importlib` to frozen so that it matches the behavior of `_frozen_importlib_external`. Patch by Nina Zakharenko.
  * [bpo-35378](https://bugs.python.org/issue?@action=redirect&bpo=35378): Fix a reference issue inside `multiprocessing.Pool` that caused the pool to remain alive if it was deleted without being closed or terminated explicitly. A new strong reference is added to the pool iterators to link the lifetime of the pool to the lifetime of its iterators so the pool does not get destroyed if a pool iterator is still alive.
  * [bpo-34294](https://bugs.python.org/issue?@action=redirect&bpo=34294): re module, fix wrong capturing groups in rare cases. [`re.search()`](https://docs.python.org/3/library/re.html#re.search "re.search"), [`re.findall()`](https://docs.python.org/3/library/re.html#re.findall "re.findall"), [`re.sub()`](https://docs.python.org/3/library/re.html#re.sub "re.sub") and other functions that scan through string looking for a match, should reset capturing groups between two match attempts. Patch by Ma Lin.
  * [bpo-35615](https://bugs.python.org/issue?@action=redirect&bpo=35615): [`weakref`](https://docs.python.org/3/library/weakref.html#module-weakref "weakref: Support for weak references and weak dictionaries."): Fix a RuntimeError when copying a WeakKeyDictionary or a WeakValueDictionary, due to some keys or values disappearing while iterating.
  * [bpo-35606](https://bugs.python.org/issue?@action=redirect&bpo=35606): Implement [`math.prod()`](https://docs.python.org/3/library/math.html#math.prod "math.prod") as analogous function to [`sum()`](https://docs.python.org/3/library/functions.html#sum "sum") that returns the product of a ‘start’ value (default: 1) times an iterable of numbers. Patch by Pablo Galindo.
  * [bpo-32417](https://bugs.python.org/issue?@action=redirect&bpo=32417): Performing arithmetic between [`datetime.datetime`](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime.datetime") subclasses and [`datetime.timedelta`](https://docs.python.org/3/library/datetime.html#datetime.timedelta "datetime.timedelta") now returns an object of the same type as the [`datetime.datetime`](https://docs.python.org/3/library/datetime.html#datetime.datetime "datetime.datetime") subclass. As a result, [`datetime.datetime.astimezone()`](https://docs.python.org/3/library/datetime.html#datetime.datetime.astimezone "datetime.datetime.astimezone") and alternate constructors li