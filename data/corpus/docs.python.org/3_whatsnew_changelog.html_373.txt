Title: Python 3 Library Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent changes in the Python 3 library, including a fixed reference leak in the curses module, updates to pip and setuptools, the deprecation of distutils, and enhanced performance for the tokenize module.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id320 "Link to this heading")
  * [bpo-43108](https://bugs.python.org/issue?@action=redirect&bpo=43108): Fixed a reference leak in the [`curses`](https://docs.python.org/3/library/curses.html#module-curses "curses: An interface to the curses library, providing portable terminal handling. \(Unix\)") module. Patch by Pablo Galindo
  * [bpo-43077](https://bugs.python.org/issue?@action=redirect&bpo=43077): Update the bundled pip to 21.0.1 and setuptools to 52.0.0.
  * [bpo-41282](https://bugs.python.org/issue?@action=redirect&bpo=41282): Deprecate `distutils` in documentation and add warning on import.
  * [bpo-43014](https://bugs.python.org/issue?@action=redirect&bpo=43014): Improve performance of [`tokenize`](https://docs.python.org/3/library/tokenize.html#module-tokenize "tokenize: Lexical scanner for Python source code.") by 20-30%. Patch by Anthony Sottile.
  * [bpo-42323](https://bugs.python.org/issue?@action=redirect&bpo=42323): Fix [`math.nextafter()`](https://docs.python.org/3/library/math.html#math.nextafter "math.nextafter") for NaN on AIX.
  * [bpo-42955](https://bugs.python.org/issue?@action=redirect&bpo=42955): Add [`sys.stdlib_module_names`](https://docs.python.org/3/library/sys.html#sys.stdlib_module_names "sys.stdlib_module_names"), containing the list of the standard library module names. Patch by Victor Stinner.
  * [bpo-42944](https://bugs.python.org/issue?@action=redirect&bpo=42944): Fix `random.Random.sample` when `counts` argument is not `None`.
  * [bpo-42934](https://bugs.python.org/issue?@action=redirect&bpo=42934): Use [`TracebackException`](https://docs.python.org/3/library/traceback.html#traceback.TracebackException "traceback.TracebackException")’s new `compact` param in [`TestResult`](https://docs.python.org/3/library/unittest.html#unittest.TestResult "unittest.TestResult") to reduce time and memory consumed by traceback formatting.
  * [bpo-42931](https://bugs.python.org/issue?@action=redirect&bpo=42931): Add `randbytes()` to `random.__all__`.
  * [bpo-38250](https://bugs.python.org/issue?@action=redirect&bpo=38250): [Enum] Flags consisting of a single bit are now considered canonical, and will be the only flags returned from listing and iterating over a Flag class or a Flag member. Multi-bit flags are considered aliases; they will be returned from lookups and operations that result in their value. Iteration for both Flag and Flag members is in definition order.
  * [bpo-42877](https://bugs.python.org/issue?@action=redirect&bpo=42877): Added the `compact` parameter to the constructor of [`traceback.TracebackException`](https://docs.python.org/3/library/traceback.html#traceback.TracebackException "traceback.TracebackException") to reduce time and memory for use cases that only need to call `TracebackException.format()` and `TracebackException.format_exception_only()`.
  * [bpo-42923](https://bugs.python.org/issue?@action=redirect&bpo=42923): The [`Py_FatalError()`](https://docs.python.org/3/c-api/sys.html#c.Py_FatalError "Py_FatalError") function and the [`faulthandler`](https://docs.python.org/3/library/faulthandler.html#module-faulthandler "faulthandler: Dump the Python traceback.") module now dump the list of extension modules on a fatal error.
  * [bpo-42848](https://bugs.python.org/issue?@action=redirect&bpo=42848): Removed recursion from [`TracebackException`](https://docs.python.org/3/library/traceback.html#traceback.TracebackException "traceback.TracebackException") to allow it to handle long exception chains.
  * [bpo-42901](https://bugs.python.org/issue?@action=redirect&bpo=42901): [Enum] move member creation from `EnumMeta.__new__` to `_proto_member.__set_name__`, allowing members to be created and visible in `__init_subclass__`.
  * [bpo-42780](https://bugs.python.org/issue?@action=redirect&bpo=42780): Fix os.set_inheritable() for O_PATH file descriptors on Linux.
  * [bpo-42866](https://bugs.python.org/issue?@action=redirect&bpo=42866): Fix a reference leak in the `getcodec()` function of CJK codecs. Patch by Victor Stinner.
  * [bpo-42846](https://bugs.python.org/issue?@action=redirect&bpo=42846): Convert the 6 CJK codec extension modules (_codecs_cn, _codecs_hk, _codecs_iso2022, _codecs_jp, _codecs_kr and _codecs_tw) to the multiphase initialization API ([**PEP 489**](https://peps.python.org/pep-0489/)). Patch by Victor Stinner.
  * [bpo-42851](https://bugs.python.org/issue?@action=redirect&bpo=42851): remove __init_subclass__ support for Enum members
  * [bpo-42834](https://bugs.python.org/issue?@action=redirect&bpo=42834): Make internal caches of the `_json` module compatible with subinterpreters.
  * [bpo-41748](https://bugs.python.org/issue?@action=redirect&bpo=41748): Fix HTMLParser parsing rules for element attributes containing commas with spaces. Patch by Karl Dubost.
  * [bpo-40810](https://bugs.python.org/issue?@action=redirect&bpo=40810): Require SQLite 3.7.15 or newer. Patch by Erlend E.