Title: Python 3.12 Changelog Highlights
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section discusses improvements in Python's handling of message info access in Maildir, a fix in the zipfile module for returning empty byte strings, an addition to the `code.interact()` function to manage closure of `sys.stdin`, and a change in `tkinter.Text.count()` to ensure consistent integer return types.
---

These methods speed up accessing a message’s info and/or flags and are useful when it is not necessary to access the message’s contents, as when iterating over a Maildir to find messages with specific flags.
  * [gh-102956](https://github.com/python/cpython/issues/102956): Fix returning of empty byte strings after seek in zipfile module
  * [gh-102895](https://github.com/python/cpython/issues/102895): Added a parameter `local_exit` for [`code.interact()`](https://docs.python.org/3/library/code.html#code.interact "code.interact") to prevent `exit()` and `quit` from closing `sys.stdin` and raise `SystemExit`.
  * [gh-97928](https://github.com/python/cpython/issues/97928): Change the behavior of `tkinter.Text.count()`. It now always returns an integer if one or less counting options are specified. Previously it could return a single count as a 1-tuple, an integer (only if option `"update"` was specified) or `None` if no items found. The result is now the same if `wantobjects` is set to `0`.
  * [gh-96954](https://github.com/python/cpython/issues/96954): Switch the storage of the unicode codepoint names to use a different data-structure, a [directed acyclic word graph](https://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton). This makes the unicodedata shared library about 440 KiB smaller. Contributed by Carl Friedrich Bolz-Tereick using code from the PyPy project.
  * [gh-73561](https://github.com/python/cpython/issues/73561): Omit the interface scope from an IPv6 address when used as Host header by [`http.client`](https://docs.python.org/3/library/http.client.html#module-http.client "http.client: HTTP and HTTPS protocol client \(requires sockets\).").
  * [gh-86826](https://github.com/python/cpython/issues/86826): `zipinfo` now supports the full range of values in the TZ string determined by RFC 8536 and detects all invalid formats. Both Python and C implementations now raise exceptions of the same type on invalid data.


### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id123 "Link to this heading")
  * [gh-111808](https://github.com/python/cpython/issues/111808): Make the default value of `test.support.infinite_recursion()` to be conditional based on whether optimizations were used when compiling the interpreter. This helps with platforms like WASI whose stack size is greatly restricted in debug builds.
  * [gh-110722](https://github.com/python/cpython/issues/110722): Gathering line coverage of standard libraries within the regression test suite is now precise, as well as much faster. Patch by Łukasz Langa.
  * [gh-110367](https://github.com/python/cpython/issues/110367): Make regrtest `--verbose3` option compatible with `--huntrleaks -jN` options. The `./python -m test -j1 -R 3:3 --verbose3` command now works as expected. Patch by Victor Stinner.
  * [gh-111165](https://github.com/python/cpython/issues/111165): Remove no longer used functions `run_unittest()` and `run_doctest()` from the [`test.support`](https://docs.python.org/3/library/test.html#module-test.support "test.support: Support for Python's regression test suite.") module.
  * [gh-110932](https://github.com/python/cpython/issues/110932): Fix regrtest if the `SOURCE_DATE_EPOCH` environment variable is defined: use the variable value as the random seed. Patch by Victor Stinner.
  * [gh-110995](https://github.com/python/cpython/issues/110995): test_gdb: Fix detection of gdb built without Python scripting support. Patch by Victor Stinner.
  * [gh-110918](https://github.com/python/cpython/issues/110918): Test case matching patterns specified by options `--match`, `--ignore`, `--matchfile` and `--ignorefile` are now tested in the order of specification, and the last match determines whether the test case be run or ignored.
  * [gh-108747](https://github.com/python/cpython/issues/108747): Add unit test for `usercustomize` and `sitecustomize` hooks from [`site`](https://docs.python.org/3/library/site.html#module-site "site: Module responsible for site-specific configuration.").