Title: Python Library Changes and Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details various bug fixes and improvements in the Python library, including enhancements to os.set_inheritable() on Android, addressing infinite recursion in typing.py, removal of obsolete Tkinter methods, and improvements in urllib.request for handling redirects and encoding non-ASCII bytes in URLs.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id695 "Link to this heading")
  * [bpo-27057](https://bugs.python.org/issue?@action=redirect&bpo=27057): Fix os.set_inheritable() on Android, ioctl() is blocked by SELinux and fails with EACCESS. The function now falls back to fcntl(). Patch written by Michał Bednarski.
  * [bpo-27014](https://bugs.python.org/issue?@action=redirect&bpo=27014): Fix infinite recursion using typing.py. Thanks to Kalle Tuure!
  * [bpo-27031](https://bugs.python.org/issue?@action=redirect&bpo=27031): Removed dummy methods in Tkinter widget classes: tk_menuBar() and tk_bindForTraversal().
  * [bpo-14132](https://bugs.python.org/issue?@action=redirect&bpo=14132): Fix urllib.request redirect handling when the target only has a query string. Original fix by Ján Janech.
  * [bpo-17214](https://bugs.python.org/issue?@action=redirect&bpo=17214): The “urllib.request” module now percent-encodes non-ASCII bytes found in redirect target URLs. Some servers send Location header fields with non-ASCII bytes, but “http.client” requires the request target to be ASCII-encodable, otherwise a UnicodeEncodeError is raised. Based on patch by Christian Heimes.
  * [bpo-27033](https://bugs.python.org/issue?@action=redirect&bpo=27033): The default value of the decode_data parameter for smtpd.SMTPChannel and smtpd.SMTPServer constructors is changed to False.
  * [bpo-27034](https://bugs.python.org/issue?@action=redirect&bpo=27034): Removed deprecated class asynchat.fifo.
  * [bpo-26870](https://bugs.python.org/issue?@action=redirect&bpo=26870): Added readline.set_auto_history(), which can stop entries being automatically added to the history list. Based on patch by Tyler Crompton.
  * [bpo-26039](https://bugs.python.org/issue?@action=redirect&bpo=26039): zipfile.ZipFile.open() can now be used to write data into a ZIP file, as well as for extracting data. Patch by Thomas Kluyver.
  * [bpo-26892](https://bugs.python.org/issue?@action=redirect&bpo=26892): Honor debuglevel flag in urllib.request.HTTPHandler. Patch contributed by Chi Hsuan Yen.
  * [bpo-22274](https://bugs.python.org/issue?@action=redirect&bpo=22274): In the subprocess module, allow stderr to be redirected to stdout even when stdout is not redirected. Patch by Akira Li.
  * [bpo-26807](https://bugs.python.org/issue?@action=redirect&bpo=26807): mock_open ‘files’ no longer error on readline at end of file. Patch from Yolanda Robla.
  * [bpo-25745](https://bugs.python.org/issue?@action=redirect&bpo=25745): Fixed leaking a userptr in curses panel destructor.
  * [bpo-26977](https://bugs.python.org/issue?@action=redirect&bpo=26977): Removed unnecessary, and ignored, call to sum of squares helper in statistics.pvariance.
  * [bpo-26002](https://bugs.python.org/issue?@action=redirect&bpo=26002): Use bisect in statistics.median instead of a linear search. Patch by Upendra Kuma.
  * [bpo-25974](https://bugs.python.org/issue?@action=redirect&bpo=25974): Make use of new Decimal.as_integer_ratio() method in statistics module. Patch by Stefan Krah.
  * [bpo-26996](https://bugs.python.org/issue?@action=redirect&bpo=26996): Add secrets module as described in [**PEP 506**](https://peps.python.org/pep-0506/).
  * [bpo-26881](https://bugs.python.org/issue?@action=redirect&bpo=26881): The modulefinder module now supports extended opcode arguments.
  * [bpo-23815](https://bugs.python.org/issue?@action=redirect&bpo=23815): Fixed crashes related to directly created instances of types in _tkinter and curses.panel modules.
  * [bpo-17765](https://bugs.python.org/issue?@action=redirect&bpo=17765): weakref.ref() no longer silently ignores keyword arguments. Patch by Georg Brandl.
  * [bpo-26873](https://bugs.python.org/issue?@action=redirect&bpo=26873): xmlrpc now raises ResponseError on unsupported type tags instead of silently return incorrect result.
  * [bpo-26915](https://bugs.python.org/issue?@action=redirect&bpo=26915): The __contains__ methods in the collections ABCs now check for identity before checking equality. This better matches the behavior of the concrete classes, allows sensible handling of NaNs, and makes it easier to reason about container invariants.
  * [bpo-26711](https://bugs.python.org/issue?@action=redirect&bpo=26711): Fixed the comparison of plistlib.Data with other types.
  * [bpo-24114](https://bugs.python.org/issue?@action=redirect&bpo=24114): Fix an uninitialized variable in `ctypes.util`. The bug only occurs on SunOS when the ctypes implementation searches for the `crle` program. Patch by Xiang Zhang. Tested on SunOS by Kees Bos.
  * [bpo-26864](https://bugs.python.org/issue?@action=redirect&bpo=26864): In urllib.request, change the proxy bypass host checking against no_proxy to be case-insensitive, and to not match unrelated host names that happen to have a bypassed hostname as a suffix. Patch by Xiang Zhang.
  * [bpo-24902](https://bugs.python.org/issue?@action=redirect&bpo=24902): Print server URL on http.server startu