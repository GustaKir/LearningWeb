Title: Python Tests Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: Updates to the Python testing framework include a fix for the `test_communicate()` function in `test_asyncio.test_subprocess`, where the timeout was increased from 1 minute to 5 minutes. Additionally, new timeout constants—`LOOPBACK_TIMEOUT`, `INTERNET_TIMEOUT`, `SHORT_TIMEOUT`, and `LONG_TIMEOUT`—have been added to the `test.support` module.
---

### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id428 "Link to this heading")
  * [bpo-38614](https://bugs.python.org/issue?@action=redirect&bpo=38614): Fix test_communicate() of test_asyncio.test_subprocess: use `support.LONG_TIMEOUT` (5 minutes), instead of just 1 minute.
  * [bpo-38614](https://bugs.python.org/issue?@action=redirect&bpo=38614): Add timeout constants to [`test.support`](https://docs.python.org/3/library/test.html#module-test.support "test.support: Support for Python's regression test suite."): [`LOOPBACK_TIMEOUT`](https://docs.python.org/3/library/test.html#test.support.LOOPBACK_TIMEOUT "test.support.LOOPBACK_TIMEOUT"), [`INTERNET_TIMEOUT`](https://docs.python.org/3/library/test.html#test.support.INTERNET_TIMEOUT "test.support.INTERNET_TIMEOUT"), [`SHORT_TIMEOUT`](https://docs.python.org/3/library/test.html#test.support.SHORT_TIMEOUT "test.support.SHORT_TIMEOUT") and [`LONG_TIMEOUT`](https://docs.python.org/3/library/test.html#test.support.LONG_TIMEOUT "test.support.LONG_TIMEOUT").
  * [bpo-38502](https://bugs.python.org/issue?@action=redirect&bpo=38502): test.regrtest now uses process groups in the multiprocessing mode (-jN command line option) if process groups are available: if [`os.setsid()`](https://docs.python.org/3/library/os.html#os.setsid "os.setsid") and [`os.killpg()`](https://docs.python.org/3/library/os.html#os.killpg "os.killpg") functions are available.
  * [bpo-35998](https://bugs.python.org/issue?@action=redirect&bpo=35998): Fix a race condition in test_asyncio.test_start_tls_server_1(). Previously, there was a race condition between the test main() function which replaces the protocol and the test ServerProto protocol which sends ANSWER once it gets HELLO. Now, only the test main() function is responsible to send data, ServerProto no longer sends data.
  * [bpo-38470](https://bugs.python.org/issue?@action=redirect&bpo=38470): Fix `test_compileall.test_compile_dir_maxlevels()` on Windows without long path support: only create 3 subdirectories instead of between 20 and 100 subdirectories.
  * [bpo-37531](https://bugs.python.org/issue?@action=redirect&bpo=37531): On timeout, regrtest no longer attempts to call `popen.communicate()` again: it can hang until all child processes using stdout and stderr pipes completes. Kill the worker process and ignores its output. Change also the faulthandler timeout of the main process from 1 minute to 5 minutes, for Python slowest buildbots.
  * [bpo-38239](https://bugs.python.org/issue?@action=redirect&bpo=38239): Fix test_gdb for Link Time Optimization (LTO) builds.
  * [bpo-38275](https://bugs.python.org/issue?@action=redirect&bpo=38275): test_ssl now handles disabled TLS/SSL versions better. OpenSSL’s crypto policy and run-time settings are recognized and tests for disabled versions are skipped. Tests also accept more TLS minimum_versions for platforms that override OpenSSL’s default with strict settings.
  * [bpo-38271](https://bugs.python.org/issue?@action=redirect&bpo=38271): The private keys for test_ssl were encrypted with 3DES in traditional PKCS#5 format. 3DES and the digest algorithm of PKCS#5 are blocked by some strict crypto policies. Use PKCS#8 format with AES256 encryption instead.
  * [bpo-38270](https://bugs.python.org/issue?@action=redirect&bpo=38270): test.support now has a helper function to check for availability of a hash digest function. Several tests are refactored avoid MD5 and use SHA256 instead. Other tests are marked to use MD5 and skipped when MD5 is disabled.
  * [bpo-37123](https://bugs.python.org/issue?@action=redirect&bpo=37123): Multiprocessing test test_mymanager() now also expects -SIGTERM, not only exitcode 0. BaseManager._finalize_manager() sends SIGTERM to the manager process if it takes longer than 1 second to stop, which happens on slow buildbots.
  * [bpo-38212](https://bugs.python.org/issue?@action=redirect&bpo=38212): Multiprocessing tests: increase test_queue_feeder_donot_stop_onexc() timeout from 1 to 60 seconds.
  * [bpo-38117](https://bugs.python.org/issue?@action=redirect&bpo=38117): Test with OpenSSL 1.1.1d
  * [bpo-38018](https://bugs.python.org/issue?@action=redirect&bpo=38018): Increase code coverage for multiprocessing.shared_memory.
  * [bpo-37805](https://bugs.python.org/issue?@action=redirect&bpo=37805): Add tests for json.dump(…, skipkeys=True). Patch by Donghee Na.
  * [bpo-37531](https://bugs.python.org/issue?@action=redirect&bpo=37531): Enhance regrtest multiprocess timeout: write a message when killing a worker process, catch popen.kill() and popen.wait() exceptions, put a timeout on the second call to popen.communicate().
  * [bpo-37876](https://bugs.python.org/issue?@action=redirect&bpo=37876): Add tests for ROT-13 codec.
  * [bpo-36833](https://bugs.python.org/issue?@action=redirect&bpo=36833): Added tests for `PyDateTime__xxx__GET__xxx_()`macros of the C API of the[`datetime`](https://docs.python.org/3/library/datetime.html#module-datetime "datetime: Basic