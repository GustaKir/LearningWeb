Title: Python 3 Changelog: Tests and Build Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section of the changelog details various test fixes including for `test_asyncio` on macOS, adjustments to the `test_hashlib`, and enhancements to prevent crash reports during tests. Additionally, it notes changes in SSL/TLS protocols in tests due to Debian Unstable's restrictions on older versions.
---

### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id586 "Link to this heading")
  * [bpo-32517](https://bugs.python.org/issue?@action=redirect&bpo=32517): Fix failing `test_asyncio` on macOS 10.12.2+ due to transport of `KqueueSelector` loop was not being closed.
  * [bpo-32721](https://bugs.python.org/issue?@action=redirect&bpo=32721): Fix test_hashlib to not fail if the _md5 module is not built.
  * [bpo-32252](https://bugs.python.org/issue?@action=redirect&bpo=32252): Fix faulthandler_suppress_crash_report() used to prevent core dump files when testing crashes. getrlimit() returns zero on success.
  * [bpo-31518](https://bugs.python.org/issue?@action=redirect&bpo=31518): Debian Unstable has disabled TLS 1.0 and 1.1 for SSLv23_METHOD(). Change TLS/SSL protocol of some tests to PROTOCOL_TLS or PROTOCOL_TLSv1_2 to make them pass on Debian.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id587 "Link to this heading")
  * [bpo-32635](https://bugs.python.org/issue?@action=redirect&bpo=32635): Fix segfault of the crypt module when libxcrypt is provided instead of libcrypt at the system.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id588 "Link to this heading")
  * [bpo-33016](https://bugs.python.org/issue?@action=redirect&bpo=33016): Fix potential use of uninitialized memory in nt._getfinalpathname
  * [bpo-32903](https://bugs.python.org/issue?@action=redirect&bpo=32903): Fix a memory leak in os.chdir() on Windows if the current directory is set to a UNC path.
  * [bpo-31966](https://bugs.python.org/issue?@action=redirect&bpo=31966): Fixed WindowsConsoleIO.write() for writing empty data.
  * [bpo-32409](https://bugs.python.org/issue?@action=redirect&bpo=32409): Ensures activate.bat can handle Unicode contents.
  * [bpo-32457](https://bugs.python.org/issue?@action=redirect&bpo=32457): Improves handling of denormalized executable path when launching Python.
  * [bpo-32370](https://bugs.python.org/issue?@action=redirect&bpo=32370): Use the correct encoding for ipconfig output in the uuid module. Patch by Segev Finer.
  * [bpo-29248](https://bugs.python.org/issue?@action=redirect&bpo=29248): Fix [`os.readlink()`](https://docs.python.org/3/library/os.html#os.readlink "os.readlink") on Windows, which was mistakenly treating the `PrintNameOffset` field of the reparse data buffer as a number of characters instead of bytes. Patch by Craig Holmquist and SSE4.
  * [bpo-32588](https://bugs.python.org/issue?@action=redirect&bpo=32588): Create standalone _distutils_findvs module.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id589 "Link to this heading")
  * [bpo-32726](https://bugs.python.org/issue?@action=redirect&bpo=32726): Provide an additional, more modern macOS installer variant that supports macOS 10.9+ systems in 64-bit mode only. Upgrade the supplied third-party libraries to OpenSSL 1.0.2n, XZ 5.2.3, and SQLite 3.22.0. The 10.9+ installer now links with and supplies its own copy of Tcl/Tk 8.6.8.


### IDLE[¶](https://docs.python.org/3/whatsnew/changelog.html#id590 "Link to this heading")
  * [bpo-32984](https://bugs.python.org/issue?@action=redirect&bpo=32984): Set `__file__` while running a startup file. Like Python, IDLE optionally runs one startup file in the Shell window before presenting the first interactive input prompt. For IDLE, `-s` runs a file named in environmental variable `IDLESTARTUP` or [`PYTHONSTARTUP`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONSTARTUP); `-r file` runs `file`. Python sets `__file__` to the startup file name before running the file and unsets it before the first prompt. IDLE now does the same when run normally, without the `-n` option.
  * [bpo-32940](https://bugs.python.org/issue?@action=redirect&bpo=32940): Simplify and rename StringTranslatePseudoMapping in pyparse.
  * [bpo-32916](https://bugs.python.org/issue?@action=redirect&bpo=32916): Change `str` to `code` in pyparse.
  * [bpo-32905](https://bugs.python.org/issue?@action=redirect&bpo=32905): Remove unused code in pyparse module.
  * [bpo-32874](https://bugs.python.org/issue?@action=redirect&bpo=32874): Add tests for pyparse.
  * [bpo-32837](https://bugs.python.org/issue?@action=redirect&bpo=32837): Using the system and place-dependent default encoding for open() is a bad idea for IDLE’s system and location-independent files.
  * [bpo-32826](https://bugs.python.org/issue?@action=redirect&bpo=32826): Add “encoding=utf-8” to open() in IDLE’s test_help_about. GUI test test_file_buttons() only looks at initial ascii-only lines, but failed on systems where open() defaults to ‘ascii’ because readline() internally reads and decodes far enough ahead to encounter a non-ascii character in CREDITS.txt.
  * [bpo-32765](https://bugs.python.org/issue?@action=redirect&bpo=32765): Update configdialog General tab docstring to add new widgets to the widget list.