Title: Python Changelog Updates
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This document contains various updates and bug fixes including the adoption of the FASTCALL convention for `FutureIter.throw()`, the deprecation of multiple modules as outlined in PEP 594, changes to `asyncio.wait()` regarding coroutine object handling, and normalization of `repr()` for asyncio objects. Additional bug fixes include resolving issues with doctests using globals.
---

Patch by Arie Bovenberg.
  * [bpo-47057](https://bugs.python.org/issue?@action=redirect&bpo=47057): Use FASTCALL convention for `FutureIter.throw()`
  * [bpo-47061](https://bugs.python.org/issue?@action=redirect&bpo=47061): Deprecate the various modules listed by [**PEP 594**](https://peps.python.org/pep-0594/):
aifc, asynchat, asyncore, audioop, cgi, cgitb, chunk, crypt, imghdr, msilib, nntplib, nis, ossaudiodev, pipes, smtpd, sndhdr, spwd, sunau, telnetlib, uu, xdrlib
  * [bpo-34790](https://bugs.python.org/issue?@action=redirect&bpo=34790): Remove passing coroutine objects to [`asyncio.wait()`](https://docs.python.org/3/library/asyncio-task.html#asyncio.wait "asyncio.wait").
  * [bpo-47039](https://bugs.python.org/issue?@action=redirect&bpo=47039): Normalize `repr()` of asyncio future and task objects.
  * [bpo-2604](https://bugs.python.org/issue?@action=redirect&bpo=2604): Fix bug where doctests using globals would fail when run multiple times.
  * [bpo-45150](https://bugs.python.org/issue?@action=redirect&bpo=45150): Add [`hashlib.file_digest()`](https://docs.python.org/3/library/hashlib.html#hashlib.file_digest "hashlib.file_digest") helper for efficient hashing of file object.
  * [bpo-34861](https://bugs.python.org/issue?@action=redirect&bpo=34861): Made cumtime the default sorting key for cProfile
  * [bpo-45997](https://bugs.python.org/issue?@action=redirect&bpo=45997): Fix [`asyncio.Semaphore`](https://docs.python.org/3/library/asyncio-sync.html#asyncio.Semaphore "asyncio.Semaphore") re-aquiring FIFO order.
  * [bpo-47022](https://bugs.python.org/issue?@action=redirect&bpo=47022): The `asynchat`, `asyncore` and `smtpd` modules have been deprecated since at least Python 3.6. Their documentation and deprecation warnings and have now been updated to note they will removed in Python 3.12 ([**PEP 594**](https://peps.python.org/pep-0594/)).
  * [bpo-43253](https://bugs.python.org/issue?@action=redirect&bpo=43253): Fix a crash when closing transports where the underlying socket handle is already invalid on the Proactor event loop.
  * [bpo-40280](https://bugs.python.org/issue?@action=redirect&bpo=40280): [`select.select()`](https://docs.python.org/3/library/select.html#select.select "select.select") now passes `NULL` to `select` for each empty fdset.
  * [bpo-47004](https://bugs.python.org/issue?@action=redirect&bpo=47004): Apply bugfixes from importlib_metadata 4.11.3, including bugfix for EntryPoint.extras, which was returning match objects and not the extras strings.
  * [bpo-46998](https://bugs.python.org/issue?@action=redirect&bpo=46998): Allow subclassing of [`typing.Any`](https://docs.python.org/3/library/typing.html#typing.Any "typing.Any"). Patch by Shantanu Jain.
  * [bpo-46995](https://bugs.python.org/issue?@action=redirect&bpo=46995): Deprecate missing [`asyncio.Task.set_name()`](https://docs.python.org/3/library/asyncio-task.html#asyncio.Task.set_name "asyncio.Task.set_name") for third-party task implementations, schedule making it mandatory in Python 3.13.
  * [bpo-46994](https://bugs.python.org/issue?@action=redirect&bpo=46994): Accept explicit contextvars.Context in [`asyncio.create_task()`](https://docs.python.org/3/library/asyncio-task.html#asyncio.create_task "asyncio.create_task") and [`asyncio.loop.create_task()`](https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.loop.create_task "asyncio.loop.create_task").
  * [bpo-46981](https://bugs.python.org/issue?@action=redirect&bpo=46981): `typing.get_args(typing.Tuple[()])` now returns `()` instead of `((),)`.
  * [bpo-46968](https://bugs.python.org/issue?@action=redirect&bpo=46968): Add `os.sysconf_names['SC_MINSIGSTKSZ']`.
  * [bpo-46985](https://bugs.python.org/issue?@action=redirect&bpo=46985): Upgrade pip wheel bundled with ensurepip (pip 22.0.4)
  * [bpo-46968](https://bugs.python.org/issue?@action=redirect&bpo=46968): [`faulthandler`](https://docs.python.org/3/library/faulthandler.html#module-faulthandler "faulthandler: Dump the Python traceback."): On Linux 5.14 and newer, dynamically determine size of signal handler stack size CPython allocates using `getauxval(AT_MINSIGSTKSZ)`. This changes allows for Python extensionâ€™s request to Linux kernel to use AMX_TILE instruction set on Sapphire Rapids Xeon processor to succeed, unblocking use of the ISA in frameworks.
  * [bpo-46917](https://bugs.python.org/issue?@action=redirect&bpo=46917): The [`math.nan`](https://docs.python.org/3/library/math.html#math.nan "math.nan") value is now always available. Patch by Victor Stinner.
  * [bpo-46955](https://bugs.python.org/issue?@action=redirect&bpo=46955): Expose `asyncio.base_events.Server` as [`asyncio.Server`](https://docs.python.org/3/library/asyncio-eventloop.html#asyncio.Server "asyncio.Server").