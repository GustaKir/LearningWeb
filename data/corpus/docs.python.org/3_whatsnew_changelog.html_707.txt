Title: Python 3 Changelog: Recent Fixes and Improvements
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: The changelog details various fixes, including writing ZIP files correctly, handling non-BMP characters in plistlib, preventing crashes when unpickling itertools objects, addressing potential integer overflows in the mmap module, and correcting calendar functions for extreme months. Notable bug fixes include enhancements to distutils and ensuring offsets in ZIP files comply with specifications.
---

26293](https://bugs.python.org/issue?@action=redirect&bpo=26293): Fixed writing ZIP files that starts not from the start of the file. Offsets in ZIP file now are relative to the start of the archive in conforming to the specification.
  * [bpo-28321](https://bugs.python.org/issue?@action=redirect&bpo=28321): Fixed writing non-BMP characters with binary format in plistlib.
  * [bpo-28322](https://bugs.python.org/issue?@action=redirect&bpo=28322): Fixed possible crashes when unpickle itertools objects from incorrect pickle data. Based on patch by John Leitch.
  * Fix possible integer overflows and crashes in the mmap module with unusual usage patterns.
  * [bpo-1703178](https://bugs.python.org/issue?@action=redirect&bpo=1703178): Fix the ability to pass the –link-objects option to the distutils build_ext command.
  * [bpo-28253](https://bugs.python.org/issue?@action=redirect&bpo=28253): Fixed calendar functions for extreme months: 0001-01 and 9999-12. Methods itermonthdays() and itermonthdays2() are reimplemented so that they don’t call itermonthdates() which can cause datetime.date under/overflow.
  * [bpo-28275](https://bugs.python.org/issue?@action=redirect&bpo=28275): Fixed possible use after free in the decompress() methods of the LZMADecompressor and BZ2Decompressor classes. Original patch by John Leitch.
  * [bpo-27897](https://bugs.python.org/issue?@action=redirect&bpo=27897): Fixed possible crash in sqlite3.Connection.create_collation() if pass invalid string-like object as a name. Patch by Xiang Zhang.
  * [bpo-18893](https://bugs.python.org/issue?@action=redirect&bpo=18893): Fix invalid exception handling in Lib/ctypes/macholib/dyld.py. Patch by Madison May.
  * [bpo-27611](https://bugs.python.org/issue?@action=redirect&bpo=27611): Fixed support of default root window in the tkinter.tix module.
  * [bpo-27348](https://bugs.python.org/issue?@action=redirect&bpo=27348): In the traceback module, restore the formatting of exception messages like “Exception: None”. This fixes a regression introduced in 3.5a2.
  * [bpo-25651](https://bugs.python.org/issue?@action=redirect&bpo=25651): Allow false values to be used for msg parameter of subTest().
  * [bpo-27932](https://bugs.python.org/issue?@action=redirect&bpo=27932): Prevent memory leak in win32_ver().
  * Fix UnboundLocalError in socket._sendfile_use_sendfile.
  * [bpo-28075](https://bugs.python.org/issue?@action=redirect&bpo=28075): Check for ERROR_ACCESS_DENIED in Windows implementation of os.stat(). Patch by Eryk Sun.
  * [bpo-25270](https://bugs.python.org/issue?@action=redirect&bpo=25270): Prevent codecs.escape_encode() from raising SystemError when an empty bytestring is passed.
  * [bpo-28181](https://bugs.python.org/issue?@action=redirect&bpo=28181): Get antigravity over HTTPS. Patch by Kaartic Sivaraam.
  * [bpo-25895](https://bugs.python.org/issue?@action=redirect&bpo=25895): Enable WebSocket URL schemes in urllib.parse.urljoin. Patch by Gergely Imreh and Markus Holtermann.
  * [bpo-27599](https://bugs.python.org/issue?@action=redirect&bpo=27599): Fixed buffer overrun in binascii.b2a_qp() and binascii.a2b_qp().
  * [bpo-19003](https://bugs.python.org/issue?@action=redirect&bpo=19003): m email.generator now replaces only `\r` and/or `\n` line endings, per the RFC, instead of all unicode line endings.
  * [bpo-28019](https://bugs.python.org/issue?@action=redirect&bpo=28019): itertools.count() no longer rounds non-integer step in range between 1.0 and 2.0 to 1.
  * [bpo-25969](https://bugs.python.org/issue?@action=redirect&bpo=25969): Update the lib2to3 grammar to handle the unpacking generalizations added in 3.5.
  * [bpo-14977](https://bugs.python.org/issue?@action=redirect&bpo=14977): mailcap now respects the order of the lines in the mailcap files (“first match”), as required by RFC 1542. Patch by Michael Lazar.
  * [bpo-24594](https://bugs.python.org/issue?@action=redirect&bpo=24594): Validates persist parameter when opening MSI database
  * [bpo-17582](https://bugs.python.org/issue?@action=redirect&bpo=17582): xml.etree.ElementTree nows preserves whitespaces in attributes (Patch by Duane Griffin. Reviewed and approved by Stefan Behnel.)
  * [bpo-28047](https://bugs.python.org/issue?@action=redirect&bpo=28047): Fixed calculation of line length used for the base64 CTE in the new email policies.
  * [bpo-27445](https://bugs.python.org/issue?@action=redirect&bpo=27445): Don’t pass str(_charset) to MIMEText.set_payload(). Patch by Claude Paroz.
  * [bpo-22450](https://bugs.python.org/issue?@action=redirect&bpo=22450): urllib now includes an `Accept: */*` header among the default headers.