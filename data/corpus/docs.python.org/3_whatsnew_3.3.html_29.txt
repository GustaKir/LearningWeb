Title: Updates to smtpd and smtplib Modules in Python 3.3
URL: https://docs.python.org/3/whatsnew/3.3.html
Summary: The `smtpd` module now includes support for RFC 5321 (extended SMTP) and RFC 1870 (size extension), enabled by client-initiated `EHLO` commands. Additionally, the `smtplib` module features updates to `SMTP`, `SMTP_SSL`, and `LMTP` functionalities.
---

### smtpd[¶](https://docs.python.org/3/whatsnew/3.3.html#smtpd "Link to this heading")
The `smtpd` module now supports [**RFC 5321**](https://datatracker.ietf.org/doc/html/rfc5321.html) (extended SMTP) and [**RFC 1870**](https://datatracker.ietf.org/doc/html/rfc1870.html) (size extension). Per the standard, these extensions are enabled if and only if the client initiates the session with an `EHLO` command.
(Initial `ELHO` support by Alberto Trevino. Size extension by Juhana Jauhiainen. Substantial additional work on the patch contributed by Michele Orrù and Dan Boswell. [bpo-8739](https://bugs.python.org/issue?@action=redirect&bpo=8739))
### smtplib[¶](https://docs.python.org/3/whatsnew/3.3.html#smtplib "Link to this heading")
The [`SMTP`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP "smtplib.SMTP"), [`SMTP_SSL`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP_SSL "smtplib.SMTP_SSL"), and [`LMTP`](https://docs.python.org/3/library/smtplib.html#smtplib.LMTP "smtplib.LMTP") classes now accept a `source_address` keyword argument to specify the `(host, port)` to use as the source address in the bind call when creating the outgoing socket. (Contributed by Paulo Scardine in [bpo-11281](https://bugs.python.org/issue?@action=redirect&bpo=11281).)
[`SMTP`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP "smtplib.SMTP") now supports the context management protocol, allowing an `SMTP` instance to be used in a `with` statement. (Contributed by Giampaolo Rodolà in [bpo-11289](https://bugs.python.org/issue?@action=redirect&bpo=11289).)
The [`SMTP_SSL`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP_SSL "smtplib.SMTP_SSL") constructor and the [`starttls()`](https://docs.python.org/3/library/smtplib.html#smtplib.SMTP.starttls "smtplib.SMTP.starttls") method now accept an SSLContext parameter to control parameters of the secure channel. (Contributed by Kasun Herath in [bpo-8809](https://bugs.python.org/issue?@action=redirect&bpo=8809).)
### socket[¶](https://docs.python.org/3/whatsnew/3.3.html#socket "Link to this heading")
  * The [`socket`](https://docs.python.org/3/library/socket.html#socket.socket "socket.socket") class now exposes additional methods to process ancillary data when supported by the underlying platform:
    * [`sendmsg()`](https://docs.python.org/3/library/socket.html#socket.socket.sendmsg "socket.socket.sendmsg")
    * [`recvmsg()`](https://docs.python.org/3/library/socket.html#socket.socket.recvmsg "socket.socket.recvmsg")
    * [`recvmsg_into()`](https://docs.python.org/3/library/socket.html#socket.socket.recvmsg_into "socket.socket.recvmsg_into")
(Contributed by David Watson in [bpo-6560](https://bugs.python.org/issue?@action=redirect&bpo=6560), based on an earlier patch by Heiko Wundram)
  * The [`socket`](https://docs.python.org/3/library/socket.html#socket.socket "socket.socket") class now supports the PF_CAN protocol family (<https://en.wikipedia.org/wiki/Socketcan>), on Linux (<https://lwn.net/Articles/253425>).
(Contributed by Matthias Fuchs, updated by Tiago Gonçalves in [bpo-10141](https://bugs.python.org/issue?@action=redirect&bpo=10141).)
  * The [`socket`](https://docs.python.org/3/library/socket.html#socket.socket "socket.socket") class now supports the PF_RDS protocol family (<https://en.wikipedia.org/wiki/Reliable_Datagram_Sockets> and [https://oss.oracle.com/projects/rds](https://web.archive.org/web/20130115155505/https://oss.oracle.com/projects/rds/)).
  * The [`socket`](https://docs.python.org/3/library/socket.html#socket.socket "socket.socket") class now supports the `PF_SYSTEM` protocol family on OS X. (Contributed by Michael Goderbauer in [bpo-13777](https://bugs.python.org/issue?@action=redirect&bpo=13777).)
  * New function [`sethostname()`](https://docs.python.org/3/library/socket.html#socket.sethostname "socket.sethostname") allows the hostname to be set on Unix systems if the calling process has sufficient privileges. (Contributed by Ross Lagerwall in [bpo-10866](https://bugs.python.org/issue?@action=redirect&bpo=10866).)