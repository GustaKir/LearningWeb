Title: Build Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines several improvements and fixes related to building Python, including adjustments to the WASI host runner, changes in the Windows build process for frozen modules, enhancements to the check-clean-src step for out-of-tree builds, and the addition of thread sanitizer (TSAN) support.
---

### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id116 "Link to this heading")
  * [gh-114013](https://github.com/python/cpython/issues/114013): Fix `Tools/wasm/wasi.py` to not include the path to `python.wasm` as part of `HOSTRUNNER`. The environment variable is meant to specify how to run the WASI host only, having `python.wasm` and relevant flags appended to the `HOSTRUNNER`. This fixes `make test` work.
  * [gh-113258](https://github.com/python/cpython/issues/113258): Changed the Windows build to write out generated frozen modules into the build tree instead of the source tree.
  * [gh-112305](https://github.com/python/cpython/issues/112305): Fixed the `check-clean-src` step performed on out of tree builds to detect errant `$(srcdir)/Python/frozen_modules/*.h` files and recommend appropriate source tree cleanup steps to get a working build again.
  * [gh-112536](https://github.com/python/cpython/issues/112536): Add support for thread sanitizer (TSAN)
  * [gh-112867](https://github.com/python/cpython/issues/112867): Fix the build for the case that WITH_PYMALLOC_RADIX_TREE=0 set.
  * [gh-103065](https://github.com/python/cpython/issues/103065): Introduce `Tools/wasm/wasi.py` to simplify doing a WASI build.
  * [bpo-11102](https://bugs.python.org/issue?@action=redirect&bpo=11102): The [`os.major()`](https://docs.python.org/3/library/os.html#os.major "os.major"), [`os.makedev()`](https://docs.python.org/3/library/os.html#os.makedev "os.makedev"), and [`os.minor()`](https://docs.python.org/3/library/os.html#os.minor "os.minor") functions are now available on HP-UX v3.
  * [bpo-36351](https://bugs.python.org/issue?@action=redirect&bpo=36351): Do not set ipv6type when cross-compiling.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id117 "Link to this heading")
  * [gh-114096](https://github.com/python/cpython/issues/114096): Process privileges that are activated for creating directory junctions are now restored afterwards, avoiding behaviour changes in other parts of the program.
  * [gh-111877](https://github.com/python/cpython/issues/111877): [`os.stat()`](https://docs.python.org/3/library/os.html#os.stat "os.stat") calls were returning incorrect time values for files that could not be accessed directly.
  * [gh-111973](https://github.com/python/cpython/issues/111973): Update Windows installer to use SQLite 3.44.2.
  * [gh-113009](https://github.com/python/cpython/issues/113009): [`multiprocessing`](https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing "multiprocessing: Process-based parallelism."): On Windows, fix a race condition in `Process.terminate()`: no longer set the `returncode` attribute to always call `WaitForSingleObject()` in `Process.wait()`. Previously, sometimes the process was still running after `TerminateProcess()` even if `GetExitCodeProcess()` is not `STILL_ACTIVE`. Patch by Victor Stinner.
  * [gh-86179](https://github.com/python/cpython/issues/86179): Fixes path calculations when launching Python on Windows through a symlink.
  * [gh-71383](https://github.com/python/cpython/issues/71383): Update Tcl/Tk in Windows installer to 8.6.13 with a patch to suppress incorrect ThemeChanged warnings.
  * [gh-111650](https://github.com/python/cpython/issues/111650): Ensures the `Py_GIL_DISABLED` preprocessor variable is defined in `pyconfig.h` so that extension modules written in C are able to use it.
  * [gh-112278](https://github.com/python/cpython/issues/112278): Reduce the time cost for some functions in [`platform`](https://docs.python.org/3/library/platform.html#module-platform "platform: Retrieves as much platform identifying data as possible.") on Windows if current user has no permission to the WMI.
  * [gh-73427](https://github.com/python/cpython/issues/73427): Deprecate [`sys._enablelegacywindowsfsencoding()`](https://docs.python.org/3/library/sys.html#sys._enablelegacywindowsfsencoding "sys._enablelegacywindowsfsencoding"). Use [`PYTHONLEGACYWINDOWSFSENCODING`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONLEGACYWINDOWSFSENCODING) instead. Patch by Inada Naoki.
  * [gh-87868](https://github.com/python/cpython/issues/87868): Correctly sort and remove duplicate environment variables in `_winapi.CreateProcess()`.
  * [bpo-37308](https://bugs.python.org/issue?@action=redirect&bpo=37308): Fix mojibake in [`mmap.mmap`](https://docs.python.org/3/library/mmap.html#mmap.mmap "mmap.mmap") when using a non-ASCII _tagname_ argument on Windows.