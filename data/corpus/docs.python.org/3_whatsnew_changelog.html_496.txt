Title: Changes to Tests in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section outlines modifications made to various test modules in Python, including updates to use 'catch_unraisable_exception' instead of 'captured_stderr', fixes for 'test_memfd_create' on older Linux kernels, and testing with OpenSSL 1.1.1c.
---

### Tests[¶](https://docs.python.org/3/whatsnew/changelog.html#id439 "Link to this heading")
  * [bpo-37069](https://bugs.python.org/issue?@action=redirect&bpo=37069): Modify test_coroutines, test_cprofile, test_generators, test_raise, test_ssl and test_yield_from to use [`test.support.catch_unraisable_exception()`](https://docs.python.org/3/library/test.html#test.support.catch_unraisable_exception "test.support.catch_unraisable_exception") rather than [`test.support.captured_stderr()`](https://docs.python.org/3/library/test.html#test.support.captured_stderr "test.support.captured_stderr").
  * [bpo-37098](https://bugs.python.org/issue?@action=redirect&bpo=37098): Fix test_memfd_create on older Linux Kernels.
  * [bpo-37081](https://bugs.python.org/issue?@action=redirect&bpo=37081): Test with OpenSSL 1.1.1c
  * [bpo-36829](https://bugs.python.org/issue?@action=redirect&bpo=36829): Add [`test.support.catch_unraisable_exception()`](https://docs.python.org/3/library/test.html#test.support.catch_unraisable_exception "test.support.catch_unraisable_exception"): context manager catching unraisable exception using [`sys.unraisablehook()`](https://docs.python.org/3/library/sys.html#sys.unraisablehook "sys.unraisablehook").
  * [bpo-36915](https://bugs.python.org/issue?@action=redirect&bpo=36915): The main regrtest process now always removes all temporary directories of worker processes even if they crash or if they are killed on KeyboardInterrupt (CTRL+c).
  * [bpo-36719](https://bugs.python.org/issue?@action=redirect&bpo=36719): “python3 -m test -jN …” now continues the execution of next tests when a worker process crash (CHILD_ERROR state). Previously, the test suite stopped immediately. Use –failfast to stop at the first error.
  * [bpo-36816](https://bugs.python.org/issue?@action=redirect&bpo=36816): Update Lib/test/selfsigned_pythontestdotnet.pem to match self-signed.pythontest.net’s new TLS certificate.
  * [bpo-35925](https://bugs.python.org/issue?@action=redirect&bpo=35925): Skip httplib and nntplib networking tests when they would otherwise fail due to a modern OS or distro with a default OpenSSL policy of rejecting connections to servers with weak certificates.
  * [bpo-36782](https://bugs.python.org/issue?@action=redirect&bpo=36782): Add tests for several C API functions in the [`datetime`](https://docs.python.org/3/library/datetime.html#module-datetime "datetime: Basic date and time types.") module. Patch by Edison Abahurire.
  * [bpo-36342](https://bugs.python.org/issue?@action=redirect&bpo=36342): Fix test_multiprocessing in test_venv if platform lacks functioning sem_open.


### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id440 "Link to this heading")
  * [bpo-36721](https://bugs.python.org/issue?@action=redirect&bpo=36721): To embed Python into an application, a new `--embed` option must be passed to `python3-config --libs --embed` to get `-lpython3.8` (link the application to libpython). To support both 3.8 and older, try `python3-config --libs --embed` first and fallback to `python3-config --libs` (without `--embed`) if the previous command fails.
Add a pkg-config `python-3.8-embed` module to embed Python into an application: `pkg-config python-3.8-embed --libs` includes `-lpython3.8`. To support both 3.8 and older, try `pkg-config python-X.Y-embed --libs` first and fallback to `pkg-config python-X.Y --libs` (without `--embed`) if the previous command fails (replace `X.Y` with the Python version).
On the other hand, `pkg-config python3.8 --libs` no longer contains `-lpython3.8`. C extensions must not be linked to libpython (except on Android, case handled by the script); this change is backward incompatible on purpose.
  * [bpo-36786](https://bugs.python.org/issue?@action=redirect&bpo=36786): “make install” now runs compileall in parallel.


### Windows[¶](https://docs.python.org/3/whatsnew/changelog.html#id441 "Link to this heading")
  * [bpo-36965](https://bugs.python.org/issue?@action=redirect&bpo=36965): include of STATUS_CONTROL_C_EXIT without depending on MSC compiler
  * [bpo-35926](https://bugs.python.org/issue?@action=redirect&bpo=35926): Update to OpenSSL 1.1.1b for Windows.
  * [bpo-29883](https://bugs.python.org/issue?@action=redirect&bpo=29883): Add Windows support for UDP transports for the Proactor Event Loop. Patch by Adam Meily.
  * [bpo-33407](https://bugs.python.org/issue?@action=redirect&bpo=33407): The [`Py_DEPRECATED()`](https://docs.python.org/3/c-api/intro.html#c.Py_DEPRECATED "Py_DEPRECATED") macro has been implemented for MSVC.


### macOS[¶](https://docs.python.org/3/whatsnew/changelog.html#id442 "Link to this heading")
  * [bpo-36231](https://bugs.python.org/issue?@action=redirect&bpo=36231): Support building Python on macOS without /usr/include installed. As of macOS 10.14, system header files are only available within an SDK provided by either the Command Line Tools or the Xcode app.