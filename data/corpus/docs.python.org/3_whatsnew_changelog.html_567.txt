Title: Library Changes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details various bug fixes and improvements in the Python library, including a regression fix for ctypes on macOS, crash resolution in the dbm.ndbm get() method, a fix for multiprocessing issues with newer glibcs, and corrections in the quoting of the Comment attribute in http.cookies.SimpleCookie, among other updates.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id500 "Link to this heading")
  * [bpo-33281](https://bugs.python.org/issue?@action=redirect&bpo=33281): Fix ctypes.util.find_library regression on macOS.
  * [bpo-33383](https://bugs.python.org/issue?@action=redirect&bpo=33383): Fixed crash in the get() method of the [`dbm.ndbm`](https://docs.python.org/3/library/dbm.html#module-dbm.ndbm "dbm.ndbm: The New Database Manager \(Unix\)") database object when it is called with a single argument.
  * [bpo-33329](https://bugs.python.org/issue?@action=redirect&bpo=33329): Fix multiprocessing regression on newer glibcs
  * [bpo-991266](https://bugs.python.org/issue?@action=redirect&bpo=991266): Fix quoting of the `Comment` attribute of [`http.cookies.SimpleCookie`](https://docs.python.org/3/library/http.cookies.html#http.cookies.SimpleCookie "http.cookies.SimpleCookie").
  * [bpo-33131](https://bugs.python.org/issue?@action=redirect&bpo=33131): Upgrade bundled version of pip to 10.0.1.
  * [bpo-33308](https://bugs.python.org/issue?@action=redirect&bpo=33308): Fixed a crash in the `parser` module when converting an ST object to a tree of tuples or lists with `line_info=False` and `col_info=True`.
  * [bpo-33266](https://bugs.python.org/issue?@action=redirect&bpo=33266): lib2to3 now recognizes `rf'...'` strings.
  * [bpo-11594](https://bugs.python.org/issue?@action=redirect&bpo=11594): Ensure line-endings are respected when using lib2to3.
  * [bpo-33254](https://bugs.python.org/issue?@action=redirect&bpo=33254): Have [`importlib.resources.contents()`](https://docs.python.org/3/library/importlib.resources.html#importlib.resources.contents "importlib.resources.contents") and [`importlib.abc.ResourceReader.contents()`](https://docs.python.org/3/library/importlib.html#importlib.abc.ResourceReader.contents "importlib.abc.ResourceReader.contents") return an [iterable](https://docs.python.org/3/glossary.html#term-iterable) instead of an [iterator](https://docs.python.org/3/glossary.html#term-iterator).
  * [bpo-33256](https://bugs.python.org/issue?@action=redirect&bpo=33256): Fix display of `<module>` call in the html produced by `cgitb.html()`. Patch by Stéphane Blondon.
  * [bpo-33185](https://bugs.python.org/issue?@action=redirect&bpo=33185): Fixed regression when running pydoc with the [`-m`](https://docs.python.org/3/using/cmdline.html#cmdoption-m) switch. (The regression was introduced in 3.7.0b3 by the resolution of [bpo-33053](https://bugs.python.org/issue?@action=redirect&bpo=33053)) This fix also changed pydoc to add `os.getcwd()` to [`sys.path`](https://docs.python.org/3/library/sys.html#sys.path "sys.path") when necessary, rather than adding `"."`.
  * [bpo-33169](https://bugs.python.org/issue?@action=redirect&bpo=33169): Delete entries of `None` in [`sys.path_importer_cache`](https://docs.python.org/3/library/sys.html#sys.path_importer_cache "sys.path_importer_cache") when `importlib.machinery.invalidate_caches()` is called.
  * [bpo-33217](https://bugs.python.org/issue?@action=redirect&bpo=33217): Deprecate looking up non-Enum objects in Enum classes and Enum members (will raise [`TypeError`](https://docs.python.org/3/library/exceptions.html#TypeError "TypeError") in 3.8+).
  * [bpo-33203](https://bugs.python.org/issue?@action=redirect&bpo=33203): `random.Random.choice()` now raises `IndexError` for empty sequences consistently even when called from subclasses without a `getrandbits()` implementation.
  * [bpo-33224](https://bugs.python.org/issue?@action=redirect&bpo=33224): Update difflib.mdiff() for [**PEP 479**](https://peps.python.org/pep-0479/). Convert an uncaught StopIteration in a generator into a return-statement.
  * [bpo-33209](https://bugs.python.org/issue?@action=redirect&bpo=33209): End framing at the end of C implementation of [`pickle.Pickler.dump()`](https://docs.python.org/3/library/pickle.html#pickle.Pickler.dump "pickle.Pickler.dump").
  * [bpo-20104](https://bugs.python.org/issue?@action=redirect&bpo=20104): Improved error handling and fixed a reference leak in [`os.posix_spawn()`](https://docs.python.org/3/library/os.html#os.posix_spawn "os.posix_spawn").
  * [bpo-33175](https://bugs.python.org/issue?@action=redirect&bpo=33175): In dataclasses, Field.__set_name__ now looks up the __set_name__ special method on the class, not the instance, of the default value.
  * [bpo-33097](https://bugs.python.org/issue?@action=redirect&bpo=33097): Raise RuntimeError when `executor.submit` is called during interpreter shutdown.
  * [bpo-31908](https://bugs.python.org/issue?@action=redirect&bpo=31908): Fix output of cover files for `trace` module command-line tool. Previously emitted cover files only when `--missing` option was used. Patch by Michael Selik.