Title: Library Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: The library section of the changelog highlights several enhancements, including the introduction of relative symlinks by pyvenv, support for context management in cgi.FieldStorage(), improved debugging for CONNECT response headers, optimization of io.BytesIO for reduced allocations, and new warnings for empty string match patterns.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id792 "Link to this heading")
  * [bpo-23399](https://bugs.python.org/issue?@action=redirect&bpo=23399): pyvenv creates relative symlinks where possible.
  * [bpo-20289](https://bugs.python.org/issue?@action=redirect&bpo=20289): cgi.FieldStorage() now supports the context management protocol.
  * [bpo-13128](https://bugs.python.org/issue?@action=redirect&bpo=13128): Print response headers for CONNECT requests when debuglevel > 0. Patch by Demian Brecht.
  * [bpo-15381](https://bugs.python.org/issue?@action=redirect&bpo=15381): Optimized io.BytesIO to make less allocations and copyings.
  * [bpo-22818](https://bugs.python.org/issue?@action=redirect&bpo=22818): Splitting on a pattern that could match an empty string now raises a warning. Patterns that can only match empty strings are now rejected.
  * [bpo-23099](https://bugs.python.org/issue?@action=redirect&bpo=23099): Closing io.BytesIO with exported buffer is rejected now to prevent corrupting exported buffer.
  * [bpo-23326](https://bugs.python.org/issue?@action=redirect&bpo=23326): Removed __ne__ implementations. Since fixing default __ne__ implementation in [bpo-21408](https://bugs.python.org/issue?@action=redirect&bpo=21408) they are redundant.
  * [bpo-23363](https://bugs.python.org/issue?@action=redirect&bpo=23363): Fix possible overflow in itertools.permutations.
  * [bpo-23364](https://bugs.python.org/issue?@action=redirect&bpo=23364): Fix possible overflow in itertools.product.
  * [bpo-23366](https://bugs.python.org/issue?@action=redirect&bpo=23366): Fixed possible integer overflow in itertools.combinations.
  * [bpo-23369](https://bugs.python.org/issue?@action=redirect&bpo=23369): Fixed possible integer overflow in _json.encode_basestring_ascii.
  * [bpo-23353](https://bugs.python.org/issue?@action=redirect&bpo=23353): Fix the exception handling of generators in PyEval_EvalFrameEx(). At entry, save or swap the exception state even if PyEval_EvalFrameEx() is called with throwflag=0. At exit, the exception state is now always restored or swapped, not only if why is WHY_YIELD or WHY_RETURN. Patch co-written with Antoine Pitrou.
  * [bpo-14099](https://bugs.python.org/issue?@action=redirect&bpo=14099): Restored support of writing ZIP files to tellable but non-seekable streams.
  * [bpo-14099](https://bugs.python.org/issue?@action=redirect&bpo=14099): Writing to ZipFile and reading multiple ZipExtFiles is threadsafe now.
  * [bpo-19361](https://bugs.python.org/issue?@action=redirect&bpo=19361): JSON decoder now raises JSONDecodeError instead of ValueError.
  * [bpo-18518](https://bugs.python.org/issue?@action=redirect&bpo=18518): timeit now rejects statements which can’t be compiled outside a function or a loop (e.g. “return” or “break”).
  * [bpo-23094](https://bugs.python.org/issue?@action=redirect&bpo=23094): Fixed readline with frames in Python implementation of pickle.
  * [bpo-23268](https://bugs.python.org/issue?@action=redirect&bpo=23268): Fixed bugs in the comparison of ipaddress classes.
  * [bpo-21408](https://bugs.python.org/issue?@action=redirect&bpo=21408): Removed incorrect implementations of __ne__() which didn’t returned NotImplemented if __eq__() returned NotImplemented. The default __ne__() now works correctly.
  * [bpo-19996](https://bugs.python.org/issue?@action=redirect&bpo=19996): `email.feedparser.FeedParser` now handles (malformed) headers with no key rather than assuming the body has started.
  * [bpo-20188](https://bugs.python.org/issue?@action=redirect&bpo=20188): Support Application-Layer Protocol Negotiation (ALPN) in the ssl module.
  * [bpo-23133](https://bugs.python.org/issue?@action=redirect&bpo=23133): Pickling of ipaddress objects now produces more compact and portable representation.
  * [bpo-23248](https://bugs.python.org/issue?@action=redirect&bpo=23248): Update ssl error codes from latest OpenSSL git master.
  * [bpo-23266](https://bugs.python.org/issue?@action=redirect&bpo=23266): Much faster implementation of ipaddress.collapse_addresses() when there are many non-consecutive addresses.
  * [bpo-23098](https://bugs.python.org/issue?@action=redirect&bpo=23098): 64-bit dev_t is now supported in the os module.
  * [bpo-21817](https://bugs.python.org/issue?@action=redirect&bpo=21817): When an exception is raised in a task submitted to a ProcessPoolExecutor, the remote traceback is now displayed in the parent process. Patch by Claudiu Popa.
  * [bpo-15955](https://bugs.python.org/issue?@action=redirect&bpo=15955): Add an option to limit output size when decompressing LZMA data. Patch by Nikolaus Rath and Martin Panter.
  * [bpo-23250](https://bugs.python.org/issue?@action=redirect&bpo=23250): In the http.cookies module, capitalize “HttpOnly” and “Secure” as they are written in the standard.
  * [bpo-23063](https://bugs.python.org/issue?@action=redirect&bpo=23063): In the distutils’ check command, fix parsing of reST with code or code-block directiv