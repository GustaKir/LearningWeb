Title: Python 3.x Library Changes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent optimizations and bug fixes in the Python library, including performance enhancements for comprehension temporary variable assignment, resolution of `IndexError` with punycode codec, removal of obsolete checks in debugging functions, and expansion of `math.gcd()` and `math.lcm()` functions to handle multiple arguments.
---

ction=redirect&bpo=32856): Optimized the idiom for assignment a temporary variable in comprehensions. Now `for y in [expr]` in comprehensions is as fast as a simple assignment `y = expr`.


### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id401 "Link to this heading")
  * [bpo-30566](https://bugs.python.org/issue?@action=redirect&bpo=30566): Fix [`IndexError`](https://docs.python.org/3/library/exceptions.html#IndexError "IndexError") when trying to decode an invalid string with punycode codec.
  * [bpo-39649](https://bugs.python.org/issue?@action=redirect&bpo=39649): Remove obsolete check for `__args__` in `bdb.Bdb.format_stack_entry`.
  * [bpo-39648](https://bugs.python.org/issue?@action=redirect&bpo=39648): Expanded [`math.gcd()`](https://docs.python.org/3/library/math.html#math.gcd "math.gcd") and [`math.lcm()`](https://docs.python.org/3/library/math.html#math.lcm "math.lcm") to handle multiple arguments.
  * [bpo-39681](https://bugs.python.org/issue?@action=redirect&bpo=39681): Fix a regression where the C pickle module wouldn’t allow unpickling from a file-like object that doesn’t expose a readinto() method.
  * [bpo-35950](https://bugs.python.org/issue?@action=redirect&bpo=35950): Raise [`io.UnsupportedOperation`](https://docs.python.org/3/library/io.html#io.UnsupportedOperation "io.UnsupportedOperation") in `io.BufferedReader.truncate()` when it is called on a read-only [`io.BufferedReader`](https://docs.python.org/3/library/io.html#io.BufferedReader "io.BufferedReader") instance.
  * [bpo-39479](https://bugs.python.org/issue?@action=redirect&bpo=39479): Add [`math.lcm()`](https://docs.python.org/3/library/math.html#math.lcm "math.lcm") function: least common multiple.
  * [bpo-39674](https://bugs.python.org/issue?@action=redirect&bpo=39674): Revert “Do not expose abstract collection classes in the collections module” change ([bpo-25988](https://bugs.python.org/issue?@action=redirect&bpo=25988)). Aliases to ABC like collections.Mapping are kept in Python 3.9 to ease transition from Python 2.7, but will be removed in Python 3.10.
  * [bpo-39104](https://bugs.python.org/issue?@action=redirect&bpo=39104): Fix hanging ProcessPoolExcutor on `shutdown(wait=False)` when a task has failed pickling.
  * [bpo-39627](https://bugs.python.org/issue?@action=redirect&bpo=39627): Fixed TypedDict totality check for inherited keys.
  * [bpo-39474](https://bugs.python.org/issue?@action=redirect&bpo=39474): Fixed starting position of AST for expressions like `(a)(b)`, `(a)[b]` and `(a).b`.
  * [bpo-21016](https://bugs.python.org/issue?@action=redirect&bpo=21016): The [`pydoc`](https://docs.python.org/3/library/pydoc.html#module-pydoc "pydoc: Documentation generator and online help system.") and [`trace`](https://docs.python.org/3/library/trace.html#module-trace "trace: Trace or track Python statement execution.") modules now use the [`sysconfig`](https://docs.python.org/3/library/sysconfig.html#module-sysconfig "sysconfig: Python's configuration information") module to get the path to the Python standard library, to support uncommon installation path like `/usr/lib64/python3.9/` on Fedora. Patch by Jan Matějek.
  * [bpo-39590](https://bugs.python.org/issue?@action=redirect&bpo=39590): Collections.deque now holds strong references during deque.__contains__ and deque.count, fixing crashes.
  * [bpo-39586](https://bugs.python.org/issue?@action=redirect&bpo=39586): The distutils `bdist_msi` command is deprecated in Python 3.9, use `bdist_wheel` (wheel packages) instead.
  * [bpo-39595](https://bugs.python.org/issue?@action=redirect&bpo=39595): Improved performance of zipfile.Path for files with a large number of entries. Also improved performance and fixed minor issue as published with [importlib_metadata 1.5](https://importlib-metadata.readthedocs.io/en/latest/history.html#v1-5-0).
  * [bpo-39350](https://bugs.python.org/issue?@action=redirect&bpo=39350): Fix regression in [`fractions.Fraction`](https://docs.python.org/3/library/fractions.html#fractions.Fraction "fractions.Fraction") if the numerator and/or the denominator is an [`int`](https://docs.python.org/3/library/functions.html#int "int") subclass. The [`math.gcd()`](https://docs.python.org/3/library/math.html#math.gcd "math.gcd") function is now used to normalize the _numerator_ and _denominator_. [`math.gcd()`](https://docs.python.org/3/library/math.html#math.gcd "math.gcd") always return a [`int`](https://docs.python.org/3/library/functions.html#int "int") type. Previously, the GCD type depended on _numerator_ and _denominator_.
  * [bpo-39567](https://bugs.python.org/issue?@action=redirect&bpo=39567): Added audit for [`os.walk()`](https://docs.python.org/3/library/os.html#os.walk "os.walk"), [`os.fwalk()`](https://docs.python.org/3/library/os.html#os.fwalk "os.fwalk"), [`pathlib.Path.glob()`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob "pathlib.Path.glob") and [`pathlib.Path.rglob()`](https://docs.python.org/3/library/pathlib