Title: Build Changes in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details updates to the Python build process, including the removal of the scriptsinstall Makefile target, changes to how C extensions are linked on Unix systems, and modifications to distutils and python-config. Notably, the linking behavior allows for loading shared library Python C extensions in statically linked Python environments.
---

### Build[¶](https://docs.python.org/3/whatsnew/changelog.html#id451 "Link to this heading")
  * [bpo-36747](https://bugs.python.org/issue?@action=redirect&bpo=36747): Remove the stale scriptsinstall Makefile target.
  * [bpo-21536](https://bugs.python.org/issue?@action=redirect&bpo=21536): On Unix, C extensions are no longer linked to libpython except on Android and Cygwin.
It is now possible for a statically linked Python to load a C extension built using a shared library Python.
When Python is embedded, `libpython` must not be loaded with `RTLD_LOCAL`, but `RTLD_GLOBAL` instead. Previously, using `RTLD_LOCAL`, it was already not possible to load C extensions which were not linked to `libpython`, such as C extensions of the standard library built by the `*shared*` section of `Modules/Setup`.
distutils, python-config and python-config.py have been modified.
  * [bpo-36707](https://bugs.python.org/issue?@action=redirect&bpo=36707): `./configure --with-pymalloc` no longer adds the `m` flag to SOABI (sys.implementation.cache_tag). Enabling or disabling pymalloc has no impact on the ABI.
  * [bpo-36635](https://bugs.python.org/issue?@action=redirect&bpo=36635): Change `PyAPI_FUNC(type)`, `PyAPI_DATA(type)` and `PyMODINIT_FUNC` macros of `pyport.h` when `Py_BUILD_CORE_MODULE` is defined. The `Py_BUILD_CORE_MODULE` define must be now be used to build a C extension as a dynamic library accessing Python internals: export the `PyInit__xxx_()`function in DLL exports on Windows.
  * [bpo-31904](https://bugs.python.org/issue?@action=redirect&bpo=31904): Don’t build the `_crypt` extension on VxWorks.
  * [bpo-36618](https://bugs.python.org/issue?@action=redirect&bpo=36618): Add `-fmax-type-align=8` to CFLAGS when clang compiler is detected. The pymalloc memory allocator aligns memory on 8 bytes. On x86-64, clang expects alignment on 16 bytes by default and so uses MOVAPS instruction which can lead to segmentation fault. Instruct clang that Python is limited to alignment on 8 bytes to use MOVUPS instruction instead: slower but don’t trigger a SIGSEGV if the memory is not aligned on 16 bytes. Sadly, the flag must be added to `CFLAGS` and not just `CFLAGS_NODIST`, since third party C extensions can have the same issue.
  * [bpo-36605](https://bugs.python.org/issue?@action=redirect&bpo=36605): `make tags` and `make TAGS` now also parse `Modules/_io/*.c` and `Modules/_io/*.h`.
  * [bpo-36465](https://bugs.python.org/issue?@action=redirect&bpo=36465): Release builds and debug builds are now ABI compatible: defining the `Py_DEBUG` macro no longer implies the `Py_TRACE_REFS` macro, which introduces the only ABI incompatibility. The `Py_TRACE_REFS` macro, which adds the [`sys.getobjects()`](https://docs.python.org/3/library/sys.html#sys.getobjects "sys.getobjects") function and the [`PYTHONDUMPREFS`](https://docs.python.org/3/using/cmdline.html#envvar-PYTHONDUMPREFS) environment variable, can be set using the new `./configure --with-trace-refs` build option.
  * [bpo-36577](https://bugs.python.org/issue?@action=redirect&bpo=36577): setup.py now correctly reports missing OpenSSL headers and libraries again.
  * [bpo-36544](https://bugs.python.org/issue?@action=redirect&bpo=36544): Fix regression introduced in [bpo-36146](https://bugs.python.org/issue?@action=redirect&bpo=36146) refactoring setup.py
  * [bpo-36508](https://bugs.python.org/issue?@action=redirect&bpo=36508): `python-config --ldflags` no longer includes flags of the `LINKFORSHARED` variable. The `LINKFORSHARED` variable must only be used to build executables.
  * [bpo-36503](https://bugs.python.org/issue?@action=redirect&bpo=36503): Remove references to “aix3” and “aix4”. Patch by M. Felt.