Title: Python Changelog: New Features and Fixes
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This update includes the addition of warnings._showwarnmsg() for better traceback information, improvements to pyclbr.readmodule() for package support, enhancements to HTTPResponse methods, and adjustments in unittest discovery for socket handling.
---

Add warnings._showwarnmsg() which uses tracemalloc to get the traceback where source object was allocated.
  * [bpo-26569](https://bugs.python.org/issue?@action=redirect&bpo=26569): Fix [`pyclbr.readmodule()`](https://docs.python.org/3/library/pyclbr.html#pyclbr.readmodule "pyclbr.readmodule") and [`pyclbr.readmodule_ex()`](https://docs.python.org/3/library/pyclbr.html#pyclbr.readmodule_ex "pyclbr.readmodule_ex") to support importing packages.
  * [bpo-26499](https://bugs.python.org/issue?@action=redirect&bpo=26499): Account for remaining Content-Length in HTTPResponse.readline() and read1(). Based on patch by Silent Ghost. Also document that HTTPResponse now supports these methods.
  * [bpo-25320](https://bugs.python.org/issue?@action=redirect&bpo=25320): Handle sockets in directories unittest discovery is scanning. Patch from Victor van den Elzen.
  * [bpo-16181](https://bugs.python.org/issue?@action=redirect&bpo=16181): cookiejar.http2time() now returns None if year is higher than datetime.MAXYEAR.
  * [bpo-26513](https://bugs.python.org/issue?@action=redirect&bpo=26513): Fixes platform module detection of Windows Server
  * [bpo-23718](https://bugs.python.org/issue?@action=redirect&bpo=23718): Fixed parsing time in week 0 before Jan 1. Original patch by Tamás Bence Gedai.
  * [bpo-26323](https://bugs.python.org/issue?@action=redirect&bpo=26323): Add Mock.assert_called() and Mock.assert_called_once() methods to unittest.mock. Patch written by Amit Saha.
  * [bpo-20589](https://bugs.python.org/issue?@action=redirect&bpo=20589): Invoking Path.owner() and Path.group() on Windows now raise NotImplementedError instead of ImportError.
  * [bpo-26177](https://bugs.python.org/issue?@action=redirect&bpo=26177): Fixed the keys() method for Canvas and Scrollbar widgets.
  * [bpo-15068](https://bugs.python.org/issue?@action=redirect&bpo=15068): Got rid of excessive buffering in fileinput. The bufsize parameter is now deprecated and ignored.
  * [bpo-19475](https://bugs.python.org/issue?@action=redirect&bpo=19475): Added an optional argument timespec to the datetime isoformat() method to choose the precision of the time component.
  * [bpo-2202](https://bugs.python.org/issue?@action=redirect&bpo=2202): Fix UnboundLocalError in AbstractDigestAuthHandler.get_algorithm_impls. Initial patch by Mathieu Dupuy.
  * [bpo-26167](https://bugs.python.org/issue?@action=redirect&bpo=26167): Minimized overhead in copy.copy() and copy.deepcopy(). Optimized copying and deepcopying bytearrays, NotImplemented, slices, short lists, tuples, dicts, sets.
  * [bpo-25718](https://bugs.python.org/issue?@action=redirect&bpo=25718): Fixed pickling and copying the accumulate() iterator with total is None.
  * [bpo-26475](https://bugs.python.org/issue?@action=redirect&bpo=26475): Fixed debugging output for regular expressions with the (?x) flag.
  * [bpo-26482](https://bugs.python.org/issue?@action=redirect&bpo=26482): Allowed pickling recursive dequeues.
  * [bpo-26335](https://bugs.python.org/issue?@action=redirect&bpo=26335): Make mmap.write() return the number of bytes written like other write methods. Patch by Jakub Stasiak.
  * [bpo-26457](https://bugs.python.org/issue?@action=redirect&bpo=26457): Fixed the subnets() methods in IP network classes for the case when resulting prefix length is equal to maximal prefix length. Based on patch by Xiang Zhang.
  * [bpo-26385](https://bugs.python.org/issue?@action=redirect&bpo=26385): Remove the file if the internal open() call in NamedTemporaryFile() fails. Patch by Silent Ghost.
  * [bpo-26402](https://bugs.python.org/issue?@action=redirect&bpo=26402): Fix XML-RPC client to retry when the server shuts down a persistent connection. This was a regression related to the new http.client.RemoteDisconnected exception in 3.5.0a4.
  * [bpo-25913](https://bugs.python.org/issue?@action=redirect&bpo=25913): Leading `<~` is optional now in base64.a85decode() with adobe=True. Patch by Swati Jaiswal.
  * [bpo-26186](https://bugs.python.org/issue?@action=redirect&bpo=26186): Remove an invalid type check in importlib.util.LazyLoader.
  * [bpo-26367](https://bugs.python.org/issue?@action=redirect&bpo=26367): importlib.__import__() raises ImportError like builtins.__import__() when `level` is specified but without an accompanying package specified.
  * [bpo-26309](https://bugs.python.org/issue?@action=redirect&bpo=26309): In the “socketserver” module, shut down the request (closing the connected socket) when verify_request() returns false. Patch by Aviv Palivoda.
  * [bpo-23430](https://bugs.python.org/issue?@action=redirect&bpo=23430): Change the socketserver module to only catch exceptions raised from a request handler that are derived from Exception (instead of BaseException).