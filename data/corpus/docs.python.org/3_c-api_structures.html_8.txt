Title: Python C API: Structure Offsets and Member Definitions
URL: https://docs.python.org/3/c-api/structures.html
Summary: This section discusses the use of offsets for Python object structures, including `tp_dictoffset` and `tp_weaklistoffset`. It encourages the use of managed dictionary and weak reference flags, and notes that `PyMemberDef` is now always available since version 3.12.
---

```

(You may need to `#include <stddef.h>` for `offsetof()`.)
The legacy offsets [`tp_dictoffset`](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_dictoffset "PyTypeObject.tp_dictoffset") and [`tp_weaklistoffset`](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_weaklistoffset "PyTypeObject.tp_weaklistoffset") can be defined similarly using `"__dictoffset__"` and `"__weaklistoffset__"` members, but extensions are strongly encouraged to use [`Py_TPFLAGS_MANAGED_DICT`](https://docs.python.org/3/c-api/typeobj.html#c.Py_TPFLAGS_MANAGED_DICT "Py_TPFLAGS_MANAGED_DICT") and [`Py_TPFLAGS_MANAGED_WEAKREF`](https://docs.python.org/3/c-api/typeobj.html#c.Py_TPFLAGS_MANAGED_WEAKREF "Py_TPFLAGS_MANAGED_WEAKREF") instead.
Changed in version 3.12: `PyMemberDef` is always available. Previously, it required including `"structmember.h"`. 

[PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*PyMember_GetOne(constchar*obj_addr, struct[PyMemberDef](https://docs.python.org/3/c-api/structures.html#c.PyMemberDef "PyMemberDef")*m)[¶](https://docs.python.org/3/c-api/structures.html#c.PyMember_GetOne "Link to this definition")
    _Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable)._
Get an attribute belonging to the object at address _obj_addr_. The attribute is described by `PyMemberDef` _m_. Returns `NULL` on error.
Changed in version 3.12: `PyMember_GetOne` is always available. Previously, it required including `"structmember.h"`. 

intPyMember_SetOne(char*obj_addr, struct[PyMemberDef](https://docs.python.org/3/c-api/structures.html#c.PyMemberDef "PyMemberDef")*m, [PyObject](https://docs.python.org/3/c-api/structures.html#c.PyObject "PyObject")*o)[¶](https://docs.python.org/3/c-api/structures.html#c.PyMember_SetOne "Link to this definition")
    _Part of the[ Stable ABI](https://docs.python.org/3/c-api/stable.html#stable)._
Set an attribute belonging to the object at address _obj_addr_ to object _o_. The attribute to set is described by `PyMemberDef` _m_. Returns `0` if successful and a negative value on failure.
Changed in version 3.12: `PyMember_SetOne` is always available. Previously, it required including `"structmember.h"`.
### Member flags[¶](https://docs.python.org/3/c-api/structures.html#member-flags "Link to this heading")
The following flags can be used with [`PyMemberDef.flags`](https://docs.python.org/3/c-api/structures.html#c.PyMemberDef.flags "PyMemberDef.flags"): 

Py_READONLY[¶](https://docs.python.org/3/c-api/structures.html#c.Py_READONLY "Link to this definition")
    
Not writable. 

Py_AUDIT_READ[¶](https://docs.python.org/3/c-api/structures.html#c.Py_AUDIT_READ "Link to this definition")
    
Emit an `object.__getattr__` [audit event](https://docs.python.org/3/library/audit_events.html#audit-events) before reading.