Title: Library Updates in Python
URL: https://docs.python.org/3/whatsnew/changelog.html
Summary: This section details recent updates in the Python library, including improvements to lib2to3 for function signatures, changes to multiprocessing.Process behavior, SSL transport handling, ctypes pass-by-value for structs on certain systems, and enhancements to the inspect module and zlib constants.
---

### Library[¶](https://docs.python.org/3/whatsnew/changelog.html#id584 "Link to this heading")
  * [bpo-33064](https://bugs.python.org/issue?@action=redirect&bpo=33064): lib2to3 now properly supports trailing commas after `*args` and `**kwargs` in function signatures.
  * [bpo-31804](https://bugs.python.org/issue?@action=redirect&bpo=31804): Avoid failing in multiprocessing.Process if the standard streams are closed or None at exit.
  * [bpo-33037](https://bugs.python.org/issue?@action=redirect&bpo=33037): Skip sending/receiving data after SSL transport closing.
  * [bpo-30353](https://bugs.python.org/issue?@action=redirect&bpo=30353): Fix ctypes pass-by-value for structs on 64-bit Cygwin/MinGW.
  * [bpo-33009](https://bugs.python.org/issue?@action=redirect&bpo=33009): Fix inspect.signature() for single-parameter partialmethods.
  * [bpo-32969](https://bugs.python.org/issue?@action=redirect&bpo=32969): Expose several missing constants in zlib and fix corresponding documentation.
  * [bpo-32713](https://bugs.python.org/issue?@action=redirect&bpo=32713): Fixed tarfile.itn handling of out-of-bounds float values. Patch by Joffrey Fuhrer.
  * [bpo-30622](https://bugs.python.org/issue?@action=redirect&bpo=30622): The ssl module now detects missing NPN support in LibreSSL.
  * [bpo-32922](https://bugs.python.org/issue?@action=redirect&bpo=32922): dbm.open() now encodes filename with the filesystem encoding rather than default encoding.
  * [bpo-32859](https://bugs.python.org/issue?@action=redirect&bpo=32859): In `os.dup2`, don’t check every call whether the `dup3` syscall exists or not.
  * [bpo-21060](https://bugs.python.org/issue?@action=redirect&bpo=21060): Rewrite confusing message from setup.py upload from “No dist file created in earlier command” to the more helpful “Must create and upload files in one command”.
  * [bpo-32857](https://bugs.python.org/issue?@action=redirect&bpo=32857): In [`tkinter`](https://docs.python.org/3/library/tkinter.html#module-tkinter "tkinter: Interface to Tcl/Tk for graphical user interfaces"), `after_cancel(None)` now raises a [`ValueError`](https://docs.python.org/3/library/exceptions.html#ValueError "ValueError") instead of canceling the first scheduled function. Patch by Cheryl Sabella.
  * [bpo-32852](https://bugs.python.org/issue?@action=redirect&bpo=32852): Make sure sys.argv remains as a list when running trace.
  * [bpo-32841](https://bugs.python.org/issue?@action=redirect&bpo=32841): Fixed `asyncio.Condition` issue which silently ignored cancellation after notifying and cancelling a conditional lock. Patch by Bar Harel.
  * [bpo-31787](https://bugs.python.org/issue?@action=redirect&bpo=31787): Fixed refleaks of `__init__()` methods in various modules. (Contributed by Oren Milman)
  * [bpo-30157](https://bugs.python.org/issue?@action=redirect&bpo=30157): Fixed guessing quote and delimiter in csv.Sniffer.sniff() when only the last field is quoted. Patch by Jake Davis.
  * [bpo-32394](https://bugs.python.org/issue?@action=redirect&bpo=32394): socket: Remove TCP_FASTOPEN, TCP_KEEPCNT flags on older version Windows during run-time.
  * [bpo-32777](https://bugs.python.org/issue?@action=redirect&bpo=32777): Fix a rare but potential pre-exec child process deadlock in subprocess on POSIX systems when marking file descriptors inheritable on exec in the child process. This bug appears to have been introduced in 3.4.
  * [bpo-32647](https://bugs.python.org/issue?@action=redirect&bpo=32647): The ctypes module used to depend on indirect linking for dlopen. The shared extension is now explicitly linked against libdl on platforms with dl.
  * [bpo-32734](https://bugs.python.org/issue?@action=redirect&bpo=32734): Fixed `asyncio.Lock()` safety issue which allowed acquiring and locking the same lock multiple times, without it being free. Patch by Bar Harel.
  * [bpo-32727](https://bugs.python.org/issue?@action=redirect&bpo=32727): Do not include name field in SMTP envelope from address. Patch by Stéphane Wirtel
  * [bpo-27931](https://bugs.python.org/issue?@action=redirect&bpo=27931): Fix email address header parsing error when the username is an empty quoted string. Patch by Xiang Zhang.
  * [bpo-32304](https://bugs.python.org/issue?@action=redirect&bpo=32304): distutils’ upload command no longer corrupts tar files ending with a CR byte, and no longer tries to convert CR to CRLF in any of the upload text fields.
  * [bpo-32502](https://bugs.python.org/issue?@action=redirect&bpo=32502): uuid.uuid1 no longer raises an exception if a 64-bit hardware address is encountered.
  * [bpo-31848](https://bugs.python.org/issue?@action=redirect&bpo=31848): Fix the error handling in Aifc_read.initfp() when the SSND chunk is not found. Patch by Zackery Spytz.
  * [bpo-32555](https://bugs.python.org/issue?@action=redirect&bpo=32555): On FreeBSD and Solaris, os.strerror() now always decode the byte string from the current locale encoding, rather than using ASCII/surrogateescape in some cases.
  * [bpo-