Title: Connecting Streamlit to PostgreSQL
URL: https://docs.streamlit.io/develop/tutorials/databases/postgresql
Summary: This guide provides instructions for securely accessing a remote PostgreSQL database from Streamlit Community Cloud, utilizing st.connection and Streamlit's Secrets management. It is applicable for Streamlit version 1.28 and above.
---

# [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#connect-streamlit-to-postgresql)Connect Streamlit to PostgreSQL
## [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#introduction)Introduction
This guide explains how to securely access a **_remote_** PostgreSQL database from Streamlit Community Cloud. It uses [st.connection](https://docs.streamlit.io/develop/api-reference/connections/st.connection) and Streamlit's [Secrets management](https://docs.streamlit.io/develop/concepts/connections/secrets-management). The below example code will **only work on Streamlit version >= 1.28**, when `st.connection` was added.
## [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#create-a-postgresql-database)Create a PostgreSQL database
_push_pin_
#### Note
If you already have a database that you want to use, feel free to [skip to the next step](https://docs.streamlit.io/develop/tutorials/databases/postgresql#add-username-and-password-to-your-local-app-secrets).
First, follow [this tutorial](https://www.tutorialspoint.com/postgresql/postgresql_environment.htm) to install PostgreSQL and create a database (note down the database name, username, and password!). Open the SQL Shell (`psql`) and enter the following two commands to create a table with some example values:
`CREATE TABLE mytable (   name      varchar(80),   pet       varchar(80) ); INSERT INTO mytable VALUES ('Mary', 'dog'), ('John', 'cat'), ('Robert', 'bird'); `
## [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#add-username-and-password-to-your-local-app-secrets)Add username and password to your local app secrets
Your local Streamlit app will read secrets from a file `.streamlit/secrets.toml` in your app's root directory. Create this file if it doesn't exist yet and add the name, user, and password of your database as shown below:
`# .streamlit/secrets.toml [connections.postgresql] dialect = "postgresql" host = "localhost" port = "5432" database = "xxx" username = "xxx" password = "xxx" `
_priority_high_
#### Important
When copying your app secrets to Streamlit Community Cloud, be sure to replace the values of **host** , **port** , **database** , **username** , and **password** with those of your _remote_ PostgreSQL database!
Add this file to `.gitignore` and don't commit it to your GitHub repo!
## [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#copy-your-app-secrets-to-the-cloud)Copy your app secrets to the cloud
As the `secrets.toml` file above is not committed to GitHub, you need to pass its content to your deployed app (on Streamlit Community Cloud) separately. Go to the [app dashboard](https://share.streamlit.io/) and in the app's dropdown menu, click on **Edit Secrets**. Copy the content of `secrets.toml` into the text area. More information is available at [Secrets management](https://docs.streamlit.io/deploy/streamlit-community-cloud/deploy-your-app/secrets-management).
![Secrets manager screenshot](https://docs.streamlit.io/images/databases/edit-secrets.png)
## [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#add-dependencies-to-your-requirements-file)Add dependencies to your requirements file
Add the [psycopg2-binary](https://www.psycopg.org/) and [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy) packages to your `requirements.txt` file, preferably pinning its version (replace `x.x.x` with the version you want installed):
`# requirements.txt psycopg2-binary==x.x.x sqlalchemy==x.x.x `
## [](https://docs.streamlit.io/develop/tutorials/databases/postgresql#write-your-streamlit-app)Write your Streamlit app
Copy the code below to your Streamlit app and run it. Make sure to adapt `query` to use the name of your table.
`# streamlit_app.py import streamlit as st # Initialize connection. conn = st.connection("postgresql", type="sql") # Perform query. df = conn.query('SELECT * FROM mytable;', ttl="10m") # Print results. for row in df.itertuples():   st.write(f"{row.name} has a :{row.pet}:") `
See `st.connection` above? This handles secrets retrieval, setup, query caching and retries. By default, `query()` results are cached without expiring. In this case, we set `ttl="10m"` to ensure the query result is cached for no longer than 10 minutes. You can also set `ttl=0` to disable caching. Learn more in [Caching](https://docs.streamlit.io/develop/concepts/architecture/caching).
If everything worked out (and you used the example table we created above), your app should look like this:
![Finished app screenshot](https://docs.streamlit.io/images/databases/streamlit-app.png)[Previous: Neon](https://docs.streamlit.io/develop/tutorials/databases/neon)[Next: Private Google Sheet](https://docs.streamlit.io/develop/tutorials/databases/private-gsheet) _forum_
### Still have questions?
Our [forums](https://discuss.streamlit.io) are full of helpful information and Streamlit experts.
[Home](https://docs.streamlit.io/)Contact Us[Community](https://discuss.streaml