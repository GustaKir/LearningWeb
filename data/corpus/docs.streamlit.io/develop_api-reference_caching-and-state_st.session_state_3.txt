Title: Session State API Limitations for Widgets in Streamlit
URL: https://docs.streamlit.io/develop/api-reference/caching-and-state/st.session_state
Summary: The Session State API in Streamlit does not allow certain widgets like `st.button` and `st.file_uploader` to have persistent states. These widgets have ephemeral states which are valid only for a single run. An example shows that attempting to set a button's state can lead to exceptions.
---

on`, and `st.file_uploader` via the Session State API is not allowed. Such type of widgets are by default _False_ and have ephemeral _True_ states which are only valid for a single run. For example:
`if 'my_button' not in st.session_state:   st.session_state.my_button = True st.button('My button', key='my_button') # Throws an exception! `
![state-button-exception](https://docs.streamlit.io/images/state_button_exception.png)

[Previous: st.experimental_singleton](https://docs.streamlit.io/develop/api-reference/caching-and-state/st.experimental_singleton)[Next: st.context](https://docs.streamlit.io/develop/api-reference/caching-and-state/st.context) _forum_
### Still have questions?
Our [forums](https://discuss.streamlit.io) are full of helpful information and Streamlit experts.
[Home](https://docs.streamlit.io/)Contact Us[Community](https://discuss.streamlit.io)[](https://github.com/streamlit "GitHub")[](https://www.youtube.com/channel/UC3LD42rjj-Owtxsa6PwGU5Q "YouTube")[](https://twitter.com/streamlit "Twitter")[](https://www.linkedin.com/company/streamlit "LinkedIn")[](https://info.snowflake.com/streamlit-newsletter-sign-up.html "Newsletter")
Â© 2025 Snowflake Inc.Cookie policy
 _forum_ Ask AI