Title: Streamlit PyDeck Chart API Reference - Selection Mode and State Management
URL: https://docs.streamlit.io/develop/api-reference/charts/st.pydeck_chart
Summary: This section details the requirements for using the `on_select` parameter in the PyDeck chart. It specifies that all layers must have an `id` for statefulness if `on_select` is not set to 'ignore'. It outlines the available selection modes ('single-object' or 'multi-object') and explains the optional `key` parameter for establishing stable identities for elements. The return values based on the `on_select` setting are also described.
---

If `on_select` is not `"ignore"`, all layers must have a declared `id` to keep the chart stateful across reruns.  
selection_mode ("single-object" or "multi-object") |  The selection mode of the chart. This can be one of the following:
  * `"single-object"` (default): Only one object can be selected at a time.
  * `"multi-object"`: Multiple objects can be selected at a time.

  
key (str) |  An optional string to use for giving this element a stable identity. If `key` is `None` (default), this element's identity will be determined based on the values of the other parameters. Additionally, if selections are activated and `key` is provided, Streamlit will register the key in Session State to store the selection state. The selection state is read-only.  
Returns  
(element or dict) | If `on_select` is `"ignore"` (default), this command returns an internal placeholder for the chart element. Otherwise, this method returns a dictionary-like object that supports both key and attribute notation. The attributes are described by the `PydeckState` dictionary schema.  
#### Example
Here's a chart using a HexagonLayer and a ScatterplotLayer. It uses either the light or dark map style, based on which Streamlit theme is currently active:
```
import streamlit as st
import pandas as pd
import numpy as np
import pydeck as pdk
chart_data = pd.DataFrame(
  np.random.randn(1000, 2) / [50, 50] + [37.76, -122.4],
  columns=["lat", "lon"],
)
st.pydeck_chart(
  pdk.Deck(
    map_style=None,
    initial_view_state=pdk.ViewState(
      latitude=37.76,
      longitude=-122.4,
      zoom=11,
      pitch=50,
    ),
    layers=[
      pdk.Layer(
        "HexagonLayer",
        data=chart_data,
        get_position="[lon, lat]",
        radius=200,
        elevation_scale=4,
        elevation_range=[0, 1000],
        pickable=True,
        extruded=True,
      ),
      pdk.Layer(
        "ScatterplotLayer",
        data=chart_data,
        get_position="[lon, lat]",
        get_color="[200, 30, 0, 160]",
        get_radius=200,
      ),
    ],
  )
)
```

Copy
[Built with Streamlit ðŸŽˆ](https://streamlit.io)
[Fullscreen _open_in_new_](https://doc-pydeck-chart.streamlit.app//?utm_medium=oembed&)
Note
To make the PyDeck chart's style consistent with Streamlit's theme, you can set `map_style=None` in the `pydeck.Deck` object.
## [](https://docs.streamlit.io/develop/api-reference/charts/st.pydeck_chart#chart-selections)Chart selections
### [](https://docs.streamlit.io/develop/api-reference/charts/st.pydeck_chart#pydeckstate)PydeckState
Streamlit VersionVersion 1.44.0Version 1.43.0Version 1.42.0Version 1.41.0Version 1.40.0Version 1.39.0Version 1.38.0Version 1.37.0Version 1.36.0Version 1.35.0Version 1.34.0Version 1.33.0Version 1.32.0Version 1.31.0Version 1.30.0Version 1.29.0Version 1.28.0Version 1.27.0Version 1.26.0Version 1.25.0Version 1.24.0Version 1.23.0Version 1.22.0Version 1.21.0Version 1.20.0
The schema for the PyDeck event state.
The event state is stored in a dictionary-like object that supports both key and attribute notation. Event states cannot be programmatically changed or set through Session State.
Only selection events are supported at this time.
Attributes  
---  
selection (dict) |  The state of the `on_select` event. This attribute returns a dictionary-like object that supports both key and attribute notation. The attributes are described by the `PydeckSelectionState` dictionary schema.  
### [](https://docs.streamlit.io/develop/api-reference/charts/st.pydeck_chart#pydeckselectionstate)PydeckSelectionState
Streamlit VersionVersion 1.44.0Version 1.43.0Version 1.42.0Version 1.41.0Version 1.40.0Version 1.39.0Version 1.38.0Version 1.37.0Version 1.36.0Version 1.35.0Version 1.34.0Version 1.33.0Version 1.32.0Version 1.31.0Version 1.30.0Version 1.29.0Version 1.28.0Version 1.27.0Version 1.26.0Version 1.25.0Version 1.24.0Version 1.23.0Version 1.22.0Version 1.21.0Version 1.20.0
The schema for the PyDeck chart selection state.
The selection state is stored in a dictionary-like object that supports both key and attribute notation. Selection states cannot be programmatically changed or set through Session State.
You must define `id` in `pydeck.Layer` to ensure statefulness when using selections with `st.pydeck_chart`.
Attributes  
---  
indices (dict[str, list[int]]) |  A dictionary of selected objects by layer. Each key in the dictionary is a layer id, and each value is a list of object indices within that layer.  
objects (dict[str, list[dict[str, Any]]]) |  A dictionary of object attributes by layer. Each key in the dictionary is a layer id, and each value is a list of metadata dictionaries for the selected objects in that layer.  
#### Examples
The following example has multi-object selection enabled. The chart displays US state capitals by population (2023 US Census estimate). You can access this [data](https://github.com/streamlit/docs/blob/main/python/api-examples-source/data/capitals.csv) from GitHub.